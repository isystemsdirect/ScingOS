#!/usr/bin/env bash
set -euo pipefail

# Git LFS: upload any LFS objects referenced by the commits being pushed.
command -v git-lfs >/dev/null 2>&1 || {
	printf >&2 "\n%s\n\n" "This repository is configured for Git LFS but 'git-lfs' was not found on your path.";
	exit 2;
}
git lfs pre-push "$@"

# Only enforce on branches that push to origin/main or any upstream
# Detect base as origin/main; if missing, skip.
git rev-parse --verify origin/main >/dev/null 2>&1 || exit 0

# Run sync check against origin/main
bash scripts/check-training-pdf-sync.sh origin/main
