
# SCINGULAR AI: System Architecture & Feature Map

**Document Version:** 1.0
**Date:** 2024-11-04

---

## 1.0 Introduction & Document Purpose

This document provides an exhaustive, "no-stone-unturned" technical and functional map of the SCINGULAR AI ecosystem. Its purpose is to serve as the definitive reference for developers, system architects, and stakeholders, detailing every component, feature, and their complex interdependencies. We will explore the system from its highest conceptual level down to the specifics of individual modules and external service integrations, leaving no detail to spare.

The SCINGULAR platform is not a monolithic application but a synergistic ecosystem of interconnected services, AI engines, and user interfaces. Understanding how these components collaborate is critical to grasping the platform's full power and potential.

---

## 2.0 Core Architectural Pillars

The entire platform is built upon a foundation of core technological principles and proprietary AI engines. These are the strategic cornerstones that define the system's capabilities.

### 2.1 The AI Trinity: LARI™, Scing™, and BANE™

The intelligence of the platform is distributed across three primary, synergistic AI systems.

#### 2.1.1 **LARI™ (Logistical, Analytical, & Reporting Interface)**
*   **Definition & Purpose**: LARI is the **Analytical Brain** of the ecosystem. It is not a single AI but a federated suite of highly specialized "sub-engines" (`LARI-VISION`, `LARI-MAPPER`, etc.), each designed to process a specific modality of data from the physical world. Its primary function is to ingest raw, unstructured data from inspection hardware (e.g., images, LiDAR scans, thermal readings) and transform it into structured, quantifiable, and actionable intelligence.
*   **Technical Implementation**: LARI's sub-engines are implemented as a series of Genkit flows located in the `src/ai/flows/` directory. Each sub-engine, like `lari-vision.ts`, defines Zod schemas for its expected inputs (e.g., image data URIs) and outputs (e.g., a JSON object detailing identified anomalies). These flows utilize advanced prompts with the Google Gemini 1.5 Flash model to perform complex analysis, classification, and data extraction. The use of Genkit allows for robust, scalable, and maintainable AI logic that can be easily invoked from server-side components.
*   **Interaction with Other Features**:
    *   **Scing™ AI**: Scing acts as the user-friendly interface to LARI. When a user issues a voice command like, *"Scing, analyze this thermal image,"* Scing processes the command and invokes the appropriate LARI sub-engine (in this case, `LARI-THERM`).
    *   **Inspection Module**: During an inspection, captured evidence (photos, videos) is passed to LARI sub-engines for analysis. The structured data returned by LARI (e.g., "hairline crack, 2mm width") is then populated into the inspection findings.
    *   **BANE™**: All data processed by LARI and the resulting analytical outputs are cryptographically signed and logged by the BANE engine to ensure data provenance and integrity.

#### 2.1.2 **Scing™ AI (The Scingular AI Automaton)**
*   **Definition & Purpose**: Scing is the **Human-Relations AI and Field Partner**. It is the primary interface through which the user interacts with the platform's complex capabilities. Scing is engineered to understand natural language (voice and text), interpret user intent, and orchestrate the execution of tasks by commanding other parts of the ecosystem. It also has autonomous capabilities, allowing it to control the application's user interface directly in response to voice commands.
*   **Technical Implementation**: Scing's intelligence is powered by several key components:
    1.  **Wake Word Detection**: The `useWakeWordDetection` hook (`src/hooks/useWakeWordDetection.ts`) uses the **Picovoice Porcupine** engine to listen for the "Hey, Scing" wake phrase, enabling hands-free activation. This is a crucial external service.
    2.  **Speech-to-Text**: The `useSpeechRecognition` hook (`src/hooks/useSpeechRecognition.ts`) utilizes the browser's built-in Web Speech API to transcribe user voice commands into text.
    3.  **Command Processing**: The transcribed text is sent to the `lari-scing-bridge.ts` Genkit flow, which interprets the command and determines the appropriate action and parameters.
    4.  **Autonomous Control**: The `autonomous-dom-controller.ts` and `autonomous-component-controller.ts` are client-side systems that can receive and execute a series of UI manipulation commands (create, modify, delete, animate elements) generated by the AI backend, allowing Scing to physically control the app interface.
*   **Interaction with Other Features**: Scing is the central orchestrator. It can initiate new inspections, capture photos, add notes to findings, navigate between pages, filter tables in the UI, and activate other LARI engines, providing a seamless, voice-driven user experience across the entire application.

#### 2.1.3 **BANE™ (Business Analytics & Network Engine)**
*   **Definition & Purpose**: BANE is the **Guardian and Business Strategist** of the platform, operating silently in the background. It serves two critical functions:
    1.  **Security & Integrity**: BANE is responsible for the "digital chain of custody." It cryptographically signs every piece of data from the moment of capture, ensuring that all evidence and reports are immutable and legally defensible. It also manages user entitlements, controlling access to LARI engines via the "Key" system.
    2.  **Business Intelligence**: BANE anonymizes and aggregates data from across the entire network to generate high-value market insights, risk models, and predictive analytics. This is a core part of the platform's long-term monetization strategy (Data as a Service).
*   **Technical Implementation**: BANE's logic is primarily a server-side construct, implemented through a combination of Firebase Functions (not fully visible in the current codebase but implied by the architecture) and secure backend processes. The concept of "Keys" and "Entitlements" detailed in `docs/backend.json` is enforced by BANE.
*   **Interaction with Other Features**: Every module that handles data creation or modification (Inspections, User Profiles, Finances) interacts with BANE to ensure data integrity and to check user permissions. The Marketplace relies on BANE to manage the sale and activation of LARI Keys.

### 2.2 External Service Integrations

The SCINGULAR platform leverages several best-in-class external services to achieve its advanced functionality.

*   **Google Firebase**: The core backend-as-a-service.
    *   **Firestore**: The primary NoSQL database for storing all application data (inspections, users, clients, etc.), as defined in `docs/backend.json`.
    *   **Firebase Authentication**: Manages user sign-up, login, and sessions.
    *   **Firebase Storage**: Used for storing all large files, such as images, videos, and LiDAR scans. The app is configured in `next.config.ts` to accept image URLs from this service.
    *   **Firebase Functions**: (Implied) For server-side logic, such as processing payments, managing BANE's integrity checks, and running complex backend tasks.
*   **Google Cloud AI (via Genkit)**:
    *   **Gemini Models**: The powerhouse behind all LARI and Scing AI flows. The app uses `gemini-1.5-flash` for its speed and multimodal capabilities.
    *   **Google Text-to-Speech**: Used by the `lari-narrator.ts` flow to convert text summaries into audio presentations.
*   **Google Maps Platform**:
    *   **Maps JavaScript API**: Powers all interactive maps within the application, including the **Dispatch Map** (`/teams`) and the **Marketplace Map** (`/marketplace`). It's configured with custom dark-mode styling.
    *   **Weather Layer**: Provides real-time weather overlays on the maps, as seen in the `maps-weather` page.
*   **OpenWeatherMap API**: Used by the `WeatherWidget` component (`src/components/weather-widget.tsx`) to fetch and display current weather conditions in the user's local area.
*   **Picovoice Porcupine**: A highly efficient wake-word detection engine used in the `ScingAI.tsx` component to enable hands-free activation. This is a critical component for the autonomous AI feature.
*   **Stream**: A third-party service for building real-time chat and messaging functionality. The `MessagingDialog` component (`src/components/messaging-dialog.tsx`) integrates the Stream Chat SDK to provide a full-featured messaging experience.
*   **AWS S3**: The `generate-upload-url.ts` flow is configured to generate pre-signed URLs for direct file uploads to an AWS S3 bucket, providing a secure and scalable file ingestion mechanism.

---

## 3.0 Module & Feature Breakdown

This section details each user-facing module, corresponding to the pages within the `src/app` directory.

### 3.1 Dashboard (`/dashboard`)
*   **Definition & Purpose**: The Dashboard serves as the user's central command center, providing a high-level, at-a-glance overview of the entire ecosystem. It presents key performance indicators, real-time operational status, and shortcuts to critical tasks.
*   **Key Components & Features**:
    *   **Dashboard Charts**: Utilizes **Recharts** library to display key metrics:
        *   *Inspection Status Pie Chart*: A visual breakdown of inspections by their current status (Draft, In Progress, Final).
        *   *Revenue Over Time Line Chart*: Tracks monthly revenue from completed inspections.
        *   *Inspections by Month Bar Chart*: Shows the volume of completed inspections over time.
    *   **Live Operations Map**: An embedded Google Map (`MarketplaceMap` component) showing the real-time locations of available team members and active client job requests. This provides immediate dispatch intelligence.
    *   **Team Status Table**: A list of the user's team members, showing their current on-call status and assigned task. This integrates with the Teams & Dispatch module.
    *   **Guardian Angel AI Widget**: A dedicated card providing a real-time summary from the `LARI-GUANGEL` AI. It monitors user biometrics and environmental data to provide safety alerts (e.g., "All Systems Nominal" or "High Wind Warning").
    *   **Today's Agenda**: Lists the day's scheduled inspections and appointments, pulling data from the Calendar module.
    *   **Recent Activity Feed**: A running log of important system-wide events, such as new inspections started, new clients added, or reports being finalized.
*   **Interaction with Other Features**: The Dashboard is an aggregation point. It pulls data from **Inspections**, **Calendar**, **Teams**, **Finances**, and the **LARI-GUANGEL AI** to provide a holistic view. Clicking on items in the agenda or team status list navigates the user to the relevant module.

### 3.2 Inspections (`/inspections` and `inspections/[id]`)
*   **Definition & Purpose**: This is the core module for managing the entire lifecycle of an inspection, from creation and data capture to final report generation.
*   **Key Components & Features**:
    *   **Inspections Dashboard (`/inspections`)**: A tabular view of all inspections, filterable by status (All, Final, In Progress, Draft). It allows users to start a new inspection or drill down into an existing one.
    *   **New Inspection Wizard (`/inspections/new/...`)**: A multi-step wizard to guide users through creating a new inspection.
        1.  *Template Selection*: User chooses from a comprehensive library of inspection types, grouped by category (e.g., "Pre-acquisition," "Construction phase QA/QC").
        2.  *Client & Property Details*: User can add a new client or select an existing one, and input the property address.
        3.  *Review & Confirm*: A final summary before the inspection is created.
    *   **Inspection Detail Page (`/inspections/[id]`)**: The central hub for a single inspection. It is organized into tabs:
        *   *Overview*: Shows high-level details, property address, devices used, and the AI-generated executive summary from **LARI-SYNTHESIZER**.
        *   *Findings*: A detailed list of all findings identified during the inspection. Each finding includes a severity level, AI confidence score, textual description, code references (from **LARI-COMPLIANCE**), and attached media evidence.
        *   *Attachments*: A gallery of all media (images, videos) associated with the inspection.
        *   *Report*: Tools to finalize and export the inspection report in various formats (PDF, PowerPoint). It includes a feature for digital signatures. It also features an AI-generated audio presentation of the report, powered by **LARI-NARRATOR**.
*   **Interaction with Other Features**: This module is deeply integrated with LARI sub-engines for analyzing evidence. It links to the **Clients** module for contact information and the **Standards Library** via LARI-COMPLIANCE for code cross-referencing.

### 3.3 Calendar & Scheduling (`/calendar`)
*   **Definition & Purpose**: A comprehensive scheduling tool for managing team availability and booking appointments.
*   **Key Components & Features**:
    *   **Team Schedule Grid**: A weekly calendar view showing blocks of time that are booked, available, or empty. Booked slots are color-coded by the assigned inspector.
    *   **Team Member Filter**: A sidebar allows the user to toggle the visibility of individual team members on the schedule, making it easy to see who is available.
    *   **Booking Creation**: A "Create Booking" button initiates a new booking wizard.
    *   **New Booking Wizard (`/bookings/new`)**: A multi-step process for creating a new appointment:
        1.  *Select Resource*: Choose an inspector or a piece of equipment to book.
        2.  *Questionnaire & Time*: (Implied next step) User would fill out relevant details and select an available time slot.
*   **Interaction with Other Features**: The calendar directly relates to the **Teams & Dispatch** module by visualizing member availability. Creating a booking here can automatically generate a job on the **Job Board**.

### 3.4 Teams & Dispatch (`/teams`, `/teams/jobs`, etc.)
*   **Definition & Purpose**: The operational command center for managing field teams, assigning jobs, and monitoring active work.
*   **Key Components & Features**:
    *   **Dispatch Map (`/teams`)**: The main view features a large, interactive Google Map showing real-time locations of available inspectors and unassigned jobs, providing dispatchers with crucial spatial awareness.
    *   **Available Inspectors List**: A scrollable list of all team members who are currently "On-Call" and ready for dispatch. Users can click to view a profile modal or initiate a chat.
    *   **Active Jobs List**: Shows all jobs that are currently assigned or in progress, along with the assigned inspector.
    *   **Job Board (`/teams/jobs`)**: A dedicated page that lists all unassigned jobs, filterable by priority. From here, a dispatcher can trigger the **Dispatch Wizard**.
    *   **Dispatch Wizard**: A modal-based wizard that guides the dispatcher through assigning a job to a selected inspector, adding instructions, and confirming the dispatch.
*   **Interaction with Other Features**: This module is the operational heart of the system. It uses data from the **Marketplace** (for finding inspectors), **Clients** (for job requests), and **Calendar** (for availability) to facilitate efficient dispatching. It also integrates with the **Messaging** system to allow instant communication with team members.

### 3.5 Marketplace & Community (`/marketplace`, `/community`, `/social`, `/topics`)
*   **Definition & Purpose**: A multi-faceted hub for professional networking, service procurement, and knowledge sharing.
*   **Key Components & Features**:
    *   **Find an Inspector (`/marketplace`)**: A searchable directory of certified inspectors, allowing users to find and dispatch professionals for jobs, either from their own team or the wider Scingular network.
    *   **Browse Services**: A catalog of specialized, a-la-carte services offered by third-party providers (e.g., "Structural Engineer Review").
    *   **Integrations & Keys**: An "App Store" for purchasing LARI Keys to unlock advanced AI capabilities (e.g., a `LARI-PRISM` Key for materials analysis) and third-party software integrations.
    *   **Community Hub (`/community` & `/social`)**: A social media-style feed where users can post questions, share knowledge, and interact. It features AI-generated responses from Scing AI, which analyzes user questions and provides answers based on its vast knowledge base.
    *   **Topics (`/topics`)**: A page for browsing and following specific subject areas (e.g., #drone-inspections, #thermal-imaging), allowing for focused discussions.
*   **Interaction with Other Features**: The Marketplace is tightly integrated with the **Finances** module for purchasing Keys and services. The "Find an Inspector" feature feeds directly into the **Teams & Dispatch** workflow. The Community Hub provides a platform for users to discuss findings from their **Inspections**.

### 3.6 Workstation (`/workstation`)
*   **Definition & Purpose**: The user's personal settings and configuration hub. This is where they manage their profile, devices, AI preferences, and other personal settings.
*   **Key Components & Features**:
    *   **Profile Management**: Edit public-facing information like name, bio, and social media links.
    *   **Credentials & Licenses**: Upload and manage professional certifications for verification by the platform.
    *   **API & Device Keys**: A dashboard to view and manage all owned LARI Keys and their enabled features. This includes deep-dives into a Key's specific capabilities, such as the **Periodic Table Element Selector** for `LARI-PRISM`.
    *   **Device Lab**: A virtual environment (`/workstation/devices/[id]`) for managing and "tuning" connected hardware. It provides a live video feed (HUD), telemetry charts, and remote controls (e.g., reboot, calibrate). The **Drone Builder Control Panel** is a specialized version of this for drone management.
    *   **AI & Voice Settings**: Configure the "Hey, Scing!" wake word, select microphone inputs, and choose the AI's response voice.
*   **Interaction with Other Features**: The settings configured here directly impact how the user appears in the **Marketplace**, how Scing AI responds to them, and what capabilities are available during an **Inspection**.

---

## 4.0 Conclusion

This document has provided a granular, exhaustive overview of the SCINGULAR AI platform's architecture and feature set. The system is designed as a deeply interconnected ecosystem where each module, AI engine, and external service plays a crucial role. The true power of the platform emerges not from any single feature, but from the seamless, intelligent synergy between them—from voice-activated data capture in the field, to deep AI analysis in the cloud, to automated report generation and secure data logging.

This feature map serves as a living document and will be updated as the SCINGULAR ecosystem continues to evolve.

