exports.id=548,exports.ids=[548],exports.modules={750:(a,b,c)=>{"use strict";let d,e,f;c.d(b,{WN:()=>j,hM:()=>i,jD:()=>h,td:()=>k});let g=(d={status:"idle"},e=new Set,f=()=>{for(let a of e)a(d)},{getState:()=>d,subscribe:a=>(e.add(a),a(d),()=>e.delete(a)),startPushToTalk(){d={status:"listening",startedAt:Date.now()},f()},stopPushToTalk(){d={status:"idle"},f()},isListening:()=>"listening"===d.status,isSpeaking:()=>"speaking"===d.status,cancelSpeaking(){},reset(){d={status:"idle"},f()}}),h=()=>g,i=a=>{g=a},j=()=>{try{g.cancelSpeaking()}catch{}},k=()=>({isSpeaking:()=>!1,cancelSpeaking(){}})},1548:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>n});var e=c(8732);c(2015),c(2768);var f=c(4954),g=c(6958),h=c(6612),i=c(8245),j=c(3620),k=c(5427),l=c(2677);c(4445),c(1914),c(7395);var m=a([f,g,h,k]);function n({Component:a,pageProps:b}){(0,h.n)(a=>a.setUser);let c=(0,h.n)(a=>a.user);return(0,e.jsx)(i.y,{children:(0,e.jsxs)(k.sl,{identity:{uid:c?.uid},children:[(0,e.jsx)(k.OP,{phase:"LFCB-10"}),(0,e.jsx)(l.ni,{children:(0,e.jsx)(j.A,{children:(0,e.jsx)(a,{...b})})})]})})}[f,g,h,k]=m.then?(await m)():m,d()}catch(a){d(a)}})},1556:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{e:()=>h});var e=c(2015),f=c(2432),g=a([f]);function h(){return(0,e.useContext)(f.Y)}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},1914:(a,b,c)=>{"use strict";c.d(b,{Q:()=>i});var d=c(750),e=c(5441),f=c(8789);let g=!1,h=[],i=()=>{if(g)return()=>j();g=!0;let a=()=>{let a,b,{truth:c,correlationId:g}=(a=(0,d.jD)().getState(),b=(0,e.QD)(),"error"===a.status?{truth:"error"}:"in_flight"===b.status?{truth:"in_flight",correlationId:b.inFlightCorrelationId}:"speaking"===a.status?{truth:"speaking"}:"thinking"===a.status?{truth:"thinking"}:"listening"===a.status?{truth:"listening"}:{truth:"idle"});(0,f.rs)(c,g)};a(),h.push((0,d.jD)().subscribe(()=>a())),h.push((0,e.NZ)(()=>a()));let b=setInterval(a,200);return h.push(()=>clearInterval(b)),()=>j()},j=()=>{if(g){for(let a of(g=!1,h))a();h=[]}}},2207:(a,b,c)=>{"use strict";c.d(b,{Pf:()=>g,QP:()=>h,ow:()=>i});let d="scing_obs_queue_v1";function e(){try{if("undefined"==typeof localStorage)return[];let a=localStorage.getItem(d);if(!a)return[];let b=JSON.parse(a);return Array.isArray(b)?b:[]}catch{return[]}}function f(a){try{if("undefined"==typeof localStorage)return;localStorage.setItem(d,JSON.stringify(a.slice(-500)))}catch{}}function g(a){let b=e();b.push(a),f(b)}function h(a=100){return e().slice(0,a)}function i(a){f(e().filter(b=>!a.includes(b.eventId)))}},2432:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{Y:()=>m,s:()=>n});var e=c(8732),f=c(2015),g=c(7352),h=c(2207),i=c(5452),j=c(1233),k=c(4954),l=a([j,k]);[j,k]=l.then?(await l)():l;let m=(0,f.createContext)({emit:()=>{},flush:async()=>({ok:!0,flushed:0})}),n=({children:a,identity:b})=>{let c=async a=>{if(!k.Ay)throw Error("FIREBASE_NOT_CONFIGURED");let b=(0,j.getFunctions)(k.Ay),c=(0,j.httpsCallable)(b,"writeObsEvent");await c({event:a})},d=(0,f.useMemo)(()=>({emit:a=>{let c=(0,g.F)({severity:a.severity,scope:a.scope,message:a.message,orgId:b?.orgId,uid:b?.uid,deviceId:b?.deviceId,inspectionId:a.inspectionId,engineId:a.engineId,phase:a.phase,correlationId:a.correlationId,error:a.error,meta:a.meta,tags:a.tags,offlineCaptured:"undefined"!=typeof navigator&&!navigator.onLine});(0,h.Pf)(c)},flush:async()=>{try{return await (0,i.V)(c,50)}catch{return{ok:!1,flushed:0}}}}),[b?.orgId,b?.uid,b?.deviceId]);return(0,e.jsx)(m.Provider,{value:d,children:a})};d()}catch(a){d(a)}})},2677:(a,b,c)=>{"use strict";c.d(b,{ni:()=>l});var d=c(8732),e=c(2015);let f=(0,e.createContext)(null);class g extends Error{constructor(a,b,c){super(b),this.code=a,this.data=c}}class h extends g{constructor(a="DEVICE_POLICY_DENIED",b){super("DEVICE_POLICY_DENIED",a,b)}}class i extends g{constructor(a="DEVICE_UNAVAILABLE",b){super("DEVICE_UNAVAILABLE",a,b)}}class j extends g{constructor(a="CAPTURE_FAILED",b){super("CAPTURE_FAILED",a,b)}}function k(a,b){let c=new Date().toISOString();return{captureId:a.requestId,requestId:a.requestId,correlationId:a.correlationId,orgId:a.orgId,uid:a.uid,deviceId:a.deviceId,inspectionId:a.inspectionId,engineId:a.engineId,deviceKind:a.deviceKind,captureKind:a.captureKind,capturedAt:c,status:b}}let l=({children:a})=>{let b=(0,e.useMemo)(()=>{var a;let b,c,d,e;return a={captureStore:{enqueue:a=>{let b=[];b.push(a)},listPending:()=>[],markDone:a=>{[].filter(b=>b.record.captureId!==a)}}},c=a?.registry??(b=[],{list:()=>[...b],register:a=>{let c=b.findIndex(b=>b.providerId===a.providerId);c>=0?b[c]=a:b.push(a)},findProviders:a=>b.filter(b=>b.capability.deviceKind===a.deviceKind&&(b.capability.captureKinds.includes(a.captureKind)||b.capability.captureKinds.includes("unknown")))}),d=new Map,e=a?.captureStore,{registry:c,registerProvider:(a,b)=>{d.set(a.providerId,a),c.register({providerId:a.providerId,capability:{deviceKind:b.deviceKind,captureKinds:b.captureKinds,label:b.label,requiresExternalHardware:b.requiresExternalHardware,requiresPhysicalControl:b.requiresPhysicalControl}})},capture:async(a,b)=>{var f;let g,l,m,n=(g=function(a){switch(a){case"LARI-VISION":default:return"vision";case"LARI-MAPPER":return"mapper";case"LARI-DOSE":return"dose";case"LARI-PRISM":return"prism";case"LARI-ECHO":return"echo"}}(b.engineId),l=b.requiresExternalHardware??("drone"===(f=b.deviceKind)||"spectrometer"===f||"sonar"===f),{allow:!!(m=a.entitlements({key:g,requiredStage:b.requiredStage,requiresExternalHardware:l,requiresPhysicalControl:b.requiresPhysicalControl})).allow,reason:m.reason,key:g,requiredStage:b.requiredStage});if(!n.allow){let a={...k(b,"rejected"),error:{code:"DEVICE_POLICY_DENIED",message:n.reason}};throw new h(n.reason,{record:a,policy:n})}let o=c.findProviders({deviceKind:b.deviceKind,captureKind:b.captureKind}).map(a=>d.get(a.providerId)).find(a=>!!a&&a.supports(b));if(!o){let a={...k(b,e?"queued":"rejected"),error:e?{code:"CAPTURE_QUEUED",message:"NO_PROVIDER_AVAILABLE"}:{code:"DEVICE_UNAVAILABLE",message:"NO_PROVIDER_AVAILABLE"}};if(e)return await e.enqueue({queuedAt:new Date().toISOString(),request:b,record:a}),{status:"queued",record:a};throw new i("NO_PROVIDER_AVAILABLE",{record:a})}try{let a=await o.capture(b),c={...k(b,"ok"),artifacts:a.artifacts};if("offline"===b.mode&&e)return await e.enqueue({queuedAt:new Date().toISOString(),request:b,record:c}),{status:"queued",record:c};return{status:"ok",record:c}}catch(c){let a={...k(b,"rejected"),error:{code:"CAPTURE_FAILED",message:c?.message??"CAPTURE_FAILED"}};throw new j(c?.message??"CAPTURE_FAILED",{record:a})}}}},[]);return(0,d.jsx)(f.Provider,{value:b,children:a})}},2768:()=>{},3620:(a,b,c)=>{"use strict";c.d(b,{A:()=>g});var d=c(8732),e=c(2015);let f=(0,e.createContext)({bus:null,setBus:()=>{}}),g=({children:a})=>{let[b,c]=(0,e.useState)(null),g=(0,e.useMemo)(()=>({bus:b,setBus:a=>c(a)}),[b]);return(0,d.jsx)(f.Provider,{value:g,children:a})}},4445:(a,b,c)=>{"use strict";c.d(b,{g:()=>o});var d=c(5329),e=c(6966),f=c(7057),g=c(5441),h=c(750),i=c(8789);let j=!1,k=0;function l(){try{e.ho()}catch{}}function m(){try{e.VN()}catch{}}async function n(a){l(),(0,f.Ux)(a);try{let b=await (0,g.fW)(a);(0,f.xp)(b.textOut,b.correlationId)}catch(c){let a=c?.message||"Unknown error",b=c instanceof g.lG?c.correlationId:void 0;(0,f.Qw)({message:a,correlationId:b})}}function o(){j||(j=!0,(0,d.B)(a=>{switch(a.type){case"toggle_panel":if(Date.now()-k<250)break;k=Date.now(),e.L$();break;case"open_panel":l();break;case"close_panel":m();break;case"open_radial_menu":case"close_radial_menu":break;case"status":case"help":n(a.type);break;case"reset":(0,h.WN)();try{(0,h.jD)().reset()}catch{}(0,g.Mw)(),(0,f.dR)(),(0,i.m)(),m();break;case"privacy_toggle_mic":case"privacy_toggle_cam":case"privacy_toggle_wearables":console.log("[avatar-intent] privacy toggle:",a.type);break;case"voice_ptt_start":(0,h.WN)();try{(0,h.jD)().startPushToTalk()}catch{}break;case"voice_ptt_stop":try{(0,h.jD)().stopPushToTalk()}catch{}break;default:console.log("[avatar-intent] unhandled:",a)}}))}},4954:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{let j;c.d(b,{Ay:()=>q,j2:()=>o,kA:()=>p,w9:()=>m});var e=c(8932),f=c(6958),g=c(4337),h=c(2537),i=a([e,f,g,h]);[e,f,g,h]=i.then?(await i)():i;let k={apiKey:"AIzaSyARLgSiDkfSaTrOWBlQ6FKbIi05Ny-gJmg",authDomain:"studio-3494288633-91d2b.firebaseapp.com",projectId:"studio-3494288633-91d2b",storageBucket:"studio-3494288633-91d2b.firebasestorage.app",messagingSenderId:"213538858905",appId:"1:213538858905:web:160e096c678e5464371508"},l=!!(k.apiKey&&k.authDomain&&k.projectId),m=l,n=(j=(0,e.getApps)()[0])||(l?(0,e.initializeApp)(k):null),o=null,p=null,q=n;d()}catch(a){d(a)}})},5329:(a,b,c)=>{"use strict";c.d(b,{B:()=>e,Q:()=>f});let d=new Set;function e(a){return d.add(a),()=>{d.delete(a)}}function f(a,b){let c={correlationId:"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`corr_${Date.now()}_${Math.random().toString(16).slice(2)}`,type:a,ts:Date.now(),meta:b};for(let a of d)try{a(c)}catch{}return c}},5427:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{OP:()=>g.O,sl:()=>e.s});var e=c(2432),f=c(1556),g=c(5502),h=a([e,f,g]);[e,f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},5441:(a,b,c)=>{"use strict";c.d(b,{Mw:()=>j,NZ:()=>h,QD:()=>i,fW:()=>k,lG:()=>d});class d extends Error{constructor(a){super(a.message),this.name="NeuralIngressError",this.code=a.code,this.correlationId=a.correlationId,this.status=a.status,this.cause=a.cause}}let e={status:"idle"},f=new Set,g=()=>{for(let a of f)a(e)},h=a=>(f.add(a),a(e),()=>f.delete(a)),i=()=>e,j=()=>{e={status:"idle"},g()},k=async(a,b)=>{let c=b?.correlationId??`neural_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,10)}`,f=b?.endpoint??"/api/scing/chat";e={status:"in_flight",inFlightCorrelationId:c},g();try{if("function"!=typeof fetch)throw new d({message:"fetch is not available in this environment",code:"fetch_unavailable",correlationId:c});let e=await fetch(f,{method:"POST",headers:{"content-type":"application/json","x-bane-identity":"local-dev","x-bane-capabilities":"bane:invoke",...b?.headers??{}},body:JSON.stringify({text:a,correlationId:c})});if(!e.ok)throw new d({message:`Neural ingress HTTP ${e.status}`,code:"http",correlationId:c,status:e.status});let g=await e.json();if(!g||"object"!=typeof g||!("textOut"in g)||"string"!=typeof g.textOut)throw new d({message:"Invalid response shape from neural ingress",code:"invalid_response",correlationId:c});let h=g.textOut;return{correlationId:c,textOut:h}}catch(a){if(a instanceof d)throw a;throw new d({message:"Neural ingress network error",code:"network",correlationId:c,cause:a})}finally{e={status:"idle"},g()}}},5452:(a,b,c)=>{"use strict";c.d(b,{V:()=>e});var d=c(2207);async function e(a,b=50){let c=(0,d.QP)(b);if(0===c.length)return{ok:!0,flushed:0};let f=[];for(let b of c)try{await a({...b,flushedAt:new Date().toISOString()}),f.push(b.eventId)}catch{break}return f.length&&(0,d.ow)(f),{ok:!0,flushed:f.length}}},5502:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{O:()=>h});var e=c(2015),f=c(1556),g=a([f]);f=(g.then?(await g)():g)[0];let h=({phase:a})=>{let b=(0,f.e)();return(0,e.useEffect)(()=>{let c=c=>{b.emit({severity:"critical",scope:"client",message:"Unhandled window error",phase:a,error:c.error??{name:"ErrorEvent",stack:String(c.message)},meta:{filename:c.filename,lineno:c.lineno,colno:c.colno},tags:["window.onerror"]})},d=c=>{b.emit({severity:"critical",scope:"client",message:"Unhandled promise rejection",phase:a,error:c.reason??{name:"UnhandledRejection",stack:String(c.reason)},tags:["unhandledrejection"]})};window.addEventListener("error",c),window.addEventListener("unhandledrejection",d);let e=window.setInterval(async()=>{navigator.onLine&&await b.flush()},2500);return()=>{window.clearInterval(e),window.removeEventListener("error",c),window.removeEventListener("unhandledrejection",d)}},[b,a]),null};d()}catch(a){d(a)}})},6612:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{n:()=>g});var e=c(2177),f=a([e]);e=(f.then?(await f)():f)[0];let g=(0,e.create)(a=>({user:null,loading:!0,setUser:b=>a({user:b,loading:!1}),setLoading:b=>a({loading:b})}));d()}catch(a){d(a)}})},6966:(a,b,c)=>{"use strict";c.d(b,{B1:()=>g,Gu:()=>f,L$:()=>k,VN:()=>j,ho:()=>i});let d={isOpen:!1},e=new Set;function f(){return d}function g(a){return e.add(a),()=>e.delete(a)}function h(a){for(let b of(d=a,e))try{b(d)}catch{}}function i(){d.isOpen||h({...d,isOpen:!0})}function j(){d.isOpen&&h({...d,isOpen:!1})}function k(){h({...d,isOpen:!d.isOpen})}},7057:(a,b,c)=>{"use strict";c.d(b,{Qw:()=>k,Ux:()=>i,Yl:()=>h,dR:()=>l,p8:()=>g,xp:()=>j});let d={},e=new Set,f=()=>{for(let a of e)a(d)},g=()=>d,h=a=>(e.add(a),a(d),()=>e.delete(a)),i=(a,b)=>{d={...d,lastUserText:a,lastCorrelationId:b??d.lastCorrelationId,error:void 0,lastUpdatedAt:Date.now()},f()},j=(a,b)=>{d={...d,lastAssistantText:a,lastCorrelationId:b??d.lastCorrelationId,error:void 0,lastUpdatedAt:Date.now()},f()},k=a=>{d={...d,error:a,lastUpdatedAt:Date.now()},f()},l=()=>{d={},f()}},7352:(a,b,c)=>{"use strict";c.d(b,{F:()=>e});let d=new Set(["password","pass","token","idToken","accessToken","refreshToken","apiKey","secret","privateKey","authorization"]);function e(a){var b;let c=a.error;return{eventId:function(a="obs"){let b=Math.random().toString(16).slice(2);return`${a}_${Date.now()}_${b}`}("obs"),createdAt:new Date().toISOString(),orgId:a.orgId,uid:a.uid,deviceId:a.deviceId,severity:a.severity,scope:a.scope,correlationId:a.correlationId??function(a="corr"){let b=Math.random().toString(16).slice(2);return`${a}_${Date.now()}_${b}`}("corr"),inspectionId:a.inspectionId,engineId:a.engineId,phase:a.phase,message:a.message,errorName:c?.name,errorStack:(b=c?.stack)?b.replace(/\?.*$/gm,"?[REDACTED_QS]"):b,tags:a.tags??[],meta:function a(b){if(null==b)return b;if("string"==typeof b)return b.replace(/Bearer\s+[A-Za-z0-9\-\._~\+\/]+=*/g,"Bearer [REDACTED]");if(Array.isArray(b))return b.map(a);if("object"==typeof b){let c={};for(let[e,f]of Object.entries(b))d.has(e)?c[e]="[REDACTED]":c[e]=a(f);return c}return b}(a.meta??null),offlineCaptured:a.offlineCaptured??!1}}},7395:(a,b,c)=>{"use strict";c.d(b,{z:()=>d});let d=()=>()=>{}},8245:(a,b,c)=>{"use strict";c.d(b,{y:()=>i});var d=c(8732),e=c(2015);let f={engines:{},hud:{channels:{}},workflows:{},reports:{}},g=(0,e.createContext)({state:f,dispatch:()=>{}});function h(a,b){switch(b.type){case"ENGINE_STATUS":return{...a,engines:{...a.engines,[b.engineId]:b.payload}};case"HUD_UPDATE":return{...a,hud:{channels:{...a.hud.channels,[b.channelId]:b.payload}}};default:return a}}let i=({children:a})=>{let[b,c]=(0,e.useReducer)(h,f);return(0,d.jsx)(g.Provider,{value:{state:b,dispatch:c},children:a})}},8789:(a,b,c)=>{"use strict";c.d(b,{DF:()=>i,Ov:()=>h,cb:()=>j,m:()=>l,rs:()=>k});let d=a=>Math.max(0,Math.min(1,a)),e={truth:"idle",truthSince:Date.now(),modifiers:{hover:0,pressed:0,attn:0}},f=new Set,g=()=>{for(let a of f)a(e)},h=()=>e,i=a=>(f.add(a),a(e),()=>f.delete(a)),j=a=>{e={...e,modifiers:{hover:d(a.hover??e.modifiers.hover),pressed:d(a.pressed??e.modifiers.pressed),attn:d(a.attn??e.modifiers.attn)}},g()},k=(a,b)=>{(e.truth!==a||e.lastCorrelationId!==b)&&(e={...e,truth:a,truthSince:Date.now(),lastCorrelationId:b??e.lastCorrelationId},g())},l=()=>{e={truth:"idle",truthSince:Date.now(),modifiers:{hover:0,pressed:0,attn:0}},g()}}};