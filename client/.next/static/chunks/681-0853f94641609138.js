"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4681:(e,t,r)=>{r.d(t,{P:()=>I});var n=r(7876),s=r(4232),a=r(8230),i=r.n(a),o=r(6846),l=r(8258),c=r(2019),d=r(9099),u=r(5364);function p(e,t){if("string"!=typeof e)return t;let r=e.trim().toLowerCase();return"true"===r||"1"===r||"yes"===r||"false"!==r&&"0"!==r&&"no"!==r&&t}function x(){let e=window;return e.SpeechRecognition||e.webkitSpeechRecognition||null}function g(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`corr_${Date.now()}_${Math.random().toString(16).slice(2)}`}var h=r(1799),m=r(1332);function f(){let{user:e}=(0,o.n)(),t=function(){let e=(0,d.useRouter)(),{user:t}=(0,o.n)(),r=(0,s.useMemo)(()=>{let e,t;return e=p(u.env.NEXT_PUBLIC_VOICE_ENABLED,!1),{enabled:e,mode:"hands_free"===(t=u.env.NEXT_PUBLIC_VOICE_MODE)||"push_to_talk"===t?t:"push_to_talk",locale:u.env.NEXT_PUBLIC_VOICE_LOCALE||"en-US",vadEnabled:p(u.env.NEXT_PUBLIC_VOICE_VAD,!0),sttProvider:u.env.VOICE_STT_PROVIDER||"local-webspeech",ttsProvider:u.env.VOICE_TTS_PROVIDER||"none"}},[]),n=r.enabled,[a,i]=(0,s.useState)("idle"),[l,c]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[y,b]=(0,s.useState)(null),[w,k]=(0,s.useState)(null),j=(0,s.useRef)(null),E=(0,s.useMemo)(()=>({"x-bane-identity":t?.uid||"local-dev","x-bane-capabilities":"bane:invoke"}),[t?.uid]);(0,s.useEffect)(()=>{var t,s;let a,o,l,d,u,p,h,f,y,w,S,_,C,T,I,N,D;if(!n)return;let R=(t={locale:r.locale,callbacks:{onInterim:e=>R.__voiceMvpHooks?.onInterim?.(e),onFinal:e=>R.__voiceMvpHooks?.onFinal?.(e),onError:e=>R.__voiceMvpHooks?.onError?.(e)}},a=null,{isSupported:()=>!!x(),start:()=>{let e=(()=>{let e=x();if(!e)return null;let r=new e;return r.continuous=!1,r.interimResults=!0,r.lang=t.locale,r.onstart=()=>t.callbacks.onStart?.(),r.onend=()=>t.callbacks.onEnd?.(),r.onerror=e=>{let r,n;t.callbacks.onError?.((r="string"==typeof e?.error?e.error:"",n="string"==typeof e?.message?e.message:"Speech recognition failed.","not-allowed"===r||"service-not-allowed"===r?{code:"MIC_DENIED",message:n,recoverable:!0}:"no-speech"===r||"audio-capture"===r?{code:"NO_AUDIO",message:n,recoverable:!0}:"network"===r?{code:"NETWORK",message:n,recoverable:!0}:r?{code:"STT_FAILED",message:`${r}: ${n}`,recoverable:!0}:{code:"UNKNOWN",message:n,recoverable:!0}))},r.onresult=e=>{let r=e?.results,n="number"==typeof e?.resultIndex?e.resultIndex:0;if(r)for(let e=n;e<r.length;e++){let n=r[e],s=n?.[0],a="string"==typeof s?.transcript?s.transcript:"",i="number"==typeof s?.confidence?s.confidence:void 0;n?.isFinal?a.trim()&&t.callbacks.onFinal?.(a.trim(),i):t.callbacks.onInterim?.(a)}},a=r,r})();if(!e)return void t.callbacks.onError?.({code:"STT_FAILED",message:"SpeechRecognition is not supported in this browser.",recoverable:!1});try{e.start()}catch(e){t.callbacks.onError?.({code:"STT_FAILED",message:e?.message||"Failed to start SpeechRecognition.",recoverable:!0})}},stop:()=>{try{a?.stop()}catch{}},abort:()=>{try{a?.abort()}catch{}}}),O=(o="idle",l="",d="",u="",p=null,h=null,f=!1,y=null,w=!1,S="number"==typeof(s={stt:R,submitToNeural:async({correlationId:e,text:t})=>{let r=await fetch("/api/scing/chat",{method:"POST",headers:{"content-type":"application/json",...E},body:JSON.stringify({correlationId:e,text:t})});if(!r.ok){let e=await r.json().catch(()=>null);throw Error(e?.message||e?.error||`HTTP ${r.status}`)}return{textOut:(await r.json()).textOut}},onChange:e=>{i(e.state),c(e.transcriptInterim),m(e.transcriptFinal),v(e.lastResponse),b(e.lastError),k(e.correlationId)},timeoutMs:12e3}).timeoutMs?s.timeoutMs:12e3,_=()=>({state:o,transcriptInterim:l,transcriptFinal:d,lastResponse:u,lastError:p,correlationId:h}),C=()=>{y&&clearTimeout(y),y=null},T=e=>{o=e,s.onChange(_())},I=e=>{C(),p=e,T("error")},N=()=>{C(),l="",d="",u="",p=null,h=null,f=!1,T("idle")},D=async e=>{if(w)return;f=!0,C(),d=e,l="",s.onChange(_());let t=h??g();T("thinking");try{u=(await s.submitToNeural({correlationId:t,text:e})).textOut,T("idle")}catch(e){I({code:"NETWORK",message:e?.message||"Failed to submit to Neural.",recoverable:!0})}},s.stt.__voiceMvpHooks={onInterim:e=>{w||(l=e,s.onChange(_()))},onFinal:D,onError:e=>{w||I(e)}},s.onChange(_()),{snapshot:_,pushToTalkDown:()=>{if(!w&&"listening"!==o&&"transcribing"!==o&&"thinking"!==o){if("error"===o&&N(),!s.stt.isSupported())return void I({code:"STT_FAILED",message:"SpeechRecognition not supported.",recoverable:!1});h=g(),l="",d="",p=null,f=!1,C(),y=setTimeout(()=>{w||f||(s.stt.abort(),I({code:"NO_AUDIO",message:"No final transcript received.",recoverable:!0}))},S),T("listening"),s.stt.start()}},pushToTalkUp:()=>{w||"listening"===o&&(T("transcribing"),s.stt.stop())},reset:N,dispose:()=>{w=!0,C(),s.stt.abort()}});j.current=O;let F=()=>O.dispose();return e.events.on("routeChangeStart",F),()=>{e.events.off("routeChangeStart",F),O.dispose(),j.current=null}},[r.locale,n,E,e.events]);let S=(0,s.useCallback)(()=>j.current?.pushToTalkDown(),[]),_=(0,s.useCallback)(()=>j.current?.pushToTalkUp(),[]);return(0,s.useEffect)(()=>{if(!n)return;let e=e=>{if(!e)return!1;let t=e.tagName?.toLowerCase();return"input"===t||"textarea"===t||e.isContentEditable},t=t=>{"Space"!==t.code||t.repeat||e(t.target)||e(document.activeElement)||(t.preventDefault(),S())},r=t=>{"Space"!==t.code||e(t.target)||e(document.activeElement)||(t.preventDefault(),_())};return window.addEventListener("keydown",t),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",r)}},[n,S,_]),{enabled:n,state:a,transcriptInterim:l,transcriptFinal:h,lastResponse:f,lastError:y,correlationId:w,pttDown:S,pttUp:_}}(),r=t.enabled,a=t.pttDown,f=t.pttUp,v=(0,s.useRef)({status:"idle"}),y=(0,s.useRef)(new Set),b=(0,s.useRef)((0,h.td)()),w=(0,s.useRef)({transcriptFinal:"",lastResponse:"",lastErrorCode:"",correlationId:""});(0,s.useEffect)(()=>((0,h.hM)({getState:()=>v.current,subscribe:e=>(y.current.add(e),e(v.current),()=>y.current.delete(e)),startPushToTalk:()=>{if(r){try{b.current.isSpeaking()&&b.current.cancelSpeaking()}catch{}a()}},stopPushToTalk:()=>{r&&f()},isListening:()=>"listening"===v.current.status,isSpeaking:()=>{try{return b.current.isSpeaking()}catch{return!1}},cancelSpeaking:()=>{try{b.current.cancelSpeaking()}catch{}},reset:()=>{try{b.current.cancelSpeaking()}catch{}f()}}),()=>{(0,h.hM)({getState:()=>({status:"idle"}),subscribe:()=>()=>void 0,startPushToTalk:()=>void 0,stopPushToTalk:()=>void 0,isListening:()=>!1,isSpeaking:()=>!1,cancelSpeaking:()=>void 0,reset:()=>void 0})}),[r,a,f]),(0,s.useEffect)(()=>{let e,r=v.current,n=e=>r.status===e&&"startedAt"in r?r.startedAt:Date.now();if(e=t.enabled?"listening"===t.state?{status:"listening",startedAt:n("listening")}:"thinking"===t.state||"transcribing"===t.state?{status:"thinking",startedAt:n("thinking")}:"error"===t.state?{status:"error",message:t.lastError?.message||"Voice error",at:Date.now()}:{status:"idle"}:{status:"idle"},r.status!==e.status||"error"===r.status&&"error"===e.status&&r.message!==e.message)for(let t of(v.current=e,y.current))t(e)},[t.enabled,t.state,t.lastError?.message]),(0,s.useEffect)(()=>{let e=w.current;t.correlationId!==e.correlationId&&(e.correlationId=t.correlationId),t.transcriptFinal&&t.transcriptFinal!==e.transcriptFinal&&(e.transcriptFinal=t.transcriptFinal,(0,m.Ux)(t.transcriptFinal,t.correlationId??void 0)),t.lastResponse&&t.lastResponse!==e.lastResponse&&(e.lastResponse=t.lastResponse,(0,m.xp)(t.lastResponse,t.correlationId??void 0));let r=t.lastError?.code??null;r&&r!==e.lastErrorCode&&(e.lastErrorCode=r,(0,m.Qw)({message:t.lastError?.message||r,correlationId:t.correlationId??void 0}))},[t.correlationId,t.lastError?.code,t.lastError?.message,t.lastResponse,t.transcriptFinal]);let k=async()=>{try{if(!c.j2)return;await (0,l.CI)(c.j2)}catch(e){console.error("Sign out error:",e)}};return(0,n.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between h-16",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(i(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"ScingOS"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[t.enabled?(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("div",{className:"hidden sm:flex flex-col items-end text-xs leading-tight",children:[(0,n.jsxs)("div",{className:"text-gray-500",children:[(0,n.jsx)("span",{className:"font-semibold",children:"VOICE:"})," ",t.state.toUpperCase()]}),t.lastError?(0,n.jsx)("div",{className:"text-red-600 truncate max-w-xs",children:t.lastError.code}):t.transcriptFinal?(0,n.jsxs)("div",{className:"text-gray-600 truncate max-w-xs",children:['"',t.transcriptFinal,'"']}):t.transcriptInterim?(0,n.jsx)("div",{className:"text-gray-600 truncate max-w-xs",children:t.transcriptInterim}):t.lastResponse?(0,n.jsx)("div",{className:"text-gray-600 truncate max-w-xs",children:t.lastResponse}):null]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-gray-700 text-xs font-semibold",children:["VOICE: ",t.state.toUpperCase()]}),(0,n.jsx)("button",{onMouseDown:t.pttDown,onMouseUp:t.pttUp,onMouseLeave:t.pttUp,className:"px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition",title:"Hold to talk (Space also works)",type:"button",children:"Hold to Talk"})]})]}):null,e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{href:"/dashboard",className:"text-gray-700 hover:text-primary-600 transition",children:"Dashboard"}),(0,n.jsx)("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 transition",children:"Sign Out"})]}):(0,n.jsx)(i(),{href:"/auth/signin",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition",children:"Sign In"})]})]})})})}function v(){return(0,n.jsx)("footer",{className:"bg-gray-50 border-t border-gray-200",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,n.jsxs)("p",{children:["Built with Bona Fide Intelligence | \xa9 ",new Date().getFullYear()," Inspection Systems Direct LLC"]})})})})}var y=r(7596);function b(e){let t=(0,s.useRef)(null),r=(0,s.useMemo)(()=>({position:"fixed",left:Math.max(8,e.x),top:Math.max(8,e.y),zIndex:60,background:"white",border:"1px solid rgba(0,0,0,0.12)",borderRadius:12,padding:6,minWidth:180,boxShadow:"0 8px 24px rgba(0,0,0,0.12)"}),[e.x,e.y]);return((0,s.useEffect)(()=>{if(!e.isOpen)return;let r=t=>{"Escape"===t.key&&(t.preventDefault(),e.onClose(),(0,y.Q)("close_radial_menu"))},n=r=>{let n=t.current;!n||n.contains(r.target)||(e.onClose(),(0,y.Q)("close_radial_menu"))};return window.addEventListener("keydown",r),window.addEventListener("pointerdown",n),()=>{window.removeEventListener("keydown",r),window.removeEventListener("pointerdown",n)}},[e]),e.isOpen)?(0,n.jsxs)("div",{ref:t,style:r,onContextMenu:e=>e.preventDefault(),children:[(0,n.jsx)(w,{label:"Talk",onPointerDown:()=>(0,y.Q)("voice_ptt_start"),onPointerUp:()=>(0,y.Q)("voice_ptt_stop")}),(0,n.jsx)(w,{label:"Open Panel",onClick:()=>(0,y.Q)("open_panel")}),(0,n.jsx)(w,{label:"Status",onClick:()=>(0,y.Q)("status")}),(0,n.jsx)(w,{label:"Reset",onClick:()=>(0,y.Q)("reset")}),(0,n.jsx)("div",{style:{height:1,margin:"6px 4px",background:"rgba(0,0,0,0.08)"}}),(0,n.jsx)(w,{label:"Mic Toggle",onClick:()=>(0,y.Q)("privacy_toggle_mic")}),(0,n.jsx)(w,{label:"Camera Toggle",onClick:()=>(0,y.Q)("privacy_toggle_cam")}),(0,n.jsx)(w,{label:"Wearables Toggle",onClick:()=>(0,y.Q)("privacy_toggle_wearables")})]}):null}function w(e){return(0,n.jsx)("button",{type:"button",style:{width:"100%",textAlign:"left",padding:"10px 10px",borderRadius:10},onClick:e.onClick,onPointerDown:e.onPointerDown,onPointerUp:e.onPointerUp,children:e.label})}var k=r(2360);function j(e){let t=(0,s.useRef)(null),[r,a]=(0,s.useState)(!1),[i,o]=(0,s.useState)(0),[l,c]=(0,s.useState)(0),[d,u]=(0,s.useState)(!1),[p,x]=(0,s.useState)({x:0,y:0}),g=(0,s.useMemo)(()=>({"--scing-hover":i,"--scing-pressed":+!!r,"--scing-attn":l,"--srt-hover":i,"--srt-pressed":+!!r,"--srt-attn":l}),[i,r,l]);(0,s.useEffect)(()=>{(0,k.cb)({hover:i,pressed:+!!r,attn:l})},[i,r,l]),(0,s.useEffect)(()=>(0,y.B)(e=>{"close_radial_menu"===e.type&&u(!1),"reset"===e.type&&u(!1)}),[]);let h=(0,s.useCallback)((e,r)=>{var n;let s=t.current;if(!s)return 0;let a=s.getBoundingClientRect(),i=a.left+a.width/2,o=a.top+a.height/2,l=e-i,c=r-o;return!Number.isFinite(n=1-Math.sqrt(l*l+c*c)/Math.max(1,Math.max(a.width,a.height)/2))||n<0?0:n>1?1:n},[]),m=(0,s.useCallback)(()=>{c(1),window.setTimeout(()=>c(0),220),(0,y.Q)("toggle_panel",{hoverProximity:i,pressed:r,attentionPulse:1})},[i,r]),f=(0,s.useCallback)(e=>{a(!0);try{e.currentTarget.setPointerCapture?.(e.pointerId)}catch{}(0,y.Q)("voice_ptt_start",{pointerType:e.pointerType,x:e.clientX,y:e.clientY,hoverProximity:i,pressed:!0})},[i]),v=(0,s.useCallback)(e=>{a(!1);try{e.currentTarget.releasePointerCapture?.(e.pointerId)}catch{}(0,y.Q)("voice_ptt_stop",{pointerType:e.pointerType,x:e.clientX,y:e.clientY,hoverProximity:i,pressed:!1})},[i]),w=(0,s.useCallback)(e=>{a(!1);try{e.currentTarget.releasePointerCapture?.(e.pointerId)}catch{}(0,y.Q)("voice_ptt_stop",{pointerType:e.pointerType,x:e.clientX,y:e.clientY,hoverProximity:i,pressed:!1,cancelled:!0})},[i]),j=(0,s.useCallback)(e=>{o(h(e.clientX,e.clientY))},[h]),E=(0,s.useCallback)(e=>{e.preventDefault(),u(!0),x({x:e.clientX,y:e.clientY}),(0,y.Q)("open_radial_menu",{x:e.clientX,y:e.clientY})},[]),S=(0,s.useCallback)(()=>{u(!1)},[]),_=(0,s.useCallback)(e=>{if(" "===e.key){e.preventDefault(),(0,y.Q)("voice_ptt_start",{hoverProximity:i,pressed:r});return}if("Enter"===e.key){e.preventDefault(),(0,y.Q)("toggle_panel",{hoverProximity:i,pressed:r});return}if("Escape"===e.key){e.preventDefault(),(0,y.Q)("close_panel"),S(),(0,y.Q)("close_radial_menu");return}},[S,i,r]),C=(0,s.useCallback)(e=>{" "===e.key&&(e.preventDefault(),(0,y.Q)("voice_ptt_stop",{hoverProximity:i,pressed:!1}))},[i]);return(0,n.jsxs)("div",{ref:t,role:"button",tabIndex:0,"aria-label":"Scing",className:e.className,style:{cursor:"pointer",userSelect:"none",...g},onClick:m,onPointerDown:f,onPointerUp:v,onPointerCancel:w,onPointerMove:j,onContextMenu:E,onKeyDown:_,onKeyUp:C,children:[e.children,(0,n.jsx)(b,{isOpen:d,x:p.x,y:p.y,onClose:S})]})}var E=r(3835),S=r(4782);function _(){let[e,t]=(0,s.useState)({isOpen:E.Gu().isOpen}),[r,a]=(0,s.useState)(""),[i,o]=(0,s.useState)((0,m.p8)()),[l,c]=(0,s.useState)((0,k.Ov)());(0,s.useEffect)(()=>E.B1(e=>t({isOpen:e.isOpen})),[]),(0,s.useEffect)(()=>(0,m.Yl)(o),[]),(0,s.useEffect)(()=>(0,k.DF)(c),[]),(0,s.useEffect)(()=>{if(!e.isOpen)return;let t=e=>{"Escape"===e.key&&(e.preventDefault(),E.VN())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e.isOpen]);let d=async e=>{let t=e.trim();if(t){(0,m.Ux)(t);try{let e=await (0,S.fW)(t);(0,m.xp)(e.textOut,e.correlationId)}catch(r){let e=r?.message||"Failed to send.",t=r instanceof S.lG?r.correlationId:void 0;(0,m.Qw)({message:e,correlationId:t})}}},u=async()=>{a(""),await d(r)};return e.isOpen?(0,n.jsxs)("div",{role:"dialog","aria-label":"Scing panel",style:{position:"fixed",top:0,right:0,height:"100vh",width:380,maxWidth:"92vw",background:"white",borderLeft:"1px solid rgba(0,0,0,0.08)",zIndex:50,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:12,borderBottom:"1px solid rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("div",{style:{fontWeight:800},children:"Scing"}),(0,n.jsx)("button",{type:"button",onClick:()=>E.VN(),style:{padding:"6px 10px"},children:"Close"})]}),(0,n.jsxs)("div",{style:{padding:12,display:"grid",gap:10,overflow:"auto"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:12,fontWeight:800},children:"SRT"}),(0,n.jsxs)("div",{style:{marginTop:6,fontSize:13},children:[(0,n.jsxs)("div",{children:["truth: ",l.truth]}),(0,n.jsxs)("div",{style:{opacity:.7},children:["corr: ",l.lastCorrelationId??i.lastCorrelationId??"—"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:12,fontWeight:800},children:"Transcript"}),(0,n.jsx)("div",{style:{marginTop:6,fontSize:13,whiteSpace:"pre-wrap"},children:i.lastUserText?i.lastUserText:(0,n.jsx)("span",{style:{opacity:.6},children:"—"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:12,fontWeight:800},children:"Response"}),(0,n.jsx)("div",{style:{marginTop:6,fontSize:13,whiteSpace:"pre-wrap"},children:i.error?(0,n.jsx)("span",{style:{fontWeight:700},children:i.error.message}):i.lastAssistantText?i.lastAssistantText:(0,n.jsx)("span",{style:{opacity:.6},children:"—"})})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,n.jsx)("button",{type:"button",onClick:()=>(0,y.Q)("status"),style:{padding:"6px 10px"},children:"Status"}),(0,n.jsx)("button",{type:"button",onClick:()=>(0,y.Q)("help"),style:{padding:"6px 10px"},children:"Help"}),(0,n.jsx)("button",{type:"button",onClick:()=>(0,y.Q)("reset"),style:{padding:"6px 10px"},children:"Reset"})]})]}),(0,n.jsxs)("div",{style:{padding:12,borderTop:"1px solid rgba(0,0,0,0.08)",display:"grid",gap:8},children:[(0,n.jsx)("input",{value:r,onChange:e=>a(e.target.value),placeholder:"Type…",style:{padding:"10px 12px",border:"1px solid rgba(0,0,0,0.18)",borderRadius:10}}),(0,n.jsx)("button",{type:"button",onClick:u,style:{padding:"10px 12px",borderRadius:10},children:"Send"})]})]}):null}var C=r(5364);let T=()=>{let e=void 0!==C&&"true"===C.env.NEXT_PUBLIC_SRT_DEBUG,[t,r]=(0,s.useState)((0,k.Ov)());return((0,s.useEffect)(()=>{if(e)return(0,k.DF)(e=>r(e))},[e]),e)?(0,n.jsxs)("div",{style:{position:"fixed",left:12,bottom:12,zIndex:9999,background:"rgba(0,0,0,0.7)",color:"white",padding:10,borderRadius:8,fontSize:12,maxWidth:360},children:[(0,n.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"SRT Debug"}),(0,n.jsxs)("div",{children:["truth: ",t.truth]}),(0,n.jsxs)("div",{children:["mods: h=",t.modifiers.hover.toFixed(2)," p=",t.modifiers.pressed.toFixed(2)," a=",t.modifiers.attn.toFixed(2)]}),(0,n.jsxs)("div",{children:["corr: ",t.lastCorrelationId??"-"]})]}):null};function I({children:e}){let[t,r]=(0,s.useState)((0,k.Ov)());(0,s.useEffect)(()=>(0,k.DF)(r),[]);let a=(0,s.useMemo)(()=>{switch(t.truth){case"idle":default:return 0;case"listening":return .35;case"thinking":case"in_flight":return .55;case"speaking":return .75;case"error":return .25}},[t.truth]);return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,n.jsx)(f,{}),(0,n.jsx)("main",{className:"flex-1",children:e}),(0,n.jsx)(v,{}),(0,n.jsx)(_,{}),(0,n.jsx)(T,{}),(0,n.jsx)("div",{style:{position:"fixed",right:16,bottom:16,zIndex:40},children:(0,n.jsx)(j,{className:"select-none",children:(0,n.jsx)("div",{className:"flex items-center justify-center rounded-full bg-primary-600 text-white font-semibold",style:{width:56,height:56,"--srt-truth":a,transform:"scale(calc(1 + (var(--scing-hover) * 0.04) + (var(--scing-pressed) * 0.02)))",filter:"brightness(calc(1 + (var(--scing-attn) * 0.12) + (var(--srt-truth) * 0.08)))",transition:"transform 120ms ease, filter 120ms ease"},title:"Scing",children:"S"})})})]})}}}]);