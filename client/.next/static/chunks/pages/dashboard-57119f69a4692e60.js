(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{535:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var i=r(7876),a=r(4232),t=r(7328),l=r.n(t),n=r(9099),d=r(4681),c=r(6846),o=r(2009),m=r(2019);function x(){let e=(0,n.useRouter)(),{user:s,loading:r}=(0,c.n)(),[t,x]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{r||s||e.push("/auth/signin")},[s,r,e]),(0,a.useEffect)(()=>{s&&g()},[s]);let g=async()=>{if(s){if(!m.kA){console.error("Firestore is not configured (missing/invalid Firebase config)."),u(!1);return}try{let e=(0,o.P)((0,o.rJ)(m.kA,"sessions"),(0,o._M)("user_id","==",s.uid),(0,o.My)("last_activity","desc"),(0,o.AB)(5)),r=(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));x(r)}catch(e){console.error("Error fetching sessions:",e)}finally{u(!1)}}};return r||!s?(0,i.jsx)(d.P,{children:(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"Dashboard - ScingOS"})}),(0,i.jsx)(d.P,{children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,i.jsxs)("p",{className:"mt-2 text-gray-600",children:["Welcome back, ",s.email]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[(0,i.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"}),(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsx)("button",{className:"w-full text-left px-4 py-2 bg-primary-50 text-primary-700 rounded-lg hover:bg-primary-100 transition",children:"Start New Session"}),(0,i.jsx)("button",{className:"w-full text-left px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition",children:"View Inspections"}),(0,i.jsx)("button",{className:"w-full text-left px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition",children:"Generate Report"})]})]})}),(0,i.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg col-span-2",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Sessions"}),h?(0,i.jsx)("div",{className:"mt-4 flex justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):t.length>0?(0,i.jsx)("div",{className:"mt-4 space-y-3",children:t.map(e=>(0,i.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,i.jsxs)("p",{className:"text-sm font-medium",children:["Session ",e.id.slice(0,8)]})},e.id))}):(0,i.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"No recent sessions"})]})})]})]})})]})}},7580:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(535)}])}},e=>{e.O(0,[305,681,636,593,792],()=>e(e.s=7580)),_N_E=e.O()}]);