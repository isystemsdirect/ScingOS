(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{2318:(s,e,i)=>{"use strict";i.d(e,{Qb:()=>a,DV:()=>l});var n=i(2009);let t=i(2019).kA;function l(){return(0,n.rJ)(t,"sessions")}function a(s){return(0,n.rJ)(t,"sessions",s,"messages")}},5115:(s,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var n=i(7876),t=i(8230),l=i.n(t),a=i(9099),c=i(4232),d=i(2009),r=i(6543),o=i(2019),u=i(6846),g=i(2318);function h(){let s=(0,a.useRouter)(),{user:e,loading:i}=(0,u.n)(),[t,h]=(0,c.useState)([]),[x,f]=(0,c.useState)(!1),[m,y]=(0,c.useState)(null),j=(0,c.useMemo)(()=>!!(o.w9&&o.kA&&e),[o.w9,e]),v=(0,c.useCallback)(async()=>{if(j&&o.kA&&e){f(!0),y(null);try{let s=(0,d.P)((0,g.DV)(),(0,d._M)("user_id","==",e.uid),(0,d.My)("last_activity","desc"),(0,d.AB)(25)),i=(await (0,d.GG)(s)).docs.map(s=>({id:s.id,...s.data()}));h(i)}catch(s){y(s?.message||"Failed to load sessions.")}finally{f(!1)}}},[j,e]);(0,c.useEffect)(()=>{j&&v()},[j,v]);let p=(0,c.useCallback)(async()=>{if(o.kA&&e){y(null);try{let i=await (0,d.gS)((0,g.DV)(),{user_id:e.uid,title:null,started_at:(0,d.O5)(),last_activity:(0,d.O5)()});s.push(`/sessions/${i.id}`)}catch(s){y(s?.message||"Failed to create session.")}}},[s,e]);return(0,n.jsx)(r.A,{title:"Sessions",subtitle:"Console, transcripts, and message streams.",children:o.w9?i?(0,n.jsx)("div",{className:"scing-card",children:(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12},children:"Loading…"})}):e?(0,n.jsxs)("div",{style:{display:"grid",gap:14},children:[(0,n.jsxs)("div",{className:"scing-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:800},children:"Session Center"}),(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12,marginTop:6},children:"Your most recent sessions (Firestore)."})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[(0,n.jsx)("button",{className:"scing-btn",onClick:v,disabled:x,children:"Refresh"}),(0,n.jsx)("button",{className:"scing-btn scing-btn-primary",onClick:p,children:"New Session"})]})]}),m?(0,n.jsxs)("div",{className:"scing-card",style:{borderColor:"rgba(255,46,122,0.35)"},children:[(0,n.jsx)("div",{style:{fontSize:12,fontWeight:700},children:"Error"}),(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12,marginTop:6},children:m})]}):null,(0,n.jsx)("div",{className:"scing-card",children:x?(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12},children:"Loading sessions…"}):0===t.length?(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12},children:"No sessions yet."}):(0,n.jsx)("div",{style:{display:"grid",gap:10},children:t.map(s=>(0,n.jsx)(l(),{href:`/sessions/${s.id}`,className:"scing-surface",style:{padding:12,borderRadius:14,border:"1px solid var(--stroke)"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[(0,n.jsx)("div",{style:{fontWeight:700,fontSize:13},children:s.title?s.title:`Session ${s.id.slice(0,8)}`}),(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12},children:"Open"})]})},s.id))})})]}):(0,n.jsxs)("div",{className:"scing-card",children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:800},children:"Sign in required"}),(0,n.jsxs)("div",{className:"scing-subtle",style:{fontSize:12,marginTop:6},children:[(0,n.jsx)(l(),{href:"/auth/signin",children:"Sign in"})," to view and create sessions."]})]}):(0,n.jsxs)("div",{className:"scing-card",children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:800},children:"Bootstrap Mode"}),(0,n.jsx)("div",{className:"scing-subtle",style:{fontSize:12,marginTop:6},children:"Firebase is not configured. Configure NEXT_PUBLIC_FIREBASE_* env vars to enable auth + persistence."})]})})}},6543:(s,e,i)=>{"use strict";i.d(e,{A:()=>c});var n=i(7876),t=i(7328),l=i.n(t),a=i(4681);function c({title:s,subtitle:e,children:i}){let t=s?`${s} - ScingOS`:"ScingOS";return(0,n.jsxs)(a.P,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:t})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[s?(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:s}),e?(0,n.jsx)("p",{className:"mt-2 text-gray-600",children:e}):null]}):null,i]})]})}},7425:(s,e,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions",function(){return i(5115)}])}},s=>{s.O(0,[305,681,636,593,792],()=>s(s.s=7425)),_N_E=s.O()}]);