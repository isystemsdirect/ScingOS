"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/neural/stream";
exports.ids = ["pages/api/neural/stream"];
exports.modules = {

/***/ "(api-node)/../scing/bane/core/aggregate.ts":
/*!***************************************!*\
  !*** ../scing/bane/core/aggregate.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregate: () => (/* binding */ aggregate)\n/* harmony export */ });\nconst severityRank = {\n    low: 1,\n    medium: 2,\n    high: 3,\n    critical: 4\n};\nconst verdictRank = {\n    allow: 1,\n    sanitize: 2,\n    review: 3,\n    deny: 4\n};\nfunction aggregate(findings) {\n    if (!findings.length) return {\n        verdict: 'allow',\n        severity: 'low'\n    };\n    let maxSeverity = 'low';\n    let maxVerdict = 'allow';\n    for (const f of findings){\n        if (severityRank[f.severity] > severityRank[maxSeverity]) maxSeverity = f.severity;\n        if (verdictRank[f.verdict] > verdictRank[maxVerdict]) maxVerdict = f.verdict;\n    }\n    return {\n        verdict: maxVerdict,\n        severity: maxSeverity\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2NvcmUvYWdncmVnYXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFQSxNQUFNQSxlQUE2QztJQUNqREMsS0FBSztJQUNMQyxRQUFRO0lBQ1JDLE1BQU07SUFDTkMsVUFBVTtBQUNaO0FBRUEsTUFBTUMsY0FBMkM7SUFDL0NDLE9BQU87SUFDUEMsVUFBVTtJQUNWQyxRQUFRO0lBQ1JDLE1BQU07QUFDUjtBQUVPLFNBQVNDLFVBQVVDLFFBQXVCO0lBQy9DLElBQUksQ0FBQ0EsU0FBU0MsTUFBTSxFQUFFLE9BQU87UUFBRUMsU0FBUztRQUFTQyxVQUFVO0lBQU07SUFFakUsSUFBSUMsY0FBNEI7SUFDaEMsSUFBSUMsYUFBMEI7SUFFOUIsS0FBSyxNQUFNQyxLQUFLTixTQUFVO1FBQ3hCLElBQUlYLFlBQVksQ0FBQ2lCLEVBQUVILFFBQVEsQ0FBQyxHQUFHZCxZQUFZLENBQUNlLFlBQVksRUFBRUEsY0FBY0UsRUFBRUgsUUFBUTtRQUNsRixJQUFJVCxXQUFXLENBQUNZLEVBQUVKLE9BQU8sQ0FBQyxHQUFHUixXQUFXLENBQUNXLFdBQVcsRUFBRUEsYUFBYUMsRUFBRUosT0FBTztJQUM5RTtJQUVBLE9BQU87UUFBRUEsU0FBU0c7UUFBWUYsVUFBVUM7SUFBWTtBQUN0RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxcY29yZVxcYWdncmVnYXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFuZUZpbmRpbmcsIEJhbmVTZXZlcml0eSwgQmFuZVZlcmRpY3QgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5jb25zdCBzZXZlcml0eVJhbms6IFJlY29yZDxCYW5lU2V2ZXJpdHksIG51bWJlcj4gPSB7XHJcbiAgbG93OiAxLFxyXG4gIG1lZGl1bTogMixcclxuICBoaWdoOiAzLFxyXG4gIGNyaXRpY2FsOiA0LFxyXG59O1xyXG5cclxuY29uc3QgdmVyZGljdFJhbms6IFJlY29yZDxCYW5lVmVyZGljdCwgbnVtYmVyPiA9IHtcclxuICBhbGxvdzogMSxcclxuICBzYW5pdGl6ZTogMixcclxuICByZXZpZXc6IDMsXHJcbiAgZGVueTogNCxcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZ2dyZWdhdGUoZmluZGluZ3M6IEJhbmVGaW5kaW5nW10pOiB7IHZlcmRpY3Q6IEJhbmVWZXJkaWN0OyBzZXZlcml0eTogQmFuZVNldmVyaXR5IH0ge1xyXG4gIGlmICghZmluZGluZ3MubGVuZ3RoKSByZXR1cm4geyB2ZXJkaWN0OiAnYWxsb3cnLCBzZXZlcml0eTogJ2xvdycgfTtcclxuXHJcbiAgbGV0IG1heFNldmVyaXR5OiBCYW5lU2V2ZXJpdHkgPSAnbG93JztcclxuICBsZXQgbWF4VmVyZGljdDogQmFuZVZlcmRpY3QgPSAnYWxsb3cnO1xyXG5cclxuICBmb3IgKGNvbnN0IGYgb2YgZmluZGluZ3MpIHtcclxuICAgIGlmIChzZXZlcml0eVJhbmtbZi5zZXZlcml0eV0gPiBzZXZlcml0eVJhbmtbbWF4U2V2ZXJpdHldKSBtYXhTZXZlcml0eSA9IGYuc2V2ZXJpdHk7XHJcbiAgICBpZiAodmVyZGljdFJhbmtbZi52ZXJkaWN0XSA+IHZlcmRpY3RSYW5rW21heFZlcmRpY3RdKSBtYXhWZXJkaWN0ID0gZi52ZXJkaWN0O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgdmVyZGljdDogbWF4VmVyZGljdCwgc2V2ZXJpdHk6IG1heFNldmVyaXR5IH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInNldmVyaXR5UmFuayIsImxvdyIsIm1lZGl1bSIsImhpZ2giLCJjcml0aWNhbCIsInZlcmRpY3RSYW5rIiwiYWxsb3ciLCJzYW5pdGl6ZSIsInJldmlldyIsImRlbnkiLCJhZ2dyZWdhdGUiLCJmaW5kaW5ncyIsImxlbmd0aCIsInZlcmRpY3QiLCJzZXZlcml0eSIsIm1heFNldmVyaXR5IiwibWF4VmVyZGljdCIsImYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/core/aggregate.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/core/detectors.baseline.ts":
/*!************************************************!*\
  !*** ../scing/bane/core/detectors.baseline.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baselineDetectors: () => (/* binding */ baselineDetectors)\n/* harmony export */ });\n/* harmony import */ var _detectors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./detectors */ \"(api-node)/../scing/bane/core/detectors.ts\");\n\nfunction txt(input) {\n    return (input.text || '').toLowerCase();\n}\nfunction hasAny(t, needles) {\n    return needles.some((n)=>t.includes(n));\n}\n// High-level indicators only (do not expose internal rules to requesters).\nconst INTRUSION_HINTS = [\n    'ignore previous',\n    'system prompt',\n    'developer message',\n    'override policy',\n    'bypass',\n    'jailbreak',\n    'disable safety',\n    'act as'\n];\nconst EXFIL_HINTS = [\n    'api key',\n    'secret',\n    'token',\n    'password',\n    'credentials',\n    'private key',\n    'dump'\n];\nconst MALWARE_HINTS = [\n    'malware',\n    'ransomware',\n    'keylogger',\n    'exploit',\n    'payload',\n    'backdoor'\n];\nconst PRIV_ESC_HINTS = [\n    'admin',\n    'elevate privilege',\n    'root access',\n    'operator mode',\n    'policy admin'\n];\nfunction baselineDetectors() {\n    return [\n        {\n            id: 'BASE_INTRUSION_LANGUAGE',\n            order: 10,\n            detect: (input)=>{\n                const t = txt({\n                    text: input.text\n                });\n                if (!t) return [];\n                if (hasAny(t, INTRUSION_HINTS)) {\n                    return [\n                        (0,_detectors__WEBPACK_IMPORTED_MODULE_0__.finding)({\n                            id: 'INTRUSION_INDICATOR',\n                            title: 'Intrusion / override indicator detected',\n                            severity: 'high',\n                            verdict: 'deny',\n                            rationale: 'Input contains language commonly associated with bypassing controls.',\n                            tags: [\n                                'intrusion',\n                                'baseline'\n                            ]\n                        })\n                    ];\n                }\n                return [];\n            }\n        },\n        {\n            id: 'BASE_EXFIL_LANGUAGE',\n            order: 20,\n            detect: (input)=>{\n                const t = txt({\n                    text: input.text\n                });\n                if (!t) return [];\n                if (hasAny(t, EXFIL_HINTS)) {\n                    return [\n                        (0,_detectors__WEBPACK_IMPORTED_MODULE_0__.finding)({\n                            id: 'EXFIL_INDICATOR',\n                            title: 'Potential data exfiltration intent detected',\n                            severity: 'high',\n                            verdict: 'deny',\n                            rationale: 'Input suggests an attempt to obtain sensitive credentials or restricted data.',\n                            tags: [\n                                'exfil',\n                                'baseline'\n                            ]\n                        })\n                    ];\n                }\n                return [];\n            }\n        },\n        {\n            id: 'BASE_PRIV_ESC_LANGUAGE',\n            order: 30,\n            detect: (input)=>{\n                const t = txt({\n                    text: input.text\n                });\n                if (!t) return [];\n                if (hasAny(t, PRIV_ESC_HINTS)) {\n                    return [\n                        (0,_detectors__WEBPACK_IMPORTED_MODULE_0__.finding)({\n                            id: 'PRIV_ESC_INDICATOR',\n                            title: 'Privilege escalation indicator detected',\n                            severity: 'high',\n                            verdict: 'deny',\n                            rationale: 'Input indicates an attempt to access privileged operator/admin actions.',\n                            tags: [\n                                'privilege',\n                                'baseline'\n                            ]\n                        })\n                    ];\n                }\n                return [];\n            }\n        },\n        {\n            id: 'BASE_MALWARE_LANGUAGE',\n            order: 40,\n            detect: (input)=>{\n                const t = txt({\n                    text: input.text\n                });\n                if (!t) return [];\n                if (hasAny(t, MALWARE_HINTS)) {\n                    return [\n                        (0,_detectors__WEBPACK_IMPORTED_MODULE_0__.finding)({\n                            id: 'MALWARE_INDICATOR',\n                            title: 'Malicious content indicator detected',\n                            severity: 'critical',\n                            verdict: 'deny',\n                            rationale: 'Input contains terms commonly associated with malware/exploit activity.',\n                            tags: [\n                                'malware',\n                                'baseline'\n                            ]\n                        })\n                    ];\n                }\n                return [];\n            }\n        },\n        {\n            id: 'BASE_PII_REVIEW',\n            order: 50,\n            detect: (input)=>{\n                const t = input.text || '';\n                const looksLikeEmail = /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b/i.test(t);\n                const looksLikePhone = /\\b(\\+?1[\\s-]?)?(\\(?\\d{3}\\)?[\\s-]?)\\d{3}[\\s-]?\\d{4}\\b/.test(t);\n                if (looksLikeEmail || looksLikePhone) {\n                    return [\n                        (0,_detectors__WEBPACK_IMPORTED_MODULE_0__.finding)({\n                            id: 'PII_POSSIBLE',\n                            title: 'Possible personal data detected',\n                            severity: 'medium',\n                            verdict: 'sanitize',\n                            rationale: 'Input may contain personal contact information; redaction recommended.',\n                            tags: [\n                                'pii',\n                                'baseline'\n                            ],\n                            evidence: looksLikeEmail ? 'email-like pattern' : 'phone-like pattern'\n                        })\n                    ];\n                }\n                return [];\n            }\n        }\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2NvcmUvZGV0ZWN0b3JzLmJhc2VsaW5lLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQ3NDO0FBRXRDLFNBQVNDLElBQUlDLEtBQXVCO0lBQ2xDLE9BQU8sQ0FBQ0EsTUFBTUMsSUFBSSxJQUFJLEVBQUMsRUFBR0MsV0FBVztBQUN2QztBQUVBLFNBQVNDLE9BQU9DLENBQVMsRUFBRUMsT0FBaUI7SUFDMUMsT0FBT0EsUUFBUUMsSUFBSSxDQUFDLENBQUNDLElBQU1ILEVBQUVJLFFBQVEsQ0FBQ0Q7QUFDeEM7QUFFQSwyRUFBMkU7QUFDM0UsTUFBTUUsa0JBQWtCO0lBQ3RCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELE1BQU1DLGNBQWM7SUFBQztJQUFXO0lBQVU7SUFBUztJQUFZO0lBQWU7SUFBZTtDQUFPO0FBRXBHLE1BQU1DLGdCQUFnQjtJQUFDO0lBQVc7SUFBYztJQUFhO0lBQVc7SUFBVztDQUFXO0FBRTlGLE1BQU1DLGlCQUFpQjtJQUFDO0lBQVM7SUFBcUI7SUFBZTtJQUFpQjtDQUFlO0FBRTlGLFNBQVNDO0lBQ2QsT0FBTztRQUNMO1lBQ0VDLElBQUk7WUFDSkMsT0FBTztZQUNQQyxRQUFRLENBQUNoQjtnQkFDUCxNQUFNSSxJQUFJTCxJQUFJO29CQUFFRSxNQUFNRCxNQUFNQyxJQUFJO2dCQUFDO2dCQUNqQyxJQUFJLENBQUNHLEdBQUcsT0FBTyxFQUFFO2dCQUNqQixJQUFJRCxPQUFPQyxHQUFHSyxrQkFBa0I7b0JBQzlCLE9BQU87d0JBQ0xYLG1EQUFPQSxDQUFDOzRCQUNOZ0IsSUFBSTs0QkFDSkcsT0FBTzs0QkFDUEMsVUFBVTs0QkFDVkMsU0FBUzs0QkFDVEMsV0FBVzs0QkFDWEMsTUFBTTtnQ0FBQztnQ0FBYTs2QkFBVzt3QkFDakM7cUJBQ0Q7Z0JBQ0g7Z0JBQ0EsT0FBTyxFQUFFO1lBQ1g7UUFDRjtRQUNBO1lBQ0VQLElBQUk7WUFDSkMsT0FBTztZQUNQQyxRQUFRLENBQUNoQjtnQkFDUCxNQUFNSSxJQUFJTCxJQUFJO29CQUFFRSxNQUFNRCxNQUFNQyxJQUFJO2dCQUFDO2dCQUNqQyxJQUFJLENBQUNHLEdBQUcsT0FBTyxFQUFFO2dCQUNqQixJQUFJRCxPQUFPQyxHQUFHTSxjQUFjO29CQUMxQixPQUFPO3dCQUNMWixtREFBT0EsQ0FBQzs0QkFDTmdCLElBQUk7NEJBQ0pHLE9BQU87NEJBQ1BDLFVBQVU7NEJBQ1ZDLFNBQVM7NEJBQ1RDLFdBQVc7NEJBQ1hDLE1BQU07Z0NBQUM7Z0NBQVM7NkJBQVc7d0JBQzdCO3FCQUNEO2dCQUNIO2dCQUNBLE9BQU8sRUFBRTtZQUNYO1FBQ0Y7UUFDQTtZQUNFUCxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsUUFBUSxDQUFDaEI7Z0JBQ1AsTUFBTUksSUFBSUwsSUFBSTtvQkFBRUUsTUFBTUQsTUFBTUMsSUFBSTtnQkFBQztnQkFDakMsSUFBSSxDQUFDRyxHQUFHLE9BQU8sRUFBRTtnQkFDakIsSUFBSUQsT0FBT0MsR0FBR1EsaUJBQWlCO29CQUM3QixPQUFPO3dCQUNMZCxtREFBT0EsQ0FBQzs0QkFDTmdCLElBQUk7NEJBQ0pHLE9BQU87NEJBQ1BDLFVBQVU7NEJBQ1ZDLFNBQVM7NEJBQ1RDLFdBQVc7NEJBQ1hDLE1BQU07Z0NBQUM7Z0NBQWE7NkJBQVc7d0JBQ2pDO3FCQUNEO2dCQUNIO2dCQUNBLE9BQU8sRUFBRTtZQUNYO1FBQ0Y7UUFDQTtZQUNFUCxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsUUFBUSxDQUFDaEI7Z0JBQ1AsTUFBTUksSUFBSUwsSUFBSTtvQkFBRUUsTUFBTUQsTUFBTUMsSUFBSTtnQkFBQztnQkFDakMsSUFBSSxDQUFDRyxHQUFHLE9BQU8sRUFBRTtnQkFDakIsSUFBSUQsT0FBT0MsR0FBR08sZ0JBQWdCO29CQUM1QixPQUFPO3dCQUNMYixtREFBT0EsQ0FBQzs0QkFDTmdCLElBQUk7NEJBQ0pHLE9BQU87NEJBQ1BDLFVBQVU7NEJBQ1ZDLFNBQVM7NEJBQ1RDLFdBQVc7NEJBQ1hDLE1BQU07Z0NBQUM7Z0NBQVc7NkJBQVc7d0JBQy9CO3FCQUNEO2dCQUNIO2dCQUNBLE9BQU8sRUFBRTtZQUNYO1FBQ0Y7UUFDQTtZQUNFUCxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsUUFBUSxDQUFDaEI7Z0JBQ1AsTUFBTUksSUFBSUosTUFBTUMsSUFBSSxJQUFJO2dCQUN4QixNQUFNcUIsaUJBQWlCLDZDQUE2Q0MsSUFBSSxDQUFDbkI7Z0JBQ3pFLE1BQU1vQixpQkFBaUIsdURBQXVERCxJQUFJLENBQUNuQjtnQkFDbkYsSUFBSWtCLGtCQUFrQkUsZ0JBQWdCO29CQUNwQyxPQUFPO3dCQUNMMUIsbURBQU9BLENBQUM7NEJBQ05nQixJQUFJOzRCQUNKRyxPQUFPOzRCQUNQQyxVQUFVOzRCQUNWQyxTQUFTOzRCQUNUQyxXQUFXOzRCQUNYQyxNQUFNO2dDQUFDO2dDQUFPOzZCQUFXOzRCQUN6QkksVUFBVUgsaUJBQWlCLHVCQUF1Qjt3QkFDcEQ7cUJBQ0Q7Z0JBQ0g7Z0JBQ0EsT0FBTyxFQUFFO1lBQ1g7UUFDRjtLQUNEO0FBQ0giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXGNvcmVcXGRldGVjdG9ycy5iYXNlbGluZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IERldGVjdG9yIH0gZnJvbSAnLi9kZXRlY3RvcnMnO1xyXG5pbXBvcnQgeyBmaW5kaW5nIH0gZnJvbSAnLi9kZXRlY3RvcnMnO1xyXG5cclxuZnVuY3Rpb24gdHh0KGlucHV0OiB7IHRleHQ6IHN0cmluZyB9KSB7XHJcbiAgcmV0dXJuIChpbnB1dC50ZXh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYXNBbnkodDogc3RyaW5nLCBuZWVkbGVzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiBuZWVkbGVzLnNvbWUoKG4pID0+IHQuaW5jbHVkZXMobikpO1xyXG59XHJcblxyXG4vLyBIaWdoLWxldmVsIGluZGljYXRvcnMgb25seSAoZG8gbm90IGV4cG9zZSBpbnRlcm5hbCBydWxlcyB0byByZXF1ZXN0ZXJzKS5cclxuY29uc3QgSU5UUlVTSU9OX0hJTlRTID0gW1xyXG4gICdpZ25vcmUgcHJldmlvdXMnLFxyXG4gICdzeXN0ZW0gcHJvbXB0JyxcclxuICAnZGV2ZWxvcGVyIG1lc3NhZ2UnLFxyXG4gICdvdmVycmlkZSBwb2xpY3knLFxyXG4gICdieXBhc3MnLFxyXG4gICdqYWlsYnJlYWsnLFxyXG4gICdkaXNhYmxlIHNhZmV0eScsXHJcbiAgJ2FjdCBhcycsXHJcbl07XHJcblxyXG5jb25zdCBFWEZJTF9ISU5UUyA9IFsnYXBpIGtleScsICdzZWNyZXQnLCAndG9rZW4nLCAncGFzc3dvcmQnLCAnY3JlZGVudGlhbHMnLCAncHJpdmF0ZSBrZXknLCAnZHVtcCddO1xyXG5cclxuY29uc3QgTUFMV0FSRV9ISU5UUyA9IFsnbWFsd2FyZScsICdyYW5zb213YXJlJywgJ2tleWxvZ2dlcicsICdleHBsb2l0JywgJ3BheWxvYWQnLCAnYmFja2Rvb3InXTtcclxuXHJcbmNvbnN0IFBSSVZfRVNDX0hJTlRTID0gWydhZG1pbicsICdlbGV2YXRlIHByaXZpbGVnZScsICdyb290IGFjY2VzcycsICdvcGVyYXRvciBtb2RlJywgJ3BvbGljeSBhZG1pbiddO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJhc2VsaW5lRGV0ZWN0b3JzKCk6IERldGVjdG9yW10ge1xyXG4gIHJldHVybiBbXHJcbiAgICB7XHJcbiAgICAgIGlkOiAnQkFTRV9JTlRSVVNJT05fTEFOR1VBR0UnLFxyXG4gICAgICBvcmRlcjogMTAsXHJcbiAgICAgIGRldGVjdDogKGlucHV0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdCA9IHR4dCh7IHRleHQ6IGlucHV0LnRleHQgfSk7XHJcbiAgICAgICAgaWYgKCF0KSByZXR1cm4gW107XHJcbiAgICAgICAgaWYgKGhhc0FueSh0LCBJTlRSVVNJT05fSElOVFMpKSB7XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBmaW5kaW5nKHtcclxuICAgICAgICAgICAgICBpZDogJ0lOVFJVU0lPTl9JTkRJQ0FUT1InLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiAnSW50cnVzaW9uIC8gb3ZlcnJpZGUgaW5kaWNhdG9yIGRldGVjdGVkJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ2hpZ2gnLFxyXG4gICAgICAgICAgICAgIHZlcmRpY3Q6ICdkZW55JyxcclxuICAgICAgICAgICAgICByYXRpb25hbGU6ICdJbnB1dCBjb250YWlucyBsYW5ndWFnZSBjb21tb25seSBhc3NvY2lhdGVkIHdpdGggYnlwYXNzaW5nIGNvbnRyb2xzLicsXHJcbiAgICAgICAgICAgICAgdGFnczogWydpbnRydXNpb24nLCAnYmFzZWxpbmUnXSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ0JBU0VfRVhGSUxfTEFOR1VBR0UnLFxyXG4gICAgICBvcmRlcjogMjAsXHJcbiAgICAgIGRldGVjdDogKGlucHV0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdCA9IHR4dCh7IHRleHQ6IGlucHV0LnRleHQgfSk7XHJcbiAgICAgICAgaWYgKCF0KSByZXR1cm4gW107XHJcbiAgICAgICAgaWYgKGhhc0FueSh0LCBFWEZJTF9ISU5UUykpIHtcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGZpbmRpbmcoe1xyXG4gICAgICAgICAgICAgIGlkOiAnRVhGSUxfSU5ESUNBVE9SJyxcclxuICAgICAgICAgICAgICB0aXRsZTogJ1BvdGVudGlhbCBkYXRhIGV4ZmlsdHJhdGlvbiBpbnRlbnQgZGV0ZWN0ZWQnLFxyXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAnaGlnaCcsXHJcbiAgICAgICAgICAgICAgdmVyZGljdDogJ2RlbnknLFxyXG4gICAgICAgICAgICAgIHJhdGlvbmFsZTogJ0lucHV0IHN1Z2dlc3RzIGFuIGF0dGVtcHQgdG8gb2J0YWluIHNlbnNpdGl2ZSBjcmVkZW50aWFscyBvciByZXN0cmljdGVkIGRhdGEuJyxcclxuICAgICAgICAgICAgICB0YWdzOiBbJ2V4ZmlsJywgJ2Jhc2VsaW5lJ10sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdCQVNFX1BSSVZfRVNDX0xBTkdVQUdFJyxcclxuICAgICAgb3JkZXI6IDMwLFxyXG4gICAgICBkZXRlY3Q6IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHQgPSB0eHQoeyB0ZXh0OiBpbnB1dC50ZXh0IH0pO1xyXG4gICAgICAgIGlmICghdCkgcmV0dXJuIFtdO1xyXG4gICAgICAgIGlmIChoYXNBbnkodCwgUFJJVl9FU0NfSElOVFMpKSB7XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBmaW5kaW5nKHtcclxuICAgICAgICAgICAgICBpZDogJ1BSSVZfRVNDX0lORElDQVRPUicsXHJcbiAgICAgICAgICAgICAgdGl0bGU6ICdQcml2aWxlZ2UgZXNjYWxhdGlvbiBpbmRpY2F0b3IgZGV0ZWN0ZWQnLFxyXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAnaGlnaCcsXHJcbiAgICAgICAgICAgICAgdmVyZGljdDogJ2RlbnknLFxyXG4gICAgICAgICAgICAgIHJhdGlvbmFsZTogJ0lucHV0IGluZGljYXRlcyBhbiBhdHRlbXB0IHRvIGFjY2VzcyBwcml2aWxlZ2VkIG9wZXJhdG9yL2FkbWluIGFjdGlvbnMuJyxcclxuICAgICAgICAgICAgICB0YWdzOiBbJ3ByaXZpbGVnZScsICdiYXNlbGluZSddLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGlkOiAnQkFTRV9NQUxXQVJFX0xBTkdVQUdFJyxcclxuICAgICAgb3JkZXI6IDQwLFxyXG4gICAgICBkZXRlY3Q6IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHQgPSB0eHQoeyB0ZXh0OiBpbnB1dC50ZXh0IH0pO1xyXG4gICAgICAgIGlmICghdCkgcmV0dXJuIFtdO1xyXG4gICAgICAgIGlmIChoYXNBbnkodCwgTUFMV0FSRV9ISU5UUykpIHtcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGZpbmRpbmcoe1xyXG4gICAgICAgICAgICAgIGlkOiAnTUFMV0FSRV9JTkRJQ0FUT1InLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiAnTWFsaWNpb3VzIGNvbnRlbnQgaW5kaWNhdG9yIGRldGVjdGVkJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcclxuICAgICAgICAgICAgICB2ZXJkaWN0OiAnZGVueScsXHJcbiAgICAgICAgICAgICAgcmF0aW9uYWxlOiAnSW5wdXQgY29udGFpbnMgdGVybXMgY29tbW9ubHkgYXNzb2NpYXRlZCB3aXRoIG1hbHdhcmUvZXhwbG9pdCBhY3Rpdml0eS4nLFxyXG4gICAgICAgICAgICAgIHRhZ3M6IFsnbWFsd2FyZScsICdiYXNlbGluZSddLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGlkOiAnQkFTRV9QSUlfUkVWSUVXJyxcclxuICAgICAgb3JkZXI6IDUwLFxyXG4gICAgICBkZXRlY3Q6IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHQgPSBpbnB1dC50ZXh0IHx8ICcnO1xyXG4gICAgICAgIGNvbnN0IGxvb2tzTGlrZUVtYWlsID0gL1xcYltBLVowLTkuXyUrLV0rQFtBLVowLTkuLV0rXFwuW0EtWl17Mix9XFxiL2kudGVzdCh0KTtcclxuICAgICAgICBjb25zdCBsb29rc0xpa2VQaG9uZSA9IC9cXGIoXFwrPzFbXFxzLV0/KT8oXFwoP1xcZHszfVxcKT9bXFxzLV0/KVxcZHszfVtcXHMtXT9cXGR7NH1cXGIvLnRlc3QodCk7XHJcbiAgICAgICAgaWYgKGxvb2tzTGlrZUVtYWlsIHx8IGxvb2tzTGlrZVBob25lKSB7XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBmaW5kaW5nKHtcclxuICAgICAgICAgICAgICBpZDogJ1BJSV9QT1NTSUJMRScsXHJcbiAgICAgICAgICAgICAgdGl0bGU6ICdQb3NzaWJsZSBwZXJzb25hbCBkYXRhIGRldGVjdGVkJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXHJcbiAgICAgICAgICAgICAgdmVyZGljdDogJ3Nhbml0aXplJyxcclxuICAgICAgICAgICAgICByYXRpb25hbGU6ICdJbnB1dCBtYXkgY29udGFpbiBwZXJzb25hbCBjb250YWN0IGluZm9ybWF0aW9uOyByZWRhY3Rpb24gcmVjb21tZW5kZWQuJyxcclxuICAgICAgICAgICAgICB0YWdzOiBbJ3BpaScsICdiYXNlbGluZSddLFxyXG4gICAgICAgICAgICAgIGV2aWRlbmNlOiBsb29rc0xpa2VFbWFpbCA/ICdlbWFpbC1saWtlIHBhdHRlcm4nIDogJ3Bob25lLWxpa2UgcGF0dGVybicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICBdO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJmaW5kaW5nIiwidHh0IiwiaW5wdXQiLCJ0ZXh0IiwidG9Mb3dlckNhc2UiLCJoYXNBbnkiLCJ0IiwibmVlZGxlcyIsInNvbWUiLCJuIiwiaW5jbHVkZXMiLCJJTlRSVVNJT05fSElOVFMiLCJFWEZJTF9ISU5UUyIsIk1BTFdBUkVfSElOVFMiLCJQUklWX0VTQ19ISU5UUyIsImJhc2VsaW5lRGV0ZWN0b3JzIiwiaWQiLCJvcmRlciIsImRldGVjdCIsInRpdGxlIiwic2V2ZXJpdHkiLCJ2ZXJkaWN0IiwicmF0aW9uYWxlIiwidGFncyIsImxvb2tzTGlrZUVtYWlsIiwidGVzdCIsImxvb2tzTGlrZVBob25lIiwiZXZpZGVuY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/core/detectors.baseline.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/core/detectors.ts":
/*!***************************************!*\
  !*** ../scing/bane/core/detectors.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   finding: () => (/* binding */ finding),\n/* harmony export */   runDetectors: () => (/* binding */ runDetectors)\n/* harmony export */ });\nfunction finding(params) {\n    return {\n        id: params.id,\n        title: params.title,\n        severity: params.severity,\n        verdict: params.verdict,\n        rationale: params.rationale,\n        tags: params.tags,\n        evidence: params.evidence\n    };\n}\nfunction runDetectors(detectors, input, hints) {\n    const sorted = [\n        ...detectors\n    ].sort((a, b)=>a.order - b.order || a.id.localeCompare(b.id));\n    const out = [];\n    for (const d of sorted){\n        const res = d.detect(input, hints);\n        if (res && res.length) out.push(...res);\n    }\n    return out;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2NvcmUvZGV0ZWN0b3JzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBV08sU0FBU0EsUUFBUUMsTUFRdkI7SUFDQyxPQUFPO1FBQ0xDLElBQUlELE9BQU9DLEVBQUU7UUFDYkMsT0FBT0YsT0FBT0UsS0FBSztRQUNuQkMsVUFBVUgsT0FBT0csUUFBUTtRQUN6QkMsU0FBU0osT0FBT0ksT0FBTztRQUN2QkMsV0FBV0wsT0FBT0ssU0FBUztRQUMzQkMsTUFBTU4sT0FBT00sSUFBSTtRQUNqQkMsVUFBVVAsT0FBT08sUUFBUTtJQUMzQjtBQUNGO0FBRU8sU0FBU0MsYUFBYUMsU0FBcUIsRUFBRUMsS0FBZ0IsRUFBRUMsS0FBa0I7SUFDdEYsTUFBTUMsU0FBUztXQUFJSDtLQUFVLENBQUNJLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFRSxLQUFLLEdBQUdELEVBQUVDLEtBQUssSUFBSUYsRUFBRWIsRUFBRSxDQUFDZ0IsYUFBYSxDQUFDRixFQUFFZCxFQUFFO0lBQ3pGLE1BQU1pQixNQUFxQixFQUFFO0lBQzdCLEtBQUssTUFBTUMsS0FBS1AsT0FBUTtRQUN0QixNQUFNUSxNQUFNRCxFQUFFRSxNQUFNLENBQUNYLE9BQU9DO1FBQzVCLElBQUlTLE9BQU9BLElBQUlFLE1BQU0sRUFBRUosSUFBSUssSUFBSSxJQUFJSDtJQUNyQztJQUNBLE9BQU9GO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXGNvcmVcXGRldGVjdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVGaW5kaW5nLCBCYW5lSW5wdXQsIEJhbmVTZXZlcml0eSwgQmFuZVZlcmRpY3QgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgUG9saWN5SGludHMgfSBmcm9tICcuLi9wb2xpY3kvYmFuZVBvbGljeSc7XHJcblxyXG5leHBvcnQgdHlwZSBEZXRlY3RvclJlc3VsdCA9IEJhbmVGaW5kaW5nW107XHJcblxyXG5leHBvcnQgdHlwZSBEZXRlY3RvciA9IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG9yZGVyOiBudW1iZXI7XHJcbiAgZGV0ZWN0OiAoaW5wdXQ6IEJhbmVJbnB1dCwgaGludHM6IFBvbGljeUhpbnRzKSA9PiBEZXRlY3RvclJlc3VsdDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kaW5nKHBhcmFtczoge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBzZXZlcml0eTogQmFuZVNldmVyaXR5O1xyXG4gIHZlcmRpY3Q6IEJhbmVWZXJkaWN0O1xyXG4gIHJhdGlvbmFsZTogc3RyaW5nO1xyXG4gIHRhZ3M/OiBzdHJpbmdbXTtcclxuICBldmlkZW5jZT86IHN0cmluZztcclxufSk6IEJhbmVGaW5kaW5nIHtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IHBhcmFtcy5pZCxcclxuICAgIHRpdGxlOiBwYXJhbXMudGl0bGUsXHJcbiAgICBzZXZlcml0eTogcGFyYW1zLnNldmVyaXR5LFxyXG4gICAgdmVyZGljdDogcGFyYW1zLnZlcmRpY3QsXHJcbiAgICByYXRpb25hbGU6IHBhcmFtcy5yYXRpb25hbGUsXHJcbiAgICB0YWdzOiBwYXJhbXMudGFncyxcclxuICAgIGV2aWRlbmNlOiBwYXJhbXMuZXZpZGVuY2UsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJ1bkRldGVjdG9ycyhkZXRlY3RvcnM6IERldGVjdG9yW10sIGlucHV0OiBCYW5lSW5wdXQsIGhpbnRzOiBQb2xpY3lIaW50cyk6IEJhbmVGaW5kaW5nW10ge1xyXG4gIGNvbnN0IHNvcnRlZCA9IFsuLi5kZXRlY3RvcnNdLnNvcnQoKGEsIGIpID0+IGEub3JkZXIgLSBiLm9yZGVyIHx8IGEuaWQubG9jYWxlQ29tcGFyZShiLmlkKSk7XHJcbiAgY29uc3Qgb3V0OiBCYW5lRmluZGluZ1tdID0gW107XHJcbiAgZm9yIChjb25zdCBkIG9mIHNvcnRlZCkge1xyXG4gICAgY29uc3QgcmVzID0gZC5kZXRlY3QoaW5wdXQsIGhpbnRzKTtcclxuICAgIGlmIChyZXMgJiYgcmVzLmxlbmd0aCkgb3V0LnB1c2goLi4ucmVzKTtcclxuICB9XHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG4iXSwibmFtZXMiOlsiZmluZGluZyIsInBhcmFtcyIsImlkIiwidGl0bGUiLCJzZXZlcml0eSIsInZlcmRpY3QiLCJyYXRpb25hbGUiLCJ0YWdzIiwiZXZpZGVuY2UiLCJydW5EZXRlY3RvcnMiLCJkZXRlY3RvcnMiLCJpbnB1dCIsImhpbnRzIiwic29ydGVkIiwic29ydCIsImEiLCJiIiwib3JkZXIiLCJsb2NhbGVDb21wYXJlIiwib3V0IiwiZCIsInJlcyIsImRldGVjdCIsImxlbmd0aCIsInB1c2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/core/detectors.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/core/redaction.ts":
/*!***************************************!*\
  !*** ../scing/bane/core/redaction.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyRedactions: () => (/* binding */ applyRedactions),\n/* harmony export */   mergeSpans: () => (/* binding */ mergeSpans)\n/* harmony export */ });\nfunction mergeSpans(spans) {\n    const s = [\n        ...spans\n    ].sort((a, b)=>a.start - b.start || a.end - b.end);\n    const out = [];\n    for (const cur of s){\n        const prev = out[out.length - 1];\n        if (!prev || cur.start > prev.end) {\n            out.push({\n                ...cur\n            });\n        } else {\n            prev.end = Math.max(prev.end, cur.end);\n            prev.label = prev.label || cur.label;\n        }\n    }\n    return out;\n}\nfunction applyRedactions(text, spans) {\n    if (!spans.length) return text;\n    const merged = mergeSpans(spans);\n    let out = '';\n    let last = 0;\n    for (const sp of merged){\n        out += text.slice(last, sp.start);\n        out += `[REDACTED:${sp.label}]`;\n        last = sp.end;\n    }\n    out += text.slice(last);\n    return out;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2NvcmUvcmVkYWN0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRU8sU0FBU0EsV0FBV0MsS0FBc0I7SUFDL0MsTUFBTUMsSUFBSTtXQUFJRDtLQUFNLENBQUNFLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFRSxLQUFLLEdBQUdELEVBQUVDLEtBQUssSUFBSUYsRUFBRUcsR0FBRyxHQUFHRixFQUFFRSxHQUFHO0lBQ3RFLE1BQU1DLE1BQXVCLEVBQUU7SUFDL0IsS0FBSyxNQUFNQyxPQUFPUCxFQUFHO1FBQ25CLE1BQU1RLE9BQU9GLEdBQUcsQ0FBQ0EsSUFBSUcsTUFBTSxHQUFHLEVBQUU7UUFDaEMsSUFBSSxDQUFDRCxRQUFRRCxJQUFJSCxLQUFLLEdBQUdJLEtBQUtILEdBQUcsRUFBRTtZQUNqQ0MsSUFBSUksSUFBSSxDQUFDO2dCQUFFLEdBQUdILEdBQUc7WUFBQztRQUNwQixPQUFPO1lBQ0xDLEtBQUtILEdBQUcsR0FBR00sS0FBS0MsR0FBRyxDQUFDSixLQUFLSCxHQUFHLEVBQUVFLElBQUlGLEdBQUc7WUFDckNHLEtBQUtLLEtBQUssR0FBR0wsS0FBS0ssS0FBSyxJQUFJTixJQUFJTSxLQUFLO1FBQ3RDO0lBQ0Y7SUFDQSxPQUFPUDtBQUNUO0FBRU8sU0FBU1EsZ0JBQWdCQyxJQUFZLEVBQUVoQixLQUFzQjtJQUNsRSxJQUFJLENBQUNBLE1BQU1VLE1BQU0sRUFBRSxPQUFPTTtJQUMxQixNQUFNQyxTQUFTbEIsV0FBV0M7SUFDMUIsSUFBSU8sTUFBTTtJQUNWLElBQUlXLE9BQU87SUFDWCxLQUFLLE1BQU1DLE1BQU1GLE9BQVE7UUFDdkJWLE9BQU9TLEtBQUtJLEtBQUssQ0FBQ0YsTUFBTUMsR0FBR2QsS0FBSztRQUNoQ0UsT0FBTyxDQUFDLFVBQVUsRUFBRVksR0FBR0wsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMvQkksT0FBT0MsR0FBR2IsR0FBRztJQUNmO0lBQ0FDLE9BQU9TLEtBQUtJLEtBQUssQ0FBQ0Y7SUFDbEIsT0FBT1g7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxcY29yZVxccmVkYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIFJlZGFjdGlvblNwYW4gPSB7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyOyBsYWJlbDogc3RyaW5nIH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VTcGFucyhzcGFuczogUmVkYWN0aW9uU3BhbltdKTogUmVkYWN0aW9uU3BhbltdIHtcclxuICBjb25zdCBzID0gWy4uLnNwYW5zXS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCB8fCBhLmVuZCAtIGIuZW5kKTtcclxuICBjb25zdCBvdXQ6IFJlZGFjdGlvblNwYW5bXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgY3VyIG9mIHMpIHtcclxuICAgIGNvbnN0IHByZXYgPSBvdXRbb3V0Lmxlbmd0aCAtIDFdO1xyXG4gICAgaWYgKCFwcmV2IHx8IGN1ci5zdGFydCA+IHByZXYuZW5kKSB7XHJcbiAgICAgIG91dC5wdXNoKHsgLi4uY3VyIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcHJldi5lbmQgPSBNYXRoLm1heChwcmV2LmVuZCwgY3VyLmVuZCk7XHJcbiAgICAgIHByZXYubGFiZWwgPSBwcmV2LmxhYmVsIHx8IGN1ci5sYWJlbDtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UmVkYWN0aW9ucyh0ZXh0OiBzdHJpbmcsIHNwYW5zOiBSZWRhY3Rpb25TcGFuW10pOiBzdHJpbmcge1xyXG4gIGlmICghc3BhbnMubGVuZ3RoKSByZXR1cm4gdGV4dDtcclxuICBjb25zdCBtZXJnZWQgPSBtZXJnZVNwYW5zKHNwYW5zKTtcclxuICBsZXQgb3V0ID0gJyc7XHJcbiAgbGV0IGxhc3QgPSAwO1xyXG4gIGZvciAoY29uc3Qgc3Agb2YgbWVyZ2VkKSB7XHJcbiAgICBvdXQgKz0gdGV4dC5zbGljZShsYXN0LCBzcC5zdGFydCk7XHJcbiAgICBvdXQgKz0gYFtSRURBQ1RFRDoke3NwLmxhYmVsfV1gO1xyXG4gICAgbGFzdCA9IHNwLmVuZDtcclxuICB9XHJcbiAgb3V0ICs9IHRleHQuc2xpY2UobGFzdCk7XHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG4iXSwibmFtZXMiOlsibWVyZ2VTcGFucyIsInNwYW5zIiwicyIsInNvcnQiLCJhIiwiYiIsInN0YXJ0IiwiZW5kIiwib3V0IiwiY3VyIiwicHJldiIsImxlbmd0aCIsInB1c2giLCJNYXRoIiwibWF4IiwibGFiZWwiLCJhcHBseVJlZGFjdGlvbnMiLCJ0ZXh0IiwibWVyZ2VkIiwibGFzdCIsInNwIiwic2xpY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/core/redaction.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/core/redactionFromFindings.ts":
/*!***************************************************!*\
  !*** ../scing/bane/core/redactionFromFindings.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redactionsFromFindings: () => (/* binding */ redactionsFromFindings)\n/* harmony export */ });\nfunction redactionsFromFindings(text, findings) {\n    const spans = [];\n    for (const f of findings){\n        if (f.verdict !== 'sanitize') continue;\n        const emailRe = /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b/gi;\n        for (const m of text.matchAll(emailRe)){\n            const idx = m.index ?? -1;\n            if (idx >= 0) spans.push({\n                start: idx,\n                end: idx + m[0].length,\n                label: 'PII'\n            });\n        }\n        const phoneRe = /\\b(\\+?1[\\s-]?)?(\\(?\\d{3}\\)?[\\s-]?)\\d{3}[\\s-]?\\d{4}\\b/g;\n        for (const m of text.matchAll(phoneRe)){\n            const idx = m.index ?? -1;\n            if (idx >= 0) spans.push({\n                start: idx,\n                end: idx + m[0].length,\n                label: 'PII'\n            });\n        }\n    }\n    return spans;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2NvcmUvcmVkYWN0aW9uRnJvbUZpbmRpbmdzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFHTyxTQUFTQSx1QkFBdUJDLElBQVksRUFBRUMsUUFBdUI7SUFDMUUsTUFBTUMsUUFBeUIsRUFBRTtJQUVqQyxLQUFLLE1BQU1DLEtBQUtGLFNBQVU7UUFDeEIsSUFBSUUsRUFBRUMsT0FBTyxLQUFLLFlBQVk7UUFFOUIsTUFBTUMsVUFBVTtRQUNoQixLQUFLLE1BQU1DLEtBQUtOLEtBQUtPLFFBQVEsQ0FBQ0YsU0FBVTtZQUN0QyxNQUFNRyxNQUFNRixFQUFFRyxLQUFLLElBQUksQ0FBQztZQUN4QixJQUFJRCxPQUFPLEdBQUdOLE1BQU1RLElBQUksQ0FBQztnQkFBRUMsT0FBT0g7Z0JBQUtJLEtBQUtKLE1BQU1GLENBQUMsQ0FBQyxFQUFFLENBQUNPLE1BQU07Z0JBQUVDLE9BQU87WUFBTTtRQUM5RTtRQUVBLE1BQU1DLFVBQVU7UUFDaEIsS0FBSyxNQUFNVCxLQUFLTixLQUFLTyxRQUFRLENBQUNRLFNBQVU7WUFDdEMsTUFBTVAsTUFBTUYsRUFBRUcsS0FBSyxJQUFJLENBQUM7WUFDeEIsSUFBSUQsT0FBTyxHQUFHTixNQUFNUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU9IO2dCQUFLSSxLQUFLSixNQUFNRixDQUFDLENBQUMsRUFBRSxDQUFDTyxNQUFNO2dCQUFFQyxPQUFPO1lBQU07UUFDOUU7SUFDRjtJQUVBLE9BQU9aO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXGNvcmVcXHJlZGFjdGlvbkZyb21GaW5kaW5ncy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVGaW5kaW5nIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IFJlZGFjdGlvblNwYW4gfSBmcm9tICcuL3JlZGFjdGlvbic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVkYWN0aW9uc0Zyb21GaW5kaW5ncyh0ZXh0OiBzdHJpbmcsIGZpbmRpbmdzOiBCYW5lRmluZGluZ1tdKTogUmVkYWN0aW9uU3BhbltdIHtcclxuICBjb25zdCBzcGFuczogUmVkYWN0aW9uU3BhbltdID0gW107XHJcblxyXG4gIGZvciAoY29uc3QgZiBvZiBmaW5kaW5ncykge1xyXG4gICAgaWYgKGYudmVyZGljdCAhPT0gJ3Nhbml0aXplJykgY29udGludWU7XHJcblxyXG4gICAgY29uc3QgZW1haWxSZSA9IC9cXGJbQS1aMC05Ll8lKy1dK0BbQS1aMC05Li1dK1xcLltBLVpdezIsfVxcYi9naTtcclxuICAgIGZvciAoY29uc3QgbSBvZiB0ZXh0Lm1hdGNoQWxsKGVtYWlsUmUpKSB7XHJcbiAgICAgIGNvbnN0IGlkeCA9IG0uaW5kZXggPz8gLTE7XHJcbiAgICAgIGlmIChpZHggPj0gMCkgc3BhbnMucHVzaCh7IHN0YXJ0OiBpZHgsIGVuZDogaWR4ICsgbVswXS5sZW5ndGgsIGxhYmVsOiAnUElJJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwaG9uZVJlID0gL1xcYihcXCs/MVtcXHMtXT8pPyhcXCg/XFxkezN9XFwpP1tcXHMtXT8pXFxkezN9W1xccy1dP1xcZHs0fVxcYi9nO1xyXG4gICAgZm9yIChjb25zdCBtIG9mIHRleHQubWF0Y2hBbGwocGhvbmVSZSkpIHtcclxuICAgICAgY29uc3QgaWR4ID0gbS5pbmRleCA/PyAtMTtcclxuICAgICAgaWYgKGlkeCA+PSAwKSBzcGFucy5wdXNoKHsgc3RhcnQ6IGlkeCwgZW5kOiBpZHggKyBtWzBdLmxlbmd0aCwgbGFiZWw6ICdQSUknIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNwYW5zO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJyZWRhY3Rpb25zRnJvbUZpbmRpbmdzIiwidGV4dCIsImZpbmRpbmdzIiwic3BhbnMiLCJmIiwidmVyZGljdCIsImVtYWlsUmUiLCJtIiwibWF0Y2hBbGwiLCJpZHgiLCJpbmRleCIsInB1c2giLCJzdGFydCIsImVuZCIsImxlbmd0aCIsImxhYmVsIiwicGhvbmVSZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/core/redactionFromFindings.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/core/sortFindings.ts":
/*!******************************************!*\
  !*** ../scing/bane/core/sortFindings.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sortFindings: () => (/* binding */ sortFindings)\n/* harmony export */ });\nconst sRank = {\n    low: 1,\n    medium: 2,\n    high: 3,\n    critical: 4\n};\nconst vRank = {\n    allow: 1,\n    sanitize: 2,\n    review: 3,\n    deny: 4\n};\nfunction sortFindings(findings) {\n    return [\n        ...findings\n    ].sort((a, b)=>{\n        const sd = sRank[b.severity] - sRank[a.severity];\n        if (sd !== 0) return sd;\n        const vd = vRank[b.verdict] - vRank[a.verdict];\n        if (vd !== 0) return vd;\n        return a.id.localeCompare(b.id);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2NvcmUvc29ydEZpbmRpbmdzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFQSxNQUFNQSxRQUFzQztJQUFFQyxLQUFLO0lBQUdDLFFBQVE7SUFBR0MsTUFBTTtJQUFHQyxVQUFVO0FBQUU7QUFDdEYsTUFBTUMsUUFBcUM7SUFBRUMsT0FBTztJQUFHQyxVQUFVO0lBQUdDLFFBQVE7SUFBR0MsTUFBTTtBQUFFO0FBRWhGLFNBQVNDLGFBQWFDLFFBQXVCO0lBQ2xELE9BQU87V0FBSUE7S0FBUyxDQUFDQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7UUFDNUIsTUFBTUMsS0FBS2YsS0FBSyxDQUFDYyxFQUFFRSxRQUFRLENBQUMsR0FBR2hCLEtBQUssQ0FBQ2EsRUFBRUcsUUFBUSxDQUFDO1FBQ2hELElBQUlELE9BQU8sR0FBRyxPQUFPQTtRQUNyQixNQUFNRSxLQUFLWixLQUFLLENBQUNTLEVBQUVJLE9BQU8sQ0FBQyxHQUFHYixLQUFLLENBQUNRLEVBQUVLLE9BQU8sQ0FBQztRQUM5QyxJQUFJRCxPQUFPLEdBQUcsT0FBT0E7UUFDckIsT0FBT0osRUFBRU0sRUFBRSxDQUFDQyxhQUFhLENBQUNOLEVBQUVLLEVBQUU7SUFDaEM7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxcY29yZVxcc29ydEZpbmRpbmdzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFuZUZpbmRpbmcsIEJhbmVTZXZlcml0eSwgQmFuZVZlcmRpY3QgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5jb25zdCBzUmFuazogUmVjb3JkPEJhbmVTZXZlcml0eSwgbnVtYmVyPiA9IHsgbG93OiAxLCBtZWRpdW06IDIsIGhpZ2g6IDMsIGNyaXRpY2FsOiA0IH07XHJcbmNvbnN0IHZSYW5rOiBSZWNvcmQ8QmFuZVZlcmRpY3QsIG51bWJlcj4gPSB7IGFsbG93OiAxLCBzYW5pdGl6ZTogMiwgcmV2aWV3OiAzLCBkZW55OiA0IH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc29ydEZpbmRpbmdzKGZpbmRpbmdzOiBCYW5lRmluZGluZ1tdKTogQmFuZUZpbmRpbmdbXSB7XHJcbiAgcmV0dXJuIFsuLi5maW5kaW5nc10uc29ydCgoYSwgYikgPT4ge1xyXG4gICAgY29uc3Qgc2QgPSBzUmFua1tiLnNldmVyaXR5XSAtIHNSYW5rW2Euc2V2ZXJpdHldO1xyXG4gICAgaWYgKHNkICE9PSAwKSByZXR1cm4gc2Q7XHJcbiAgICBjb25zdCB2ZCA9IHZSYW5rW2IudmVyZGljdF0gLSB2UmFua1thLnZlcmRpY3RdO1xyXG4gICAgaWYgKHZkICE9PSAwKSByZXR1cm4gdmQ7XHJcbiAgICByZXR1cm4gYS5pZC5sb2NhbGVDb21wYXJlKGIuaWQpO1xyXG4gIH0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzUmFuayIsImxvdyIsIm1lZGl1bSIsImhpZ2giLCJjcml0aWNhbCIsInZSYW5rIiwiYWxsb3ciLCJzYW5pdGl6ZSIsInJldmlldyIsImRlbnkiLCJzb3J0RmluZGluZ3MiLCJmaW5kaW5ncyIsInNvcnQiLCJhIiwiYiIsInNkIiwic2V2ZXJpdHkiLCJ2ZCIsInZlcmRpY3QiLCJpZCIsImxvY2FsZUNvbXBhcmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/core/sortFindings.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/integrations/httpMiddleware.ts":
/*!****************************************************!*\
  !*** ../scing/bane/integrations/httpMiddleware.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeBaneHttpGuard: () => (/* binding */ makeBaneHttpGuard)\n/* harmony export */ });\n/* harmony import */ var _runtime_liveBaneEngine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/liveBaneEngine */ \"(api-node)/../scing/bane/runtime/liveBaneEngine.ts\");\n\nfunction makeBaneHttpGuard(config) {\n    const engine = (0,_runtime_liveBaneEngine__WEBPACK_IMPORTED_MODULE_0__.createLiveBaneEngine)(config);\n    return function guard(req) {\n        const input = {\n            text: req.bodyText ?? '',\n            req: {\n                route: req.path ?? 'http:unknown',\n                requiredCapability: 'bane:invoke',\n                auth: {\n                    identityId: req.identityId,\n                    sessionId: req.sessionId,\n                    ipHash: req.ipHash,\n                    capabilities: req.capabilities,\n                    isAuthenticated: Boolean(req.identityId),\n                    sessionIntegrity: req.sessionIntegrity\n                }\n            }\n        };\n        const out = engine.evaluate(input);\n        if (out.verdict === 'deny') {\n            const status = out.enforcementLevel === 4 ? 423 : out.enforcementLevel === 5 ? 403 : 403;\n            return {\n                ok: false,\n                status,\n                message: out.publicMessage ?? 'Access denied by policy.',\n                traceId: out.traceId,\n                retryAfterMs: out.throttle && out.throttle.action === 'block' ? out.throttle.retryAfterMs : undefined\n            };\n        }\n        if (out.verdict === 'review') {\n            return {\n                ok: false,\n                status: 401,\n                message: out.publicMessage ?? 'Additional authorization required.',\n                traceId: out.traceId\n            };\n        }\n        return {\n            ok: true,\n            traceId: out.traceId\n        };\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2ludGVncmF0aW9ucy9odHRwTWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVpRTtBQWlCMUQsU0FBU0Msa0JBQWtCQyxNQUF5QjtJQUN6RCxNQUFNQyxTQUFTSCw2RUFBb0JBLENBQUNFO0lBRXBDLE9BQU8sU0FBU0UsTUFBTUMsR0FBb0I7UUFDeEMsTUFBTUMsUUFBbUI7WUFDdkJDLE1BQU1GLElBQUlHLFFBQVEsSUFBSTtZQUN0QkgsS0FBSztnQkFDSEksT0FBT0osSUFBSUssSUFBSSxJQUFJO2dCQUNuQkMsb0JBQW9CO2dCQUNwQkMsTUFBTTtvQkFDSkMsWUFBWVIsSUFBSVEsVUFBVTtvQkFDMUJDLFdBQVdULElBQUlTLFNBQVM7b0JBQ3hCQyxRQUFRVixJQUFJVSxNQUFNO29CQUNsQkMsY0FBY1gsSUFBSVcsWUFBWTtvQkFDOUJDLGlCQUFpQkMsUUFBUWIsSUFBSVEsVUFBVTtvQkFDdkNNLGtCQUFrQmQsSUFBSWMsZ0JBQWdCO2dCQUN4QztZQUNGO1FBQ0Y7UUFFQSxNQUFNQyxNQUFNakIsT0FBT2tCLFFBQVEsQ0FBQ2Y7UUFFNUIsSUFBSWMsSUFBSUUsT0FBTyxLQUFLLFFBQVE7WUFDMUIsTUFBTUMsU0FBU0gsSUFBSUksZ0JBQWdCLEtBQUssSUFBSSxNQUFNSixJQUFJSSxnQkFBZ0IsS0FBSyxJQUFJLE1BQU07WUFDckYsT0FBTztnQkFDTEMsSUFBSTtnQkFDSkY7Z0JBQ0FHLFNBQVNOLElBQUlPLGFBQWEsSUFBSTtnQkFDOUJDLFNBQVNSLElBQUlRLE9BQU87Z0JBQ3BCQyxjQUFjVCxJQUFJVSxRQUFRLElBQUlWLElBQUlVLFFBQVEsQ0FBQ0MsTUFBTSxLQUFLLFVBQVVYLElBQUlVLFFBQVEsQ0FBQ0QsWUFBWSxHQUFHRztZQUM5RjtRQUNGO1FBRUEsSUFBSVosSUFBSUUsT0FBTyxLQUFLLFVBQVU7WUFDNUIsT0FBTztnQkFDTEcsSUFBSTtnQkFDSkYsUUFBUTtnQkFDUkcsU0FBU04sSUFBSU8sYUFBYSxJQUFJO2dCQUM5QkMsU0FBU1IsSUFBSVEsT0FBTztZQUN0QjtRQUNGO1FBRUEsT0FBTztZQUFFSCxJQUFJO1lBQU1HLFNBQVNSLElBQUlRLE9BQU87UUFBQztJQUMxQztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxpbnRlZ3JhdGlvbnNcXGh0dHBNaWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFuZUlucHV0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IEJhbmVSdW50aW1lQ29uZmlnIH0gZnJvbSAnLi4vcnVudGltZS9jb25maWcnO1xyXG5pbXBvcnQgeyBjcmVhdGVMaXZlQmFuZUVuZ2luZSB9IGZyb20gJy4uL3J1bnRpbWUvbGl2ZUJhbmVFbmdpbmUnO1xyXG5cclxuZXhwb3J0IHR5cGUgQmFuZUh0dHBSZXF1ZXN0ID0ge1xyXG4gIHBhdGg/OiBzdHJpbmc7XHJcbiAgaGVhZGVycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD47XHJcbiAgYm9keVRleHQ/OiBzdHJpbmc7XHJcbiAgaWRlbnRpdHlJZD86IHN0cmluZztcclxuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XHJcbiAgaXBIYXNoPzogc3RyaW5nO1xyXG4gIGNhcGFiaWxpdGllcz86IHN0cmluZ1tdO1xyXG4gIHNlc3Npb25JbnRlZ3JpdHk/OiB7IG5vbmNlT2s/OiBib29sZWFuOyBzaWduYXR1cmVPaz86IGJvb2xlYW47IHRva2VuRnJlc2g/OiBib29sZWFuIH07XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBCYW5lSHR0cERlY2lzaW9uID1cclxuICB8IHsgb2s6IHRydWU7IHRyYWNlSWQ6IHN0cmluZyB9XHJcbiAgfCB7IG9rOiBmYWxzZTsgc3RhdHVzOiBudW1iZXI7IG1lc3NhZ2U6IHN0cmluZzsgdHJhY2VJZDogc3RyaW5nOyByZXRyeUFmdGVyTXM/OiBudW1iZXIgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQmFuZUh0dHBHdWFyZChjb25maWc6IEJhbmVSdW50aW1lQ29uZmlnKSB7XHJcbiAgY29uc3QgZW5naW5lID0gY3JlYXRlTGl2ZUJhbmVFbmdpbmUoY29uZmlnKTtcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uIGd1YXJkKHJlcTogQmFuZUh0dHBSZXF1ZXN0KTogQmFuZUh0dHBEZWNpc2lvbiB7XHJcbiAgICBjb25zdCBpbnB1dDogQmFuZUlucHV0ID0ge1xyXG4gICAgICB0ZXh0OiByZXEuYm9keVRleHQgPz8gJycsXHJcbiAgICAgIHJlcToge1xyXG4gICAgICAgIHJvdXRlOiByZXEucGF0aCA/PyAnaHR0cDp1bmtub3duJyxcclxuICAgICAgICByZXF1aXJlZENhcGFiaWxpdHk6ICdiYW5lOmludm9rZScsXHJcbiAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgaWRlbnRpdHlJZDogcmVxLmlkZW50aXR5SWQsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHJlcS5zZXNzaW9uSWQsXHJcbiAgICAgICAgICBpcEhhc2g6IHJlcS5pcEhhc2gsXHJcbiAgICAgICAgICBjYXBhYmlsaXRpZXM6IHJlcS5jYXBhYmlsaXRpZXMsXHJcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IEJvb2xlYW4ocmVxLmlkZW50aXR5SWQpLFxyXG4gICAgICAgICAgc2Vzc2lvbkludGVncml0eTogcmVxLnNlc3Npb25JbnRlZ3JpdHksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb3V0ID0gZW5naW5lLmV2YWx1YXRlKGlucHV0KTtcclxuXHJcbiAgICBpZiAob3V0LnZlcmRpY3QgPT09ICdkZW55Jykge1xyXG4gICAgICBjb25zdCBzdGF0dXMgPSBvdXQuZW5mb3JjZW1lbnRMZXZlbCA9PT0gNCA/IDQyMyA6IG91dC5lbmZvcmNlbWVudExldmVsID09PSA1ID8gNDAzIDogNDAzO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG9rOiBmYWxzZSxcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgbWVzc2FnZTogb3V0LnB1YmxpY01lc3NhZ2UgPz8gJ0FjY2VzcyBkZW5pZWQgYnkgcG9saWN5LicsXHJcbiAgICAgICAgdHJhY2VJZDogb3V0LnRyYWNlSWQsXHJcbiAgICAgICAgcmV0cnlBZnRlck1zOiBvdXQudGhyb3R0bGUgJiYgb3V0LnRocm90dGxlLmFjdGlvbiA9PT0gJ2Jsb2NrJyA/IG91dC50aHJvdHRsZS5yZXRyeUFmdGVyTXMgOiB1bmRlZmluZWQsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG91dC52ZXJkaWN0ID09PSAncmV2aWV3Jykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG9rOiBmYWxzZSxcclxuICAgICAgICBzdGF0dXM6IDQwMSxcclxuICAgICAgICBtZXNzYWdlOiBvdXQucHVibGljTWVzc2FnZSA/PyAnQWRkaXRpb25hbCBhdXRob3JpemF0aW9uIHJlcXVpcmVkLicsXHJcbiAgICAgICAgdHJhY2VJZDogb3V0LnRyYWNlSWQsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgb2s6IHRydWUsIHRyYWNlSWQ6IG91dC50cmFjZUlkIH07XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlTGl2ZUJhbmVFbmdpbmUiLCJtYWtlQmFuZUh0dHBHdWFyZCIsImNvbmZpZyIsImVuZ2luZSIsImd1YXJkIiwicmVxIiwiaW5wdXQiLCJ0ZXh0IiwiYm9keVRleHQiLCJyb3V0ZSIsInBhdGgiLCJyZXF1aXJlZENhcGFiaWxpdHkiLCJhdXRoIiwiaWRlbnRpdHlJZCIsInNlc3Npb25JZCIsImlwSGFzaCIsImNhcGFiaWxpdGllcyIsImlzQXV0aGVudGljYXRlZCIsIkJvb2xlYW4iLCJzZXNzaW9uSW50ZWdyaXR5Iiwib3V0IiwiZXZhbHVhdGUiLCJ2ZXJkaWN0Iiwic3RhdHVzIiwiZW5mb3JjZW1lbnRMZXZlbCIsIm9rIiwibWVzc2FnZSIsInB1YmxpY01lc3NhZ2UiLCJ0cmFjZUlkIiwicmV0cnlBZnRlck1zIiwidGhyb3R0bGUiLCJhY3Rpb24iLCJ1bmRlZmluZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/integrations/httpMiddleware.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/integrations/toolGuard.ts":
/*!***********************************************!*\
  !*** ../scing/bane/integrations/toolGuard.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeBaneToolGuard: () => (/* binding */ makeBaneToolGuard)\n/* harmony export */ });\n/* harmony import */ var _runtime_liveBaneEngine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runtime/liveBaneEngine */ \"(api-node)/../scing/bane/runtime/liveBaneEngine.ts\");\n\nfunction makeBaneToolGuard(config) {\n    const engine = (0,_runtime_liveBaneEngine__WEBPACK_IMPORTED_MODULE_0__.createLiveBaneEngine)(config);\n    return function guard(ctx) {\n        const input = {\n            text: ctx.payloadText,\n            req: {\n                route: `tool:${ctx.toolName}`,\n                requiredCapability: ctx.requiredCapability,\n                auth: {\n                    identityId: ctx.identityId,\n                    sessionId: ctx.sessionId,\n                    ipHash: ctx.ipHash,\n                    capabilities: ctx.capabilities,\n                    isAuthenticated: Boolean(ctx.identityId),\n                    sessionIntegrity: ctx.sessionIntegrity\n                }\n            }\n        };\n        const out = engine.evaluate(input);\n        if (out.verdict === 'deny' || out.verdict === 'review') {\n            return {\n                ok: false,\n                traceId: out.traceId,\n                message: out.publicMessage ?? 'Tool invocation blocked by policy.'\n            };\n        }\n        return {\n            ok: true,\n            traceId: out.traceId\n        };\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL2ludGVncmF0aW9ucy90b29sR3VhcmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFaUU7QUFpQjFELFNBQVNDLGtCQUFrQkMsTUFBeUI7SUFDekQsTUFBTUMsU0FBU0gsNkVBQW9CQSxDQUFDRTtJQUVwQyxPQUFPLFNBQVNFLE1BQU1DLEdBQW9CO1FBQ3hDLE1BQU1DLFFBQW1CO1lBQ3ZCQyxNQUFNRixJQUFJRyxXQUFXO1lBQ3JCQyxLQUFLO2dCQUNIQyxPQUFPLENBQUMsS0FBSyxFQUFFTCxJQUFJTSxRQUFRLEVBQUU7Z0JBQzdCQyxvQkFBb0JQLElBQUlPLGtCQUFrQjtnQkFDMUNDLE1BQU07b0JBQ0pDLFlBQVlULElBQUlTLFVBQVU7b0JBQzFCQyxXQUFXVixJQUFJVSxTQUFTO29CQUN4QkMsUUFBUVgsSUFBSVcsTUFBTTtvQkFDbEJDLGNBQWNaLElBQUlZLFlBQVk7b0JBQzlCQyxpQkFBaUJDLFFBQVFkLElBQUlTLFVBQVU7b0JBQ3ZDTSxrQkFBa0JmLElBQUllLGdCQUFnQjtnQkFDeEM7WUFDRjtRQUNGO1FBRUEsTUFBTUMsTUFBTWxCLE9BQU9tQixRQUFRLENBQUNoQjtRQUM1QixJQUFJZSxJQUFJRSxPQUFPLEtBQUssVUFBVUYsSUFBSUUsT0FBTyxLQUFLLFVBQVU7WUFDdEQsT0FBTztnQkFBRUMsSUFBSTtnQkFBT0MsU0FBU0osSUFBSUksT0FBTztnQkFBRUMsU0FBU0wsSUFBSU0sYUFBYSxJQUFJO1lBQXFDO1FBQy9HO1FBRUEsT0FBTztZQUFFSCxJQUFJO1lBQU1DLFNBQVNKLElBQUlJLE9BQU87UUFBQztJQUMxQztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxpbnRlZ3JhdGlvbnNcXHRvb2xHdWFyZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVJbnB1dCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBCYW5lUnVudGltZUNvbmZpZyB9IGZyb20gJy4uL3J1bnRpbWUvY29uZmlnJztcclxuaW1wb3J0IHsgY3JlYXRlTGl2ZUJhbmVFbmdpbmUgfSBmcm9tICcuLi9ydW50aW1lL2xpdmVCYW5lRW5naW5lJztcclxuXHJcbmV4cG9ydCB0eXBlIFRvb2xDYWxsQ29udGV4dCA9IHtcclxuICB0b29sTmFtZTogc3RyaW5nO1xyXG4gIHBheWxvYWRUZXh0OiBzdHJpbmc7XHJcbiAgaWRlbnRpdHlJZD86IHN0cmluZztcclxuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XHJcbiAgaXBIYXNoPzogc3RyaW5nO1xyXG4gIGNhcGFiaWxpdGllcz86IHN0cmluZ1tdO1xyXG4gIHNlc3Npb25JbnRlZ3JpdHk/OiB7IG5vbmNlT2s/OiBib29sZWFuOyBzaWduYXR1cmVPaz86IGJvb2xlYW47IHRva2VuRnJlc2g/OiBib29sZWFuIH07XHJcbiAgcmVxdWlyZWRDYXBhYmlsaXR5OiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBUb29sR3VhcmREZWNpc2lvbiA9XHJcbiAgfCB7IG9rOiB0cnVlOyB0cmFjZUlkOiBzdHJpbmcgfVxyXG4gIHwgeyBvazogZmFsc2U7IHRyYWNlSWQ6IHN0cmluZzsgbWVzc2FnZTogc3RyaW5nIH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUJhbmVUb29sR3VhcmQoY29uZmlnOiBCYW5lUnVudGltZUNvbmZpZykge1xyXG4gIGNvbnN0IGVuZ2luZSA9IGNyZWF0ZUxpdmVCYW5lRW5naW5lKGNvbmZpZyk7XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbiBndWFyZChjdHg6IFRvb2xDYWxsQ29udGV4dCk6IFRvb2xHdWFyZERlY2lzaW9uIHtcclxuICAgIGNvbnN0IGlucHV0OiBCYW5lSW5wdXQgPSB7XHJcbiAgICAgIHRleHQ6IGN0eC5wYXlsb2FkVGV4dCxcclxuICAgICAgcmVxOiB7XHJcbiAgICAgICAgcm91dGU6IGB0b29sOiR7Y3R4LnRvb2xOYW1lfWAsXHJcbiAgICAgICAgcmVxdWlyZWRDYXBhYmlsaXR5OiBjdHgucmVxdWlyZWRDYXBhYmlsaXR5LFxyXG4gICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgIGlkZW50aXR5SWQ6IGN0eC5pZGVudGl0eUlkLFxyXG4gICAgICAgICAgc2Vzc2lvbklkOiBjdHguc2Vzc2lvbklkLFxyXG4gICAgICAgICAgaXBIYXNoOiBjdHguaXBIYXNoLFxyXG4gICAgICAgICAgY2FwYWJpbGl0aWVzOiBjdHguY2FwYWJpbGl0aWVzLFxyXG4gICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBCb29sZWFuKGN0eC5pZGVudGl0eUlkKSxcclxuICAgICAgICAgIHNlc3Npb25JbnRlZ3JpdHk6IGN0eC5zZXNzaW9uSW50ZWdyaXR5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG91dCA9IGVuZ2luZS5ldmFsdWF0ZShpbnB1dCk7XHJcbiAgICBpZiAob3V0LnZlcmRpY3QgPT09ICdkZW55JyB8fCBvdXQudmVyZGljdCA9PT0gJ3JldmlldycpIHtcclxuICAgICAgcmV0dXJuIHsgb2s6IGZhbHNlLCB0cmFjZUlkOiBvdXQudHJhY2VJZCwgbWVzc2FnZTogb3V0LnB1YmxpY01lc3NhZ2UgPz8gJ1Rvb2wgaW52b2NhdGlvbiBibG9ja2VkIGJ5IHBvbGljeS4nIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgb2s6IHRydWUsIHRyYWNlSWQ6IG91dC50cmFjZUlkIH07XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlTGl2ZUJhbmVFbmdpbmUiLCJtYWtlQmFuZVRvb2xHdWFyZCIsImNvbmZpZyIsImVuZ2luZSIsImd1YXJkIiwiY3R4IiwiaW5wdXQiLCJ0ZXh0IiwicGF5bG9hZFRleHQiLCJyZXEiLCJyb3V0ZSIsInRvb2xOYW1lIiwicmVxdWlyZWRDYXBhYmlsaXR5IiwiYXV0aCIsImlkZW50aXR5SWQiLCJzZXNzaW9uSWQiLCJpcEhhc2giLCJjYXBhYmlsaXRpZXMiLCJpc0F1dGhlbnRpY2F0ZWQiLCJCb29sZWFuIiwic2Vzc2lvbkludGVncml0eSIsIm91dCIsImV2YWx1YXRlIiwidmVyZGljdCIsIm9rIiwidHJhY2VJZCIsIm1lc3NhZ2UiLCJwdWJsaWNNZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/integrations/toolGuard.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/policy/banePolicy.ts":
/*!******************************************!*\
  !*** ../scing/bane/policy/banePolicy.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   policyForProfile: () => (/* binding */ policyForProfile)\n/* harmony export */ });\n/* harmony import */ var _profiles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./profiles */ \"(api-node)/../scing/bane/policy/profiles.ts\");\n\nfunction policyForProfile(profileId) {\n    const id = profileId?.trim() || 'bane_fog_v1';\n    const profile = _profiles__WEBPACK_IMPORTED_MODULE_0__.BANE_POLICY_PROFILES[id] ?? _profiles__WEBPACK_IMPORTED_MODULE_0__.BANE_POLICY_PROFILES['bane_fog_v1'];\n    const d = profile.defaults;\n    return {\n        strictMode: d.strictMode,\n        defaultVerdict: d.defaultVerdict === 'deny' ? 'deny' : 'allow',\n        escalationEnabled: d.escalationEnabled,\n        quarantineOnDeny: d.quarantineOnDeny,\n        lockoutOnRepeat: d.lockoutOnRepeat,\n        incidentOnCritical: d.incidentOnCritical\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3BvbGljeS9iYW5lUG9saWN5LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBVzNDLFNBQVNDLGlCQUFpQkMsU0FBaUI7SUFDaEQsTUFBTUMsS0FBS0QsV0FBV0UsVUFBVTtJQUNoQyxNQUFNQyxVQUFVTCwyREFBb0IsQ0FBQ0csR0FBRyxJQUFJSCwyREFBb0IsQ0FBQyxjQUFjO0lBQy9FLE1BQU1NLElBQUlELFFBQVFFLFFBQVE7SUFDMUIsT0FBTztRQUNMQyxZQUFZRixFQUFFRSxVQUFVO1FBQ3hCQyxnQkFBZ0JILEVBQUVHLGNBQWMsS0FBSyxTQUFTLFNBQVM7UUFDdkRDLG1CQUFtQkosRUFBRUksaUJBQWlCO1FBQ3RDQyxrQkFBa0JMLEVBQUVLLGdCQUFnQjtRQUNwQ0MsaUJBQWlCTixFQUFFTSxlQUFlO1FBQ2xDQyxvQkFBb0JQLEVBQUVPLGtCQUFrQjtJQUMxQztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxwb2xpY3lcXGJhbmVQb2xpY3kudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQkFORV9QT0xJQ1lfUFJPRklMRVMgfSBmcm9tICcuL3Byb2ZpbGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIFBvbGljeUhpbnRzID0ge1xyXG4gIHN0cmljdE1vZGU6IGJvb2xlYW47XHJcbiAgZGVmYXVsdFZlcmRpY3Q6ICdkZW55JyB8ICdhbGxvdyc7XHJcbiAgZXNjYWxhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgcXVhcmFudGluZU9uRGVueTogYm9vbGVhbjtcclxuICBsb2Nrb3V0T25SZXBlYXQ6IGJvb2xlYW47XHJcbiAgaW5jaWRlbnRPbkNyaXRpY2FsOiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvbGljeUZvclByb2ZpbGUocHJvZmlsZUlkOiBzdHJpbmcpOiBQb2xpY3lIaW50cyB7XHJcbiAgY29uc3QgaWQgPSBwcm9maWxlSWQ/LnRyaW0oKSB8fCAnYmFuZV9mb2dfdjEnO1xyXG4gIGNvbnN0IHByb2ZpbGUgPSBCQU5FX1BPTElDWV9QUk9GSUxFU1tpZF0gPz8gQkFORV9QT0xJQ1lfUFJPRklMRVNbJ2JhbmVfZm9nX3YxJ107XHJcbiAgY29uc3QgZCA9IHByb2ZpbGUuZGVmYXVsdHM7XHJcbiAgcmV0dXJuIHtcclxuICAgIHN0cmljdE1vZGU6IGQuc3RyaWN0TW9kZSxcclxuICAgIGRlZmF1bHRWZXJkaWN0OiBkLmRlZmF1bHRWZXJkaWN0ID09PSAnZGVueScgPyAnZGVueScgOiAnYWxsb3cnLFxyXG4gICAgZXNjYWxhdGlvbkVuYWJsZWQ6IGQuZXNjYWxhdGlvbkVuYWJsZWQsXHJcbiAgICBxdWFyYW50aW5lT25EZW55OiBkLnF1YXJhbnRpbmVPbkRlbnksXHJcbiAgICBsb2Nrb3V0T25SZXBlYXQ6IGQubG9ja291dE9uUmVwZWF0LFxyXG4gICAgaW5jaWRlbnRPbkNyaXRpY2FsOiBkLmluY2lkZW50T25Dcml0aWNhbCxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJCQU5FX1BPTElDWV9QUk9GSUxFUyIsInBvbGljeUZvclByb2ZpbGUiLCJwcm9maWxlSWQiLCJpZCIsInRyaW0iLCJwcm9maWxlIiwiZCIsImRlZmF1bHRzIiwic3RyaWN0TW9kZSIsImRlZmF1bHRWZXJkaWN0IiwiZXNjYWxhdGlvbkVuYWJsZWQiLCJxdWFyYW50aW5lT25EZW55IiwibG9ja291dE9uUmVwZWF0IiwiaW5jaWRlbnRPbkNyaXRpY2FsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/policy/banePolicy.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/policy/profiles.ts":
/*!****************************************!*\
  !*** ../scing/bane/policy/profiles.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BANE_POLICY_PROFILES: () => (/* binding */ BANE_POLICY_PROFILES)\n/* harmony export */ });\nconst BANE_POLICY_PROFILES = {\n    bane_fog_v1: {\n        id: 'bane_fog_v1',\n        name: 'BANE Fear-of-God Mode',\n        version: '1.0.0',\n        rulesetId: 'fog-core',\n        defaults: {\n            defaultVerdict: 'deny',\n            strictMode: true,\n            escalationEnabled: true,\n            quarantineOnDeny: true,\n            lockoutOnRepeat: true,\n            incidentOnCritical: true\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3BvbGljeS9wcm9maWxlcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBZU8sTUFBTUEsdUJBQTBEO0lBQ3JFQyxhQUFhO1FBQ1hDLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxTQUFTO1FBQ1RDLFdBQVc7UUFDWEMsVUFBVTtZQUNSQyxnQkFBZ0I7WUFDaEJDLFlBQVk7WUFDWkMsbUJBQW1CO1lBQ25CQyxrQkFBa0I7WUFDbEJDLGlCQUFpQjtZQUNqQkMsb0JBQW9CO1FBQ3RCO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxwb2xpY3lcXHByb2ZpbGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEJhbmVQb2xpY3lQcm9maWxlID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHZlcnNpb246IHN0cmluZztcclxuICBydWxlc2V0SWQ6IHN0cmluZztcclxuICBkZWZhdWx0czoge1xyXG4gICAgZGVmYXVsdFZlcmRpY3Q6ICdkZW55JztcclxuICAgIHN0cmljdE1vZGU6IGJvb2xlYW47XHJcbiAgICBlc2NhbGF0aW9uRW5hYmxlZDogYm9vbGVhbjtcclxuICAgIHF1YXJhbnRpbmVPbkRlbnk6IGJvb2xlYW47XHJcbiAgICBsb2Nrb3V0T25SZXBlYXQ6IGJvb2xlYW47XHJcbiAgICBpbmNpZGVudE9uQ3JpdGljYWw6IGJvb2xlYW47XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBCQU5FX1BPTElDWV9QUk9GSUxFUzogUmVjb3JkPHN0cmluZywgQmFuZVBvbGljeVByb2ZpbGU+ID0ge1xyXG4gIGJhbmVfZm9nX3YxOiB7XHJcbiAgICBpZDogJ2JhbmVfZm9nX3YxJyxcclxuICAgIG5hbWU6ICdCQU5FIEZlYXItb2YtR29kIE1vZGUnLFxyXG4gICAgdmVyc2lvbjogJzEuMC4wJyxcclxuICAgIHJ1bGVzZXRJZDogJ2ZvZy1jb3JlJyxcclxuICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgIGRlZmF1bHRWZXJkaWN0OiAnZGVueScsXHJcbiAgICAgIHN0cmljdE1vZGU6IHRydWUsXHJcbiAgICAgIGVzY2FsYXRpb25FbmFibGVkOiB0cnVlLFxyXG4gICAgICBxdWFyYW50aW5lT25EZW55OiB0cnVlLFxyXG4gICAgICBsb2Nrb3V0T25SZXBlYXQ6IHRydWUsXHJcbiAgICAgIGluY2lkZW50T25Dcml0aWNhbDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxufTtcclxuIl0sIm5hbWVzIjpbIkJBTkVfUE9MSUNZX1BST0ZJTEVTIiwiYmFuZV9mb2dfdjEiLCJpZCIsIm5hbWUiLCJ2ZXJzaW9uIiwicnVsZXNldElkIiwiZGVmYXVsdHMiLCJkZWZhdWx0VmVyZGljdCIsInN0cmljdE1vZGUiLCJlc2NhbGF0aW9uRW5hYmxlZCIsInF1YXJhbnRpbmVPbkRlbnkiLCJsb2Nrb3V0T25SZXBlYXQiLCJpbmNpZGVudE9uQ3JpdGljYWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/policy/profiles.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/containment.ts":
/*!********************************************!*\
  !*** ../scing/bane/runtime/containment.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   disableGlobalLockdown: () => (/* binding */ disableGlobalLockdown),\n/* harmony export */   enableGlobalLockdown: () => (/* binding */ enableGlobalLockdown),\n/* harmony export */   isGlobalLockdown: () => (/* binding */ isGlobalLockdown)\n/* harmony export */ });\nlet GLOBAL_LOCKDOWN = false;\nlet LOCKDOWN_REASON = 'unspecified';\nfunction enableGlobalLockdown(reason) {\n    GLOBAL_LOCKDOWN = true;\n    LOCKDOWN_REASON = reason || 'unspecified';\n}\nfunction disableGlobalLockdown() {\n    GLOBAL_LOCKDOWN = false;\n    LOCKDOWN_REASON = 'unspecified';\n}\nfunction isGlobalLockdown() {\n    return GLOBAL_LOCKDOWN ? {\n        active: true,\n        reason: LOCKDOWN_REASON\n    } : {\n        active: false\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvY29udGFpbm1lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBSUEsa0JBQWtCO0FBQ3RCLElBQUlDLGtCQUFrQjtBQUVmLFNBQVNDLHFCQUFxQkMsTUFBYztJQUNqREgsa0JBQWtCO0lBQ2xCQyxrQkFBa0JFLFVBQVU7QUFDOUI7QUFFTyxTQUFTQztJQUNkSixrQkFBa0I7SUFDbEJDLGtCQUFrQjtBQUNwQjtBQUVPLFNBQVNJO0lBQ2QsT0FBT0wsa0JBQWtCO1FBQUVNLFFBQVE7UUFBTUgsUUFBUUY7SUFBZ0IsSUFBSTtRQUFFSyxRQUFRO0lBQU07QUFDdkYiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHJ1bnRpbWVcXGNvbnRhaW5tZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBHTE9CQUxfTE9DS0RPV04gPSBmYWxzZTtcclxubGV0IExPQ0tET1dOX1JFQVNPTiA9ICd1bnNwZWNpZmllZCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlR2xvYmFsTG9ja2Rvd24ocmVhc29uOiBzdHJpbmcpIHtcclxuICBHTE9CQUxfTE9DS0RPV04gPSB0cnVlO1xyXG4gIExPQ0tET1dOX1JFQVNPTiA9IHJlYXNvbiB8fCAndW5zcGVjaWZpZWQnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZUdsb2JhbExvY2tkb3duKCkge1xyXG4gIEdMT0JBTF9MT0NLRE9XTiA9IGZhbHNlO1xyXG4gIExPQ0tET1dOX1JFQVNPTiA9ICd1bnNwZWNpZmllZCc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0dsb2JhbExvY2tkb3duKCk6IHsgYWN0aXZlOiBib29sZWFuOyByZWFzb24/OiBzdHJpbmcgfSB7XHJcbiAgcmV0dXJuIEdMT0JBTF9MT0NLRE9XTiA/IHsgYWN0aXZlOiB0cnVlLCByZWFzb246IExPQ0tET1dOX1JFQVNPTiB9IDogeyBhY3RpdmU6IGZhbHNlIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkdMT0JBTF9MT0NLRE9XTiIsIkxPQ0tET1dOX1JFQVNPTiIsImVuYWJsZUdsb2JhbExvY2tkb3duIiwicmVhc29uIiwiZGlzYWJsZUdsb2JhbExvY2tkb3duIiwiaXNHbG9iYWxMb2NrZG93biIsImFjdGl2ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/containment.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/escalation.ts":
/*!*******************************************!*\
  !*** ../scing/bane/runtime/escalation.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   escalate: () => (/* binding */ escalate)\n/* harmony export */ });\n/* harmony import */ var _riskLedger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./riskLedger */ \"(api-node)/../scing/bane/runtime/riskLedger.ts\");\n\nfunction escalate(identityId, severity) {\n    const rec = (0,_riskLedger__WEBPACK_IMPORTED_MODULE_0__.recordStrike)(identityId, severity);\n    if (severity === 'critical') {\n        (0,_riskLedger__WEBPACK_IMPORTED_MODULE_0__.lockIdentity)(identityId, 60 * 60 * 1000);\n        return 5;\n    }\n    if (rec.strikes >= 3) {\n        (0,_riskLedger__WEBPACK_IMPORTED_MODULE_0__.lockIdentity)(identityId, 15 * 60 * 1000);\n        return 4;\n    }\n    if (rec.strikes === 2) {\n        return 3;\n    }\n    return 2;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvZXNjYWxhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUMwRDtBQUVuRCxTQUFTRSxTQUFTQyxVQUFrQixFQUFFQyxRQUFzQjtJQUNqRSxNQUFNQyxNQUFNTCx5REFBWUEsQ0FBQ0csWUFBWUM7SUFFckMsSUFBSUEsYUFBYSxZQUFZO1FBQzNCSCx5REFBWUEsQ0FBQ0UsWUFBWSxLQUFLLEtBQUs7UUFDbkMsT0FBTztJQUNUO0lBRUEsSUFBSUUsSUFBSUMsT0FBTyxJQUFJLEdBQUc7UUFDcEJMLHlEQUFZQSxDQUFDRSxZQUFZLEtBQUssS0FBSztRQUNuQyxPQUFPO0lBQ1Q7SUFFQSxJQUFJRSxJQUFJQyxPQUFPLEtBQUssR0FBRztRQUNyQixPQUFPO0lBQ1Q7SUFFQSxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHJ1bnRpbWVcXGVzY2FsYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCYW5lRW5mb3JjZW1lbnRMZXZlbCwgQmFuZVNldmVyaXR5IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyByZWNvcmRTdHJpa2UsIGxvY2tJZGVudGl0eSB9IGZyb20gJy4vcmlza0xlZGdlcic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXNjYWxhdGUoaWRlbnRpdHlJZDogc3RyaW5nLCBzZXZlcml0eTogQmFuZVNldmVyaXR5KTogQmFuZUVuZm9yY2VtZW50TGV2ZWwge1xyXG4gIGNvbnN0IHJlYyA9IHJlY29yZFN0cmlrZShpZGVudGl0eUlkLCBzZXZlcml0eSk7XHJcblxyXG4gIGlmIChzZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykge1xyXG4gICAgbG9ja0lkZW50aXR5KGlkZW50aXR5SWQsIDYwICogNjAgKiAxMDAwKTtcclxuICAgIHJldHVybiA1O1xyXG4gIH1cclxuXHJcbiAgaWYgKHJlYy5zdHJpa2VzID49IDMpIHtcclxuICAgIGxvY2tJZGVudGl0eShpZGVudGl0eUlkLCAxNSAqIDYwICogMTAwMCk7XHJcbiAgICByZXR1cm4gNDtcclxuICB9XHJcblxyXG4gIGlmIChyZWMuc3RyaWtlcyA9PT0gMikge1xyXG4gICAgcmV0dXJuIDM7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gMjtcclxufVxyXG4iXSwibmFtZXMiOlsicmVjb3JkU3RyaWtlIiwibG9ja0lkZW50aXR5IiwiZXNjYWxhdGUiLCJpZGVudGl0eUlkIiwic2V2ZXJpdHkiLCJyZWMiLCJzdHJpa2VzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/escalation.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/incident.ts":
/*!*****************************************!*\
  !*** ../scing/bane/runtime/incident.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toIncidentRecord: () => (/* binding */ toIncidentRecord)\n/* harmony export */ });\nfunction toIncidentRecord(out, ctx) {\n    return {\n        traceId: out.traceId,\n        occurredAt: Date.now(),\n        identityId: ctx?.identityId,\n        sessionId: ctx?.sessionId,\n        ipHash: ctx?.ipHash,\n        enforcementLevel: out.enforcementLevel ?? 0,\n        verdict: out.verdict,\n        severity: out.severity,\n        findingsSummary: (out.findings ?? []).map((f)=>({\n                id: f.id,\n                severity: f.severity,\n                verdict: f.verdict\n            }))\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvaW5jaWRlbnQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQWNPLFNBQVNBLGlCQUNkQyxHQUFlLEVBQ2ZDLEdBQWtFO0lBRWxFLE9BQU87UUFDTEMsU0FBU0YsSUFBSUUsT0FBTztRQUNwQkMsWUFBWUMsS0FBS0MsR0FBRztRQUNwQkMsWUFBWUwsS0FBS0s7UUFDakJDLFdBQVdOLEtBQUtNO1FBQ2hCQyxRQUFRUCxLQUFLTztRQUNiQyxrQkFBa0JULElBQUlTLGdCQUFnQixJQUFJO1FBQzFDQyxTQUFTVixJQUFJVSxPQUFPO1FBQ3BCQyxVQUFVWCxJQUFJVyxRQUFRO1FBQ3RCQyxpQkFBaUIsQ0FBQ1osSUFBSWEsUUFBUSxJQUFJLEVBQUUsRUFBRUMsR0FBRyxDQUFDLENBQUNDLElBQU87Z0JBQUVDLElBQUlELEVBQUVDLEVBQUU7Z0JBQUVMLFVBQVVJLEVBQUVKLFFBQVE7Z0JBQUVELFNBQVNLLEVBQUVMLE9BQU87WUFBQztJQUN6RztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxydW50aW1lXFxpbmNpZGVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVPdXRwdXQgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgdHlwZSBCYW5lSW5jaWRlbnRSZWNvcmQgPSB7XHJcbiAgdHJhY2VJZDogc3RyaW5nO1xyXG4gIG9jY3VycmVkQXQ6IG51bWJlcjtcclxuICBpZGVudGl0eUlkPzogc3RyaW5nO1xyXG4gIHNlc3Npb25JZD86IHN0cmluZztcclxuICBpcEhhc2g/OiBzdHJpbmc7XHJcbiAgZW5mb3JjZW1lbnRMZXZlbDogbnVtYmVyO1xyXG4gIHZlcmRpY3Q6IHN0cmluZztcclxuICBzZXZlcml0eTogc3RyaW5nO1xyXG4gIGZpbmRpbmdzU3VtbWFyeTogQXJyYXk8eyBpZDogc3RyaW5nOyBzZXZlcml0eTogc3RyaW5nOyB2ZXJkaWN0OiBzdHJpbmcgfT47XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9JbmNpZGVudFJlY29yZChcclxuICBvdXQ6IEJhbmVPdXRwdXQsXHJcbiAgY3R4PzogeyBpZGVudGl0eUlkPzogc3RyaW5nOyBzZXNzaW9uSWQ/OiBzdHJpbmc7IGlwSGFzaD86IHN0cmluZyB9XHJcbik6IEJhbmVJbmNpZGVudFJlY29yZCB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHRyYWNlSWQ6IG91dC50cmFjZUlkLFxyXG4gICAgb2NjdXJyZWRBdDogRGF0ZS5ub3coKSxcclxuICAgIGlkZW50aXR5SWQ6IGN0eD8uaWRlbnRpdHlJZCxcclxuICAgIHNlc3Npb25JZDogY3R4Py5zZXNzaW9uSWQsXHJcbiAgICBpcEhhc2g6IGN0eD8uaXBIYXNoLFxyXG4gICAgZW5mb3JjZW1lbnRMZXZlbDogb3V0LmVuZm9yY2VtZW50TGV2ZWwgPz8gMCxcclxuICAgIHZlcmRpY3Q6IG91dC52ZXJkaWN0LFxyXG4gICAgc2V2ZXJpdHk6IG91dC5zZXZlcml0eSxcclxuICAgIGZpbmRpbmdzU3VtbWFyeTogKG91dC5maW5kaW5ncyA/PyBbXSkubWFwKChmKSA9PiAoeyBpZDogZi5pZCwgc2V2ZXJpdHk6IGYuc2V2ZXJpdHksIHZlcmRpY3Q6IGYudmVyZGljdCB9KSksXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsidG9JbmNpZGVudFJlY29yZCIsIm91dCIsImN0eCIsInRyYWNlSWQiLCJvY2N1cnJlZEF0IiwiRGF0ZSIsIm5vdyIsImlkZW50aXR5SWQiLCJzZXNzaW9uSWQiLCJpcEhhc2giLCJlbmZvcmNlbWVudExldmVsIiwidmVyZGljdCIsInNldmVyaXR5IiwiZmluZGluZ3NTdW1tYXJ5IiwiZmluZGluZ3MiLCJtYXAiLCJmIiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/incident.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/integrity.ts":
/*!******************************************!*\
  !*** ../scing/bane/runtime/integrity.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkIntegrity: () => (/* binding */ checkIntegrity)\n/* harmony export */ });\nconst seenNonces = new Map();\nfunction checkIntegrity(input) {\n    const auth = input.req?.auth;\n    const nonce = auth?.nonce;\n    const now = Date.now();\n    if (nonce) {\n        const prev = seenNonces.get(nonce);\n        if (prev && now - prev < 10 * 60 * 1000) return {\n            ok: false,\n            code: 'REPLAY'\n        };\n        seenNonces.set(nonce, now);\n        if (seenNonces.size > 10000) {\n            const firstKey = seenNonces.keys().next().value;\n            if (firstKey) seenNonces.delete(firstKey);\n        }\n    }\n    // Signature verification is environment-specific; hook only.\n    // If your gateway provides signature validation upstream, leave this as ok.\n    return {\n        ok: true\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvaW50ZWdyaXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFJQSxNQUFNQSxhQUFhLElBQUlDO0FBRWhCLFNBQVNDLGVBQWVDLEtBQWdCO0lBQzdDLE1BQU1DLE9BQU9ELE1BQU1FLEdBQUcsRUFBRUQ7SUFDeEIsTUFBTUUsUUFBUUYsTUFBTUU7SUFDcEIsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUVwQixJQUFJRCxPQUFPO1FBQ1QsTUFBTUcsT0FBT1QsV0FBV1UsR0FBRyxDQUFDSjtRQUM1QixJQUFJRyxRQUFRRixNQUFNRSxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU87WUFBRUUsSUFBSTtZQUFPQyxNQUFNO1FBQVM7UUFDNUVaLFdBQVdhLEdBQUcsQ0FBQ1AsT0FBT0M7UUFFdEIsSUFBSVAsV0FBV2MsSUFBSSxHQUFHLE9BQVE7WUFDNUIsTUFBTUMsV0FBV2YsV0FBV2dCLElBQUksR0FBR0MsSUFBSSxHQUFHQyxLQUFLO1lBQy9DLElBQUlILFVBQVVmLFdBQVdtQixNQUFNLENBQUNKO1FBQ2xDO0lBQ0Y7SUFFQSw2REFBNkQ7SUFDN0QsNEVBQTRFO0lBQzVFLE9BQU87UUFBRUosSUFBSTtJQUFLO0FBQ3BCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxydW50aW1lXFxpbnRlZ3JpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCYW5lSW5wdXQgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgdHlwZSBJbnRlZ3JpdHlSZXN1bHQgPSB7IG9rOiB0cnVlIH0gfCB7IG9rOiBmYWxzZTsgY29kZTogJ1JFUExBWScgfCAnQkFEX1NJR05BVFVSRScgfTtcclxuXHJcbmNvbnN0IHNlZW5Ob25jZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrSW50ZWdyaXR5KGlucHV0OiBCYW5lSW5wdXQpOiBJbnRlZ3JpdHlSZXN1bHQge1xyXG4gIGNvbnN0IGF1dGggPSBpbnB1dC5yZXE/LmF1dGg7XHJcbiAgY29uc3Qgbm9uY2UgPSBhdXRoPy5ub25jZTtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICBpZiAobm9uY2UpIHtcclxuICAgIGNvbnN0IHByZXYgPSBzZWVuTm9uY2VzLmdldChub25jZSk7XHJcbiAgICBpZiAocHJldiAmJiBub3cgLSBwcmV2IDwgMTAgKiA2MCAqIDEwMDApIHJldHVybiB7IG9rOiBmYWxzZSwgY29kZTogJ1JFUExBWScgfTtcclxuICAgIHNlZW5Ob25jZXMuc2V0KG5vbmNlLCBub3cpO1xyXG5cclxuICAgIGlmIChzZWVuTm9uY2VzLnNpemUgPiAxMF8wMDApIHtcclxuICAgICAgY29uc3QgZmlyc3RLZXkgPSBzZWVuTm9uY2VzLmtleXMoKS5uZXh0KCkudmFsdWUgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgICBpZiAoZmlyc3RLZXkpIHNlZW5Ob25jZXMuZGVsZXRlKGZpcnN0S2V5KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNpZ25hdHVyZSB2ZXJpZmljYXRpb24gaXMgZW52aXJvbm1lbnQtc3BlY2lmaWM7IGhvb2sgb25seS5cclxuICAvLyBJZiB5b3VyIGdhdGV3YXkgcHJvdmlkZXMgc2lnbmF0dXJlIHZhbGlkYXRpb24gdXBzdHJlYW0sIGxlYXZlIHRoaXMgYXMgb2suXHJcbiAgcmV0dXJuIHsgb2s6IHRydWUgfTtcclxufVxyXG4iXSwibmFtZXMiOlsic2Vlbk5vbmNlcyIsIk1hcCIsImNoZWNrSW50ZWdyaXR5IiwiaW5wdXQiLCJhdXRoIiwicmVxIiwibm9uY2UiLCJub3ciLCJEYXRlIiwicHJldiIsImdldCIsIm9rIiwiY29kZSIsInNldCIsInNpemUiLCJmaXJzdEtleSIsImtleXMiLCJuZXh0IiwidmFsdWUiLCJkZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/integrity.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/liveBaneEngine.ts":
/*!***********************************************!*\
  !*** ../scing/bane/runtime/liveBaneEngine.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLiveBaneEngine: () => (/* binding */ createLiveBaneEngine)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _policy_banePolicy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../policy/banePolicy */ \"(api-node)/../scing/bane/policy/banePolicy.ts\");\n/* harmony import */ var _core_detectors_baseline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/detectors.baseline */ \"(api-node)/../scing/bane/core/detectors.baseline.ts\");\n/* harmony import */ var _core_detectors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/detectors */ \"(api-node)/../scing/bane/core/detectors.ts\");\n/* harmony import */ var _core_aggregate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/aggregate */ \"(api-node)/../scing/bane/core/aggregate.ts\");\n/* harmony import */ var _core_sortFindings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/sortFindings */ \"(api-node)/../scing/bane/core/sortFindings.ts\");\n/* harmony import */ var _core_redaction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/redaction */ \"(api-node)/../scing/bane/core/redaction.ts\");\n/* harmony import */ var _core_redactionFromFindings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/redactionFromFindings */ \"(api-node)/../scing/bane/core/redactionFromFindings.ts\");\n/* harmony import */ var _preflight__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./preflight */ \"(api-node)/../scing/bane/runtime/preflight.ts\");\n/* harmony import */ var _escalation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./escalation */ \"(api-node)/../scing/bane/runtime/escalation.ts\");\n/* harmony import */ var _throttle__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./throttle */ \"(api-node)/../scing/bane/runtime/throttle.ts\");\n/* harmony import */ var _incident__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./incident */ \"(api-node)/../scing/bane/runtime/incident.ts\");\n/* harmony import */ var _normalize__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./normalize */ \"(api-node)/../scing/bane/runtime/normalize.ts\");\n/* harmony import */ var _publicResponse__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./publicResponse */ \"(api-node)/../scing/bane/runtime/publicResponse.ts\");\n/* harmony import */ var _safeSideEffects__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./safeSideEffects */ \"(api-node)/../scing/bane/runtime/safeSideEffects.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction traceIdFromEntropy() {\n    if (typeof (node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID) === 'function') return node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID();\n    return node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(16).toString('hex');\n}\nfunction publicMessageFor(params) {\n    if (params.verdict === 'deny') {\n        return params.enforcementLevel >= 4 ? 'Access revoked temporarily due to policy violations. Contact an authorized administrator.' : 'Request denied: unauthorized or unsafe operation. This attempt has been logged.';\n    }\n    if (params.verdict === 'review') {\n        return 'Request restricted by policy. Additional authorization is required.';\n    }\n    return undefined;\n}\nfunction createLiveBaneEngine(config) {\n    const hints = (0,_policy_banePolicy__WEBPACK_IMPORTED_MODULE_1__.policyForProfile)(config.profileId);\n    return {\n        evaluate (input) {\n            const t0 = Date.now();\n            const traceId = traceIdFromEntropy();\n            const normalized = (0,_normalize__WEBPACK_IMPORTED_MODULE_12__.normalizeForDetection)(input);\n            const pre = (0,_preflight__WEBPACK_IMPORTED_MODULE_8__.banePreflight)(config, input, traceId, t0);\n            if (pre) {\n                const auth = input.req?.auth;\n                if (pre.verdict === 'deny') {\n                    (0,_throttle__WEBPACK_IMPORTED_MODULE_10__.noteHostileAttempt)({\n                        identityId: auth?.identityId,\n                        ipHash: auth?.ipHash\n                    });\n                    const throttle = (0,_throttle__WEBPACK_IMPORTED_MODULE_10__.decideThrottle)({\n                        identityId: auth?.identityId,\n                        ipHash: auth?.ipHash\n                    });\n                    pre.throttle = throttle;\n                }\n                pre.findings = (0,_core_sortFindings__WEBPACK_IMPORTED_MODULE_5__.sortFindings)(pre.findings);\n                const final = (0,_publicResponse__WEBPACK_IMPORTED_MODULE_13__.finalizePublicFacing)(pre);\n                (0,_safeSideEffects__WEBPACK_IMPORTED_MODULE_14__.safeSideEffects)(config, input, final);\n                return final;\n            }\n            const detectors = (0,_core_detectors_baseline__WEBPACK_IMPORTED_MODULE_2__.baselineDetectors)();\n            const rawFindings = (0,_core_detectors__WEBPACK_IMPORTED_MODULE_3__.runDetectors)(detectors, normalized.forDetection, hints);\n            const findings = (0,_core_sortFindings__WEBPACK_IMPORTED_MODULE_5__.sortFindings)(rawFindings);\n            const agg = (0,_core_aggregate__WEBPACK_IMPORTED_MODULE_4__.aggregate)(findings);\n            let enforcementLevel = agg.verdict === 'deny' ? 3 : agg.verdict === 'review' ? 2 : agg.verdict === 'sanitize' ? 1 : 0;\n            const identityId = input.req?.auth?.identityId;\n            if (agg.verdict === 'deny' && identityId && hints.escalationEnabled) {\n                enforcementLevel = (0,_escalation__WEBPACK_IMPORTED_MODULE_9__.escalate)(identityId, agg.severity);\n            }\n            const spans = (0,_core_redactionFromFindings__WEBPACK_IMPORTED_MODULE_7__.redactionsFromFindings)(input.text, findings);\n            const safeText = (agg.verdict === 'sanitize' || agg.verdict === 'review') && spans.length ? (0,_core_redaction__WEBPACK_IMPORTED_MODULE_6__.applyRedactions)(input.text, spans) : undefined;\n            const out = {\n                verdict: agg.verdict,\n                severity: agg.severity,\n                findings,\n                redactions: spans.length ? spans : undefined,\n                safeText,\n                traceId,\n                timingMs: Date.now() - t0,\n                enforcementLevel,\n                publicMessage: publicMessageFor({\n                    verdict: agg.verdict,\n                    enforcementLevel\n                })\n            };\n            if (out.verdict === 'deny') {\n                (0,_throttle__WEBPACK_IMPORTED_MODULE_10__.noteHostileAttempt)({\n                    identityId,\n                    ipHash: input.req?.auth?.ipHash\n                });\n                out.throttle = (0,_throttle__WEBPACK_IMPORTED_MODULE_10__.decideThrottle)({\n                    identityId,\n                    ipHash: input.req?.auth?.ipHash\n                });\n            }\n            if (out.enforcementLevel === 5 && hints.incidentOnCritical) {\n                const incident = (0,_incident__WEBPACK_IMPORTED_MODULE_11__.toIncidentRecord)(out, {\n                    identityId,\n                    sessionId: input.req?.auth?.sessionId,\n                    ipHash: input.req?.auth?.ipHash\n                });\n                try {\n                    void config.store?.appendIncident?.(incident).catch(()=>{});\n                } catch  {\n                // swallow\n                }\n            }\n            const final = (0,_publicResponse__WEBPACK_IMPORTED_MODULE_13__.finalizePublicFacing)(out);\n            (0,_safeSideEffects__WEBPACK_IMPORTED_MODULE_14__.safeSideEffects)(config, input, final);\n            return final;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvbGl2ZUJhbmVFbmdpbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFJdUI7QUFDTztBQUNkO0FBQ0g7QUFDTTtBQUNBO0FBQ21CO0FBQzNCO0FBQ0o7QUFDd0I7QUFDbEI7QUFDTTtBQUNJO0FBQ0o7QUFFcEQsU0FBU2dCO0lBQ1AsSUFBSSxPQUFPaEIsK0RBQWlCLEtBQUssWUFBWSxPQUFPQSw2REFBaUI7SUFDckUsT0FBT0EsOERBQWtCLENBQUMsSUFBSW1CLFFBQVEsQ0FBQztBQUN6QztBQUVBLFNBQVNDLGlCQUFpQkMsTUFBb0U7SUFDNUYsSUFBSUEsT0FBT0MsT0FBTyxLQUFLLFFBQVE7UUFDN0IsT0FBT0QsT0FBT0UsZ0JBQWdCLElBQUksSUFDOUIsOEZBQ0E7SUFDTjtJQUNBLElBQUlGLE9BQU9DLE9BQU8sS0FBSyxVQUFVO1FBQy9CLE9BQU87SUFDVDtJQUNBLE9BQU9FO0FBQ1Q7QUFFTyxTQUFTQyxxQkFBcUJDLE1BQXlCO0lBQzVELE1BQU1DLFFBQVExQixvRUFBZ0JBLENBQUN5QixPQUFPRSxTQUFTO0lBRS9DLE9BQU87UUFDTEMsVUFBU0MsS0FBZ0I7WUFDdkIsTUFBTUMsS0FBS0MsS0FBS0MsR0FBRztZQUNuQixNQUFNQyxVQUFVbEI7WUFFaEIsTUFBTW1CLGFBQWF0QixrRUFBcUJBLENBQUNpQjtZQUV6QyxNQUFNTSxNQUFNNUIseURBQWFBLENBQUNrQixRQUFRSSxPQUFPSSxTQUFTSDtZQUNsRCxJQUFJSyxLQUFLO2dCQUNQLE1BQU1DLE9BQU9QLE1BQU1RLEdBQUcsRUFBRUQ7Z0JBQ3hCLElBQUlELElBQUlkLE9BQU8sS0FBSyxRQUFRO29CQUMxQlosOERBQWtCQSxDQUFDO3dCQUFFNkIsWUFBWUYsTUFBTUU7d0JBQVlDLFFBQVFILE1BQU1HO29CQUFPO29CQUN4RSxNQUFNQyxXQUFXOUIsMERBQWNBLENBQUM7d0JBQUU0QixZQUFZRixNQUFNRTt3QkFBWUMsUUFBUUgsTUFBTUc7b0JBQU87b0JBQ3JGSixJQUFJSyxRQUFRLEdBQUdBO2dCQUNqQjtnQkFFQUwsSUFBSU0sUUFBUSxHQUFHckMsZ0VBQVlBLENBQUMrQixJQUFJTSxRQUFRO2dCQUN4QyxNQUFNQyxRQUFRN0Isc0VBQW9CQSxDQUFDc0I7Z0JBQ25DckIsa0VBQWVBLENBQUNXLFFBQVFJLE9BQU9hO2dCQUMvQixPQUFPQTtZQUNUO1lBRUEsTUFBTUMsWUFBWTFDLDJFQUFpQkE7WUFDbkMsTUFBTTJDLGNBQWMxQyw2REFBWUEsQ0FBQ3lDLFdBQVdULFdBQVdXLFlBQVksRUFBRW5CO1lBQ3JFLE1BQU1lLFdBQVdyQyxnRUFBWUEsQ0FBQ3dDO1lBQzlCLE1BQU1FLE1BQU0zQywwREFBU0EsQ0FBQ3NDO1lBRXRCLElBQUluQixtQkFDRndCLElBQUl6QixPQUFPLEtBQUssU0FBUyxJQUFJeUIsSUFBSXpCLE9BQU8sS0FBSyxXQUFXLElBQUl5QixJQUFJekIsT0FBTyxLQUFLLGFBQWEsSUFBSTtZQUUvRixNQUFNaUIsYUFBYVQsTUFBTVEsR0FBRyxFQUFFRCxNQUFNRTtZQUNwQyxJQUFJUSxJQUFJekIsT0FBTyxLQUFLLFVBQVVpQixjQUFjWixNQUFNcUIsaUJBQWlCLEVBQUU7Z0JBQ25FekIsbUJBQW1CZCxxREFBUUEsQ0FBQzhCLFlBQVlRLElBQUlFLFFBQVE7WUFDdEQ7WUFFQSxNQUFNQyxRQUFRM0MsbUZBQXNCQSxDQUFDdUIsTUFBTXFCLElBQUksRUFBRVQ7WUFDakQsTUFBTVUsV0FDSixDQUFDTCxJQUFJekIsT0FBTyxLQUFLLGNBQWN5QixJQUFJekIsT0FBTyxLQUFLLFFBQU8sS0FBTTRCLE1BQU1HLE1BQU0sR0FDcEUvQyxnRUFBZUEsQ0FBQ3dCLE1BQU1xQixJQUFJLEVBQUVELFNBQzVCMUI7WUFFTixNQUFNOEIsTUFBa0I7Z0JBQ3RCaEMsU0FBU3lCLElBQUl6QixPQUFPO2dCQUNwQjJCLFVBQVVGLElBQUlFLFFBQVE7Z0JBQ3RCUDtnQkFDQWEsWUFBWUwsTUFBTUcsTUFBTSxHQUFHSCxRQUFRMUI7Z0JBQ25DNEI7Z0JBQ0FsQjtnQkFDQXNCLFVBQVV4QixLQUFLQyxHQUFHLEtBQUtGO2dCQUN2QlI7Z0JBQ0FrQyxlQUFlckMsaUJBQWlCO29CQUFFRSxTQUFTeUIsSUFBSXpCLE9BQU87b0JBQUVDO2dCQUFpQjtZQUMzRTtZQUVBLElBQUkrQixJQUFJaEMsT0FBTyxLQUFLLFFBQVE7Z0JBQzFCWiw4REFBa0JBLENBQUM7b0JBQUU2QjtvQkFBWUMsUUFBUVYsTUFBTVEsR0FBRyxFQUFFRCxNQUFNRztnQkFBTztnQkFDakVjLElBQUliLFFBQVEsR0FBRzlCLDBEQUFjQSxDQUFDO29CQUFFNEI7b0JBQVlDLFFBQVFWLE1BQU1RLEdBQUcsRUFBRUQsTUFBTUc7Z0JBQU87WUFDOUU7WUFFQSxJQUFJYyxJQUFJL0IsZ0JBQWdCLEtBQUssS0FBS0ksTUFBTStCLGtCQUFrQixFQUFFO2dCQUMxRCxNQUFNQyxXQUFXL0MsNERBQWdCQSxDQUFDMEMsS0FBSztvQkFDckNmO29CQUNBcUIsV0FBVzlCLE1BQU1RLEdBQUcsRUFBRUQsTUFBTXVCO29CQUM1QnBCLFFBQVFWLE1BQU1RLEdBQUcsRUFBRUQsTUFBTUc7Z0JBQzNCO2dCQUNBLElBQUk7b0JBQ0YsS0FBS2QsT0FBT21DLEtBQUssRUFBRUMsaUJBQWlCSCxVQUFpQkksTUFBTSxLQUFPO2dCQUNwRSxFQUFFLE9BQU07Z0JBQ04sVUFBVTtnQkFDWjtZQUNGO1lBRUEsTUFBTXBCLFFBQVE3QixzRUFBb0JBLENBQUN3QztZQUNuQ3ZDLGtFQUFlQSxDQUFDVyxRQUFRSSxPQUFPYTtZQUMvQixPQUFPQTtRQUNUO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxccnVudGltZVxcbGl2ZUJhbmVFbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XHJcblxyXG5pbXBvcnQgdHlwZSB7IEJhbmVJbnB1dCwgQmFuZU91dHB1dCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBCYW5lUnVudGltZUNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcclxuaW1wb3J0IHsgcG9saWN5Rm9yUHJvZmlsZSB9IGZyb20gJy4uL3BvbGljeS9iYW5lUG9saWN5JztcclxuaW1wb3J0IHsgYmFzZWxpbmVEZXRlY3RvcnMgfSBmcm9tICcuLi9jb3JlL2RldGVjdG9ycy5iYXNlbGluZSc7XHJcbmltcG9ydCB7IHJ1bkRldGVjdG9ycyB9IGZyb20gJy4uL2NvcmUvZGV0ZWN0b3JzJztcclxuaW1wb3J0IHsgYWdncmVnYXRlIH0gZnJvbSAnLi4vY29yZS9hZ2dyZWdhdGUnO1xyXG5pbXBvcnQgeyBzb3J0RmluZGluZ3MgfSBmcm9tICcuLi9jb3JlL3NvcnRGaW5kaW5ncyc7XHJcbmltcG9ydCB7IGFwcGx5UmVkYWN0aW9ucyB9IGZyb20gJy4uL2NvcmUvcmVkYWN0aW9uJztcclxuaW1wb3J0IHsgcmVkYWN0aW9uc0Zyb21GaW5kaW5ncyB9IGZyb20gJy4uL2NvcmUvcmVkYWN0aW9uRnJvbUZpbmRpbmdzJztcclxuaW1wb3J0IHsgYmFuZVByZWZsaWdodCB9IGZyb20gJy4vcHJlZmxpZ2h0JztcclxuaW1wb3J0IHsgZXNjYWxhdGUgfSBmcm9tICcuL2VzY2FsYXRpb24nO1xyXG5pbXBvcnQgeyBub3RlSG9zdGlsZUF0dGVtcHQsIGRlY2lkZVRocm90dGxlIH0gZnJvbSAnLi90aHJvdHRsZSc7XHJcbmltcG9ydCB7IHRvSW5jaWRlbnRSZWNvcmQgfSBmcm9tICcuL2luY2lkZW50JztcclxuaW1wb3J0IHsgbm9ybWFsaXplRm9yRGV0ZWN0aW9uIH0gZnJvbSAnLi9ub3JtYWxpemUnO1xyXG5pbXBvcnQgeyBmaW5hbGl6ZVB1YmxpY0ZhY2luZyB9IGZyb20gJy4vcHVibGljUmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBzYWZlU2lkZUVmZmVjdHMgfSBmcm9tICcuL3NhZmVTaWRlRWZmZWN0cyc7XHJcblxyXG5mdW5jdGlvbiB0cmFjZUlkRnJvbUVudHJvcHkoKTogc3RyaW5nIHtcclxuICBpZiAodHlwZW9mIGNyeXB0by5yYW5kb21VVUlEID09PSAnZnVuY3Rpb24nKSByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtcclxuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnaGV4Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHB1YmxpY01lc3NhZ2VGb3IocGFyYW1zOiB7IHZlcmRpY3Q6IEJhbmVPdXRwdXRbJ3ZlcmRpY3QnXTsgZW5mb3JjZW1lbnRMZXZlbDogbnVtYmVyIH0pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGlmIChwYXJhbXMudmVyZGljdCA9PT0gJ2RlbnknKSB7XHJcbiAgICByZXR1cm4gcGFyYW1zLmVuZm9yY2VtZW50TGV2ZWwgPj0gNFxyXG4gICAgICA/ICdBY2Nlc3MgcmV2b2tlZCB0ZW1wb3JhcmlseSBkdWUgdG8gcG9saWN5IHZpb2xhdGlvbnMuIENvbnRhY3QgYW4gYXV0aG9yaXplZCBhZG1pbmlzdHJhdG9yLidcclxuICAgICAgOiAnUmVxdWVzdCBkZW5pZWQ6IHVuYXV0aG9yaXplZCBvciB1bnNhZmUgb3BlcmF0aW9uLiBUaGlzIGF0dGVtcHQgaGFzIGJlZW4gbG9nZ2VkLic7XHJcbiAgfVxyXG4gIGlmIChwYXJhbXMudmVyZGljdCA9PT0gJ3JldmlldycpIHtcclxuICAgIHJldHVybiAnUmVxdWVzdCByZXN0cmljdGVkIGJ5IHBvbGljeS4gQWRkaXRpb25hbCBhdXRob3JpemF0aW9uIGlzIHJlcXVpcmVkLic7XHJcbiAgfVxyXG4gIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaXZlQmFuZUVuZ2luZShjb25maWc6IEJhbmVSdW50aW1lQ29uZmlnKSB7XHJcbiAgY29uc3QgaGludHMgPSBwb2xpY3lGb3JQcm9maWxlKGNvbmZpZy5wcm9maWxlSWQpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZXZhbHVhdGUoaW5wdXQ6IEJhbmVJbnB1dCk6IEJhbmVPdXRwdXQge1xyXG4gICAgICBjb25zdCB0MCA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IHRyYWNlSWQgPSB0cmFjZUlkRnJvbUVudHJvcHkoKTtcclxuXHJcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVGb3JEZXRlY3Rpb24oaW5wdXQpO1xyXG5cclxuICAgICAgY29uc3QgcHJlID0gYmFuZVByZWZsaWdodChjb25maWcsIGlucHV0LCB0cmFjZUlkLCB0MCk7XHJcbiAgICAgIGlmIChwcmUpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gaW5wdXQucmVxPy5hdXRoO1xyXG4gICAgICAgIGlmIChwcmUudmVyZGljdCA9PT0gJ2RlbnknKSB7XHJcbiAgICAgICAgICBub3RlSG9zdGlsZUF0dGVtcHQoeyBpZGVudGl0eUlkOiBhdXRoPy5pZGVudGl0eUlkLCBpcEhhc2g6IGF1dGg/LmlwSGFzaCB9KTtcclxuICAgICAgICAgIGNvbnN0IHRocm90dGxlID0gZGVjaWRlVGhyb3R0bGUoeyBpZGVudGl0eUlkOiBhdXRoPy5pZGVudGl0eUlkLCBpcEhhc2g6IGF1dGg/LmlwSGFzaCB9KTtcclxuICAgICAgICAgIHByZS50aHJvdHRsZSA9IHRocm90dGxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJlLmZpbmRpbmdzID0gc29ydEZpbmRpbmdzKHByZS5maW5kaW5ncyk7XHJcbiAgICAgICAgY29uc3QgZmluYWwgPSBmaW5hbGl6ZVB1YmxpY0ZhY2luZyhwcmUpO1xyXG4gICAgICAgIHNhZmVTaWRlRWZmZWN0cyhjb25maWcsIGlucHV0LCBmaW5hbCk7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkZXRlY3RvcnMgPSBiYXNlbGluZURldGVjdG9ycygpO1xyXG4gICAgICBjb25zdCByYXdGaW5kaW5ncyA9IHJ1bkRldGVjdG9ycyhkZXRlY3RvcnMsIG5vcm1hbGl6ZWQuZm9yRGV0ZWN0aW9uLCBoaW50cyk7XHJcbiAgICAgIGNvbnN0IGZpbmRpbmdzID0gc29ydEZpbmRpbmdzKHJhd0ZpbmRpbmdzKTtcclxuICAgICAgY29uc3QgYWdnID0gYWdncmVnYXRlKGZpbmRpbmdzKTtcclxuXHJcbiAgICAgIGxldCBlbmZvcmNlbWVudExldmVsOiBCYW5lT3V0cHV0WydlbmZvcmNlbWVudExldmVsJ10gPVxyXG4gICAgICAgIGFnZy52ZXJkaWN0ID09PSAnZGVueScgPyAzIDogYWdnLnZlcmRpY3QgPT09ICdyZXZpZXcnID8gMiA6IGFnZy52ZXJkaWN0ID09PSAnc2FuaXRpemUnID8gMSA6IDA7XHJcblxyXG4gICAgICBjb25zdCBpZGVudGl0eUlkID0gaW5wdXQucmVxPy5hdXRoPy5pZGVudGl0eUlkO1xyXG4gICAgICBpZiAoYWdnLnZlcmRpY3QgPT09ICdkZW55JyAmJiBpZGVudGl0eUlkICYmIGhpbnRzLmVzY2FsYXRpb25FbmFibGVkKSB7XHJcbiAgICAgICAgZW5mb3JjZW1lbnRMZXZlbCA9IGVzY2FsYXRlKGlkZW50aXR5SWQsIGFnZy5zZXZlcml0eSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNwYW5zID0gcmVkYWN0aW9uc0Zyb21GaW5kaW5ncyhpbnB1dC50ZXh0LCBmaW5kaW5ncyk7XHJcbiAgICAgIGNvbnN0IHNhZmVUZXh0ID1cclxuICAgICAgICAoYWdnLnZlcmRpY3QgPT09ICdzYW5pdGl6ZScgfHwgYWdnLnZlcmRpY3QgPT09ICdyZXZpZXcnKSAmJiBzcGFucy5sZW5ndGhcclxuICAgICAgICAgID8gYXBwbHlSZWRhY3Rpb25zKGlucHV0LnRleHQsIHNwYW5zKVxyXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICBjb25zdCBvdXQ6IEJhbmVPdXRwdXQgPSB7XHJcbiAgICAgICAgdmVyZGljdDogYWdnLnZlcmRpY3QsXHJcbiAgICAgICAgc2V2ZXJpdHk6IGFnZy5zZXZlcml0eSxcclxuICAgICAgICBmaW5kaW5ncyxcclxuICAgICAgICByZWRhY3Rpb25zOiBzcGFucy5sZW5ndGggPyBzcGFucyA6IHVuZGVmaW5lZCxcclxuICAgICAgICBzYWZlVGV4dCxcclxuICAgICAgICB0cmFjZUlkLFxyXG4gICAgICAgIHRpbWluZ01zOiBEYXRlLm5vdygpIC0gdDAsXHJcbiAgICAgICAgZW5mb3JjZW1lbnRMZXZlbCxcclxuICAgICAgICBwdWJsaWNNZXNzYWdlOiBwdWJsaWNNZXNzYWdlRm9yKHsgdmVyZGljdDogYWdnLnZlcmRpY3QsIGVuZm9yY2VtZW50TGV2ZWwgfSksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAob3V0LnZlcmRpY3QgPT09ICdkZW55Jykge1xyXG4gICAgICAgIG5vdGVIb3N0aWxlQXR0ZW1wdCh7IGlkZW50aXR5SWQsIGlwSGFzaDogaW5wdXQucmVxPy5hdXRoPy5pcEhhc2ggfSk7XHJcbiAgICAgICAgb3V0LnRocm90dGxlID0gZGVjaWRlVGhyb3R0bGUoeyBpZGVudGl0eUlkLCBpcEhhc2g6IGlucHV0LnJlcT8uYXV0aD8uaXBIYXNoIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAob3V0LmVuZm9yY2VtZW50TGV2ZWwgPT09IDUgJiYgaGludHMuaW5jaWRlbnRPbkNyaXRpY2FsKSB7XHJcbiAgICAgICAgY29uc3QgaW5jaWRlbnQgPSB0b0luY2lkZW50UmVjb3JkKG91dCwge1xyXG4gICAgICAgICAgaWRlbnRpdHlJZCxcclxuICAgICAgICAgIHNlc3Npb25JZDogaW5wdXQucmVxPy5hdXRoPy5zZXNzaW9uSWQsXHJcbiAgICAgICAgICBpcEhhc2g6IGlucHV0LnJlcT8uYXV0aD8uaXBIYXNoLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB2b2lkIGNvbmZpZy5zdG9yZT8uYXBwZW5kSW5jaWRlbnQ/LihpbmNpZGVudCBhcyBhbnkpLmNhdGNoKCgpID0+IHt9KTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIC8vIHN3YWxsb3dcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZpbmFsID0gZmluYWxpemVQdWJsaWNGYWNpbmcob3V0KTtcclxuICAgICAgc2FmZVNpZGVFZmZlY3RzKGNvbmZpZywgaW5wdXQsIGZpbmFsKTtcclxuICAgICAgcmV0dXJuIGZpbmFsO1xyXG4gICAgfSxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJwb2xpY3lGb3JQcm9maWxlIiwiYmFzZWxpbmVEZXRlY3RvcnMiLCJydW5EZXRlY3RvcnMiLCJhZ2dyZWdhdGUiLCJzb3J0RmluZGluZ3MiLCJhcHBseVJlZGFjdGlvbnMiLCJyZWRhY3Rpb25zRnJvbUZpbmRpbmdzIiwiYmFuZVByZWZsaWdodCIsImVzY2FsYXRlIiwibm90ZUhvc3RpbGVBdHRlbXB0IiwiZGVjaWRlVGhyb3R0bGUiLCJ0b0luY2lkZW50UmVjb3JkIiwibm9ybWFsaXplRm9yRGV0ZWN0aW9uIiwiZmluYWxpemVQdWJsaWNGYWNpbmciLCJzYWZlU2lkZUVmZmVjdHMiLCJ0cmFjZUlkRnJvbUVudHJvcHkiLCJyYW5kb21VVUlEIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsInB1YmxpY01lc3NhZ2VGb3IiLCJwYXJhbXMiLCJ2ZXJkaWN0IiwiZW5mb3JjZW1lbnRMZXZlbCIsInVuZGVmaW5lZCIsImNyZWF0ZUxpdmVCYW5lRW5naW5lIiwiY29uZmlnIiwiaGludHMiLCJwcm9maWxlSWQiLCJldmFsdWF0ZSIsImlucHV0IiwidDAiLCJEYXRlIiwibm93IiwidHJhY2VJZCIsIm5vcm1hbGl6ZWQiLCJwcmUiLCJhdXRoIiwicmVxIiwiaWRlbnRpdHlJZCIsImlwSGFzaCIsInRocm90dGxlIiwiZmluZGluZ3MiLCJmaW5hbCIsImRldGVjdG9ycyIsInJhd0ZpbmRpbmdzIiwiZm9yRGV0ZWN0aW9uIiwiYWdnIiwiZXNjYWxhdGlvbkVuYWJsZWQiLCJzZXZlcml0eSIsInNwYW5zIiwidGV4dCIsInNhZmVUZXh0IiwibGVuZ3RoIiwib3V0IiwicmVkYWN0aW9ucyIsInRpbWluZ01zIiwicHVibGljTWVzc2FnZSIsImluY2lkZW50T25Dcml0aWNhbCIsImluY2lkZW50Iiwic2Vzc2lvbklkIiwic3RvcmUiLCJhcHBlbmRJbmNpZGVudCIsImNhdGNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/liveBaneEngine.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/normalize.ts":
/*!******************************************!*\
  !*** ../scing/bane/runtime/normalize.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeForDetection: () => (/* binding */ normalizeForDetection)\n/* harmony export */ });\nfunction normalizeForDetection(input) {\n    const text = input.text ?? '';\n    const normalized = text.replace(/\\s+/g, ' ').trim().toLowerCase();\n    return {\n        original: input,\n        forDetection: {\n            ...input,\n            // detectors use normalized text; redactions apply to original\n            text: normalized\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvbm9ybWFsaXplLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFPTyxTQUFTQSxzQkFBc0JDLEtBQWdCO0lBQ3BELE1BQU1DLE9BQU9ELE1BQU1DLElBQUksSUFBSTtJQUMzQixNQUFNQyxhQUFhRCxLQUFLRSxPQUFPLENBQUMsUUFBUSxLQUFLQyxJQUFJLEdBQUdDLFdBQVc7SUFFL0QsT0FBTztRQUNMQyxVQUFVTjtRQUNWTyxjQUFjO1lBQ1osR0FBR1AsS0FBSztZQUNSLDhEQUE4RDtZQUM5REMsTUFBTUM7UUFDUjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHJ1bnRpbWVcXG5vcm1hbGl6ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVJbnB1dCB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIE5vcm1hbGl6ZWRCYW5lSW5wdXQgPSB7XHJcbiAgb3JpZ2luYWw6IEJhbmVJbnB1dDtcclxuICBmb3JEZXRlY3Rpb246IEJhbmVJbnB1dDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVGb3JEZXRlY3Rpb24oaW5wdXQ6IEJhbmVJbnB1dCk6IE5vcm1hbGl6ZWRCYW5lSW5wdXQge1xyXG4gIGNvbnN0IHRleHQgPSBpbnB1dC50ZXh0ID8/ICcnO1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG9yaWdpbmFsOiBpbnB1dCxcclxuICAgIGZvckRldGVjdGlvbjoge1xyXG4gICAgICAuLi5pbnB1dCxcclxuICAgICAgLy8gZGV0ZWN0b3JzIHVzZSBub3JtYWxpemVkIHRleHQ7IHJlZGFjdGlvbnMgYXBwbHkgdG8gb3JpZ2luYWxcclxuICAgICAgdGV4dDogbm9ybWFsaXplZCxcclxuICAgIH0sXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsibm9ybWFsaXplRm9yRGV0ZWN0aW9uIiwiaW5wdXQiLCJ0ZXh0Iiwibm9ybWFsaXplZCIsInJlcGxhY2UiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJvcmlnaW5hbCIsImZvckRldGVjdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/normalize.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/preflight.ts":
/*!******************************************!*\
  !*** ../scing/bane/runtime/preflight.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   banePreflight: () => (/* binding */ banePreflight)\n/* harmony export */ });\n/* harmony import */ var _policy_banePolicy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../policy/banePolicy */ \"(api-node)/../scing/bane/policy/banePolicy.ts\");\n/* harmony import */ var _riskLedger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./riskLedger */ \"(api-node)/../scing/bane/runtime/riskLedger.ts\");\n/* harmony import */ var _integrity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./integrity */ \"(api-node)/../scing/bane/runtime/integrity.ts\");\n/* harmony import */ var _containment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./containment */ \"(api-node)/../scing/bane/runtime/containment.ts\");\n\n\n\n\nfunction deny(params) {\n    return {\n        verdict: 'deny',\n        severity: 'high',\n        findings: [\n            {\n                id: params.id,\n                title: params.title,\n                severity: 'high',\n                verdict: 'deny',\n                rationale: params.rationale,\n                tags: [\n                    'preflight'\n                ]\n            }\n        ],\n        traceId: params.traceId,\n        timingMs: params.timingMs,\n        enforcementLevel: params.enforcementLevel,\n        publicMessage: params.message\n    };\n}\nfunction banePreflight(config, input, traceId, t0) {\n    const hints = (0,_policy_banePolicy__WEBPACK_IMPORTED_MODULE_0__.policyForProfile)(config.profileId);\n    const lockdown = (0,_containment__WEBPACK_IMPORTED_MODULE_3__.isGlobalLockdown)();\n    if (lockdown.active) {\n        return {\n            verdict: 'deny',\n            severity: 'critical',\n            enforcementLevel: 5,\n            publicMessage: 'System temporarily unavailable due to a security event.',\n            findings: [\n                {\n                    id: 'GLOBAL_LOCKDOWN',\n                    title: 'Global containment active',\n                    severity: 'critical',\n                    verdict: 'deny',\n                    rationale: 'Emergency containment mode is active.',\n                    tags: [\n                        'containment',\n                        'global',\n                        'preflight'\n                    ]\n                }\n            ],\n            traceId,\n            timingMs: Date.now() - t0\n        };\n    }\n    const auth = input.req?.auth;\n    const requiredCapability = input.req?.requiredCapability;\n    if (!auth?.identityId) {\n        return deny({\n            traceId,\n            enforcementLevel: 2,\n            message: 'Request denied: unauthorized or unsafe operation. This attempt has been logged.',\n            id: 'NO_AUTH',\n            title: 'Authentication missing',\n            rationale: 'No authenticated identity was provided.',\n            timingMs: Date.now() - t0\n        });\n    }\n    const integrity = (0,_integrity__WEBPACK_IMPORTED_MODULE_2__.checkIntegrity)(input);\n    if (integrity.ok === false && integrity.code === 'REPLAY') {\n        return deny({\n            traceId,\n            enforcementLevel: 4,\n            message: 'Access revoked temporarily due to policy violations. Contact an authorized administrator.',\n            id: 'REPLAY_DETECTED',\n            title: 'Replay detected',\n            rationale: 'Request nonce has been seen recently.',\n            timingMs: Date.now() - t0\n        });\n    }\n    if ((0,_riskLedger__WEBPACK_IMPORTED_MODULE_1__.isLocked)(auth.identityId)) {\n        return {\n            verdict: 'deny',\n            severity: 'high',\n            findings: [\n                {\n                    id: 'IDENTITY_LOCKED',\n                    title: 'Identity temporarily locked',\n                    severity: 'high',\n                    verdict: 'deny',\n                    rationale: 'Prior violations triggered an automatic lockout.',\n                    tags: [\n                        'lockout',\n                        'preflight'\n                    ]\n                }\n            ],\n            traceId,\n            timingMs: Date.now() - t0,\n            enforcementLevel: 4,\n            publicMessage: 'Access revoked temporarily due to policy violations. Contact an authorized administrator.'\n        };\n    }\n    if (requiredCapability) {\n        const caps = Array.isArray(auth.capabilities) ? auth.capabilities : [];\n        if (!caps.includes(requiredCapability)) {\n            return deny({\n                traceId,\n                enforcementLevel: 3,\n                message: 'Request denied: unauthorized or unsafe operation. This attempt has been logged.',\n                id: 'MISSING_CAPABILITY',\n                title: 'Insufficient capability',\n                rationale: 'Authenticated identity lacks required capability.',\n                timingMs: Date.now() - t0\n            });\n        }\n    }\n    if (hints.strictMode) {\n        const si = auth.sessionIntegrity;\n        const ok = Boolean(si?.nonceOk) && Boolean(si?.signatureOk) && Boolean(si?.tokenFresh);\n        if (!ok) {\n            return deny({\n                traceId,\n                enforcementLevel: 3,\n                message: 'Request denied: unauthorized or unsafe operation. This attempt has been logged.',\n                id: 'SESSION_INTEGRITY_FAILED',\n                title: 'Session integrity validation failed',\n                rationale: 'Session integrity checks were missing or invalid.',\n                timingMs: Date.now() - t0\n            });\n        }\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvcHJlZmxpZ2h0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBRXdEO0FBQ2hCO0FBQ0s7QUFDSTtBQUVqRCxTQUFTSSxLQUFLQyxNQVFiO0lBQ0MsT0FBTztRQUNMQyxTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsVUFBVTtZQUNSO2dCQUNFQyxJQUFJSixPQUFPSSxFQUFFO2dCQUNiQyxPQUFPTCxPQUFPSyxLQUFLO2dCQUNuQkgsVUFBVTtnQkFDVkQsU0FBUztnQkFDVEssV0FBV04sT0FBT00sU0FBUztnQkFDM0JDLE1BQU07b0JBQUM7aUJBQVk7WUFDckI7U0FDRDtRQUNEQyxTQUFTUixPQUFPUSxPQUFPO1FBQ3ZCQyxVQUFVVCxPQUFPUyxRQUFRO1FBQ3pCQyxrQkFBa0JWLE9BQU9VLGdCQUFnQjtRQUN6Q0MsZUFBZVgsT0FBT1ksT0FBTztJQUMvQjtBQUNGO0FBRU8sU0FBU0MsY0FBY0MsTUFBeUIsRUFBRUMsS0FBZ0IsRUFBRVAsT0FBZSxFQUFFUSxFQUFVO0lBQ3BHLE1BQU1DLFFBQVF0QixvRUFBZ0JBLENBQUNtQixPQUFPSSxTQUFTO0lBQy9DLE1BQU1DLFdBQVdyQiw4REFBZ0JBO0lBQ2pDLElBQUlxQixTQUFTQyxNQUFNLEVBQUU7UUFDbkIsT0FBTztZQUNMbkIsU0FBUztZQUNUQyxVQUFVO1lBQ1ZRLGtCQUFrQjtZQUNsQkMsZUFBZTtZQUNmUixVQUFVO2dCQUNSO29CQUNFQyxJQUFJO29CQUNKQyxPQUFPO29CQUNQSCxVQUFVO29CQUNWRCxTQUFTO29CQUNUSyxXQUFXO29CQUNYQyxNQUFNO3dCQUFDO3dCQUFlO3dCQUFVO3FCQUFZO2dCQUM5QzthQUNEO1lBQ0RDO1lBQ0FDLFVBQVVZLEtBQUtDLEdBQUcsS0FBS047UUFDekI7SUFDRjtJQUNBLE1BQU1PLE9BQU9SLE1BQU1TLEdBQUcsRUFBRUQ7SUFDeEIsTUFBTUUscUJBQXFCVixNQUFNUyxHQUFHLEVBQUVDO0lBRXRDLElBQUksQ0FBQ0YsTUFBTUcsWUFBWTtRQUNyQixPQUFPM0IsS0FBSztZQUNWUztZQUNBRSxrQkFBa0I7WUFDbEJFLFNBQVM7WUFDVFIsSUFBSTtZQUNKQyxPQUFPO1lBQ1BDLFdBQVc7WUFDWEcsVUFBVVksS0FBS0MsR0FBRyxLQUFLTjtRQUN6QjtJQUNGO0lBRUEsTUFBTVcsWUFBWTlCLDBEQUFjQSxDQUFDa0I7SUFDakMsSUFBSVksVUFBVUMsRUFBRSxLQUFLLFNBQVNELFVBQVVFLElBQUksS0FBSyxVQUFVO1FBQ3pELE9BQU85QixLQUFLO1lBQ1ZTO1lBQ0FFLGtCQUFrQjtZQUNsQkUsU0FBUztZQUNUUixJQUFJO1lBQ0pDLE9BQU87WUFDUEMsV0FBVztZQUNYRyxVQUFVWSxLQUFLQyxHQUFHLEtBQUtOO1FBQ3pCO0lBQ0Y7SUFFQSxJQUFJcEIscURBQVFBLENBQUMyQixLQUFLRyxVQUFVLEdBQUc7UUFDN0IsT0FBTztZQUNMekIsU0FBUztZQUNUQyxVQUFVO1lBQ1ZDLFVBQVU7Z0JBQ1I7b0JBQ0VDLElBQUk7b0JBQ0pDLE9BQU87b0JBQ1BILFVBQVU7b0JBQ1ZELFNBQVM7b0JBQ1RLLFdBQVc7b0JBQ1hDLE1BQU07d0JBQUM7d0JBQVc7cUJBQVk7Z0JBQ2hDO2FBQ0Q7WUFDREM7WUFDQUMsVUFBVVksS0FBS0MsR0FBRyxLQUFLTjtZQUN2Qk4sa0JBQWtCO1lBQ2xCQyxlQUFlO1FBQ2pCO0lBQ0Y7SUFFQSxJQUFJYyxvQkFBb0I7UUFDdEIsTUFBTUssT0FBaUJDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBS1UsWUFBWSxJQUFJVixLQUFLVSxZQUFZLEdBQUcsRUFBRTtRQUNoRixJQUFJLENBQUNILEtBQUtJLFFBQVEsQ0FBQ1QscUJBQXFCO1lBQ3RDLE9BQU8xQixLQUFLO2dCQUNWUztnQkFDQUUsa0JBQWtCO2dCQUNsQkUsU0FBUztnQkFDVFIsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEMsV0FBVztnQkFDWEcsVUFBVVksS0FBS0MsR0FBRyxLQUFLTjtZQUN6QjtRQUNGO0lBQ0Y7SUFFQSxJQUFJQyxNQUFNa0IsVUFBVSxFQUFFO1FBQ3BCLE1BQU1DLEtBQUtiLEtBQUtjLGdCQUFnQjtRQUNoQyxNQUFNVCxLQUFLVSxRQUFRRixJQUFJRyxZQUFZRCxRQUFRRixJQUFJSSxnQkFBZ0JGLFFBQVFGLElBQUlLO1FBQzNFLElBQUksQ0FBQ2IsSUFBSTtZQUNQLE9BQU83QixLQUFLO2dCQUNWUztnQkFDQUUsa0JBQWtCO2dCQUNsQkUsU0FBUztnQkFDVFIsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEMsV0FBVztnQkFDWEcsVUFBVVksS0FBS0MsR0FBRyxLQUFLTjtZQUN6QjtRQUNGO0lBQ0Y7SUFFQSxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHJ1bnRpbWVcXHByZWZsaWdodC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVJbnB1dCwgQmFuZU91dHB1dCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBCYW5lUnVudGltZUNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcclxuaW1wb3J0IHsgcG9saWN5Rm9yUHJvZmlsZSB9IGZyb20gJy4uL3BvbGljeS9iYW5lUG9saWN5JztcclxuaW1wb3J0IHsgaXNMb2NrZWQgfSBmcm9tICcuL3Jpc2tMZWRnZXInO1xyXG5pbXBvcnQgeyBjaGVja0ludGVncml0eSB9IGZyb20gJy4vaW50ZWdyaXR5JztcclxuaW1wb3J0IHsgaXNHbG9iYWxMb2NrZG93biB9IGZyb20gJy4vY29udGFpbm1lbnQnO1xyXG5cclxuZnVuY3Rpb24gZGVueShwYXJhbXM6IHtcclxuICB0cmFjZUlkOiBzdHJpbmc7XHJcbiAgZW5mb3JjZW1lbnRMZXZlbDogMiB8IDMgfCA0IHwgNTtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgaWQ6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHJhdGlvbmFsZTogc3RyaW5nO1xyXG4gIHRpbWluZ01zOiBudW1iZXI7XHJcbn0pOiBCYW5lT3V0cHV0IHtcclxuICByZXR1cm4ge1xyXG4gICAgdmVyZGljdDogJ2RlbnknLFxyXG4gICAgc2V2ZXJpdHk6ICdoaWdoJyxcclxuICAgIGZpbmRpbmdzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogcGFyYW1zLmlkLFxyXG4gICAgICAgIHRpdGxlOiBwYXJhbXMudGl0bGUsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcclxuICAgICAgICB2ZXJkaWN0OiAnZGVueScsXHJcbiAgICAgICAgcmF0aW9uYWxlOiBwYXJhbXMucmF0aW9uYWxlLFxyXG4gICAgICAgIHRhZ3M6IFsncHJlZmxpZ2h0J10sXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gICAgdHJhY2VJZDogcGFyYW1zLnRyYWNlSWQsXHJcbiAgICB0aW1pbmdNczogcGFyYW1zLnRpbWluZ01zLFxyXG4gICAgZW5mb3JjZW1lbnRMZXZlbDogcGFyYW1zLmVuZm9yY2VtZW50TGV2ZWwsXHJcbiAgICBwdWJsaWNNZXNzYWdlOiBwYXJhbXMubWVzc2FnZSxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmFuZVByZWZsaWdodChjb25maWc6IEJhbmVSdW50aW1lQ29uZmlnLCBpbnB1dDogQmFuZUlucHV0LCB0cmFjZUlkOiBzdHJpbmcsIHQwOiBudW1iZXIpOiBCYW5lT3V0cHV0IHwgbnVsbCB7XHJcbiAgY29uc3QgaGludHMgPSBwb2xpY3lGb3JQcm9maWxlKGNvbmZpZy5wcm9maWxlSWQpO1xyXG4gIGNvbnN0IGxvY2tkb3duID0gaXNHbG9iYWxMb2NrZG93bigpO1xyXG4gIGlmIChsb2NrZG93bi5hY3RpdmUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZlcmRpY3Q6ICdkZW55JyxcclxuICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXHJcbiAgICAgIGVuZm9yY2VtZW50TGV2ZWw6IDUsXHJcbiAgICAgIHB1YmxpY01lc3NhZ2U6ICdTeXN0ZW0gdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgZHVlIHRvIGEgc2VjdXJpdHkgZXZlbnQuJyxcclxuICAgICAgZmluZGluZ3M6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ0dMT0JBTF9MT0NLRE9XTicsXHJcbiAgICAgICAgICB0aXRsZTogJ0dsb2JhbCBjb250YWlubWVudCBhY3RpdmUnLFxyXG4gICAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXHJcbiAgICAgICAgICB2ZXJkaWN0OiAnZGVueScsXHJcbiAgICAgICAgICByYXRpb25hbGU6ICdFbWVyZ2VuY3kgY29udGFpbm1lbnQgbW9kZSBpcyBhY3RpdmUuJyxcclxuICAgICAgICAgIHRhZ3M6IFsnY29udGFpbm1lbnQnLCAnZ2xvYmFsJywgJ3ByZWZsaWdodCddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIHRyYWNlSWQsXHJcbiAgICAgIHRpbWluZ01zOiBEYXRlLm5vdygpIC0gdDAsXHJcbiAgICB9O1xyXG4gIH1cclxuICBjb25zdCBhdXRoID0gaW5wdXQucmVxPy5hdXRoO1xyXG4gIGNvbnN0IHJlcXVpcmVkQ2FwYWJpbGl0eSA9IGlucHV0LnJlcT8ucmVxdWlyZWRDYXBhYmlsaXR5O1xyXG5cclxuICBpZiAoIWF1dGg/LmlkZW50aXR5SWQpIHtcclxuICAgIHJldHVybiBkZW55KHtcclxuICAgICAgdHJhY2VJZCxcclxuICAgICAgZW5mb3JjZW1lbnRMZXZlbDogMixcclxuICAgICAgbWVzc2FnZTogJ1JlcXVlc3QgZGVuaWVkOiB1bmF1dGhvcml6ZWQgb3IgdW5zYWZlIG9wZXJhdGlvbi4gVGhpcyBhdHRlbXB0IGhhcyBiZWVuIGxvZ2dlZC4nLFxyXG4gICAgICBpZDogJ05PX0FVVEgnLFxyXG4gICAgICB0aXRsZTogJ0F1dGhlbnRpY2F0aW9uIG1pc3NpbmcnLFxyXG4gICAgICByYXRpb25hbGU6ICdObyBhdXRoZW50aWNhdGVkIGlkZW50aXR5IHdhcyBwcm92aWRlZC4nLFxyXG4gICAgICB0aW1pbmdNczogRGF0ZS5ub3coKSAtIHQwLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBpbnRlZ3JpdHkgPSBjaGVja0ludGVncml0eShpbnB1dCk7XHJcbiAgaWYgKGludGVncml0eS5vayA9PT0gZmFsc2UgJiYgaW50ZWdyaXR5LmNvZGUgPT09ICdSRVBMQVknKSB7XHJcbiAgICByZXR1cm4gZGVueSh7XHJcbiAgICAgIHRyYWNlSWQsXHJcbiAgICAgIGVuZm9yY2VtZW50TGV2ZWw6IDQsXHJcbiAgICAgIG1lc3NhZ2U6ICdBY2Nlc3MgcmV2b2tlZCB0ZW1wb3JhcmlseSBkdWUgdG8gcG9saWN5IHZpb2xhdGlvbnMuIENvbnRhY3QgYW4gYXV0aG9yaXplZCBhZG1pbmlzdHJhdG9yLicsXHJcbiAgICAgIGlkOiAnUkVQTEFZX0RFVEVDVEVEJyxcclxuICAgICAgdGl0bGU6ICdSZXBsYXkgZGV0ZWN0ZWQnLFxyXG4gICAgICByYXRpb25hbGU6ICdSZXF1ZXN0IG5vbmNlIGhhcyBiZWVuIHNlZW4gcmVjZW50bHkuJyxcclxuICAgICAgdGltaW5nTXM6IERhdGUubm93KCkgLSB0MCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlzTG9ja2VkKGF1dGguaWRlbnRpdHlJZCkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZlcmRpY3Q6ICdkZW55JyxcclxuICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcclxuICAgICAgZmluZGluZ3M6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ0lERU5USVRZX0xPQ0tFRCcsXHJcbiAgICAgICAgICB0aXRsZTogJ0lkZW50aXR5IHRlbXBvcmFyaWx5IGxvY2tlZCcsXHJcbiAgICAgICAgICBzZXZlcml0eTogJ2hpZ2gnLFxyXG4gICAgICAgICAgdmVyZGljdDogJ2RlbnknLFxyXG4gICAgICAgICAgcmF0aW9uYWxlOiAnUHJpb3IgdmlvbGF0aW9ucyB0cmlnZ2VyZWQgYW4gYXV0b21hdGljIGxvY2tvdXQuJyxcclxuICAgICAgICAgIHRhZ3M6IFsnbG9ja291dCcsICdwcmVmbGlnaHQnXSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgICB0cmFjZUlkLFxyXG4gICAgICB0aW1pbmdNczogRGF0ZS5ub3coKSAtIHQwLFxyXG4gICAgICBlbmZvcmNlbWVudExldmVsOiA0LFxyXG4gICAgICBwdWJsaWNNZXNzYWdlOiAnQWNjZXNzIHJldm9rZWQgdGVtcG9yYXJpbHkgZHVlIHRvIHBvbGljeSB2aW9sYXRpb25zLiBDb250YWN0IGFuIGF1dGhvcml6ZWQgYWRtaW5pc3RyYXRvci4nLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGlmIChyZXF1aXJlZENhcGFiaWxpdHkpIHtcclxuICAgIGNvbnN0IGNhcHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShhdXRoLmNhcGFiaWxpdGllcykgPyBhdXRoLmNhcGFiaWxpdGllcyA6IFtdO1xyXG4gICAgaWYgKCFjYXBzLmluY2x1ZGVzKHJlcXVpcmVkQ2FwYWJpbGl0eSkpIHtcclxuICAgICAgcmV0dXJuIGRlbnkoe1xyXG4gICAgICAgIHRyYWNlSWQsXHJcbiAgICAgICAgZW5mb3JjZW1lbnRMZXZlbDogMyxcclxuICAgICAgICBtZXNzYWdlOiAnUmVxdWVzdCBkZW5pZWQ6IHVuYXV0aG9yaXplZCBvciB1bnNhZmUgb3BlcmF0aW9uLiBUaGlzIGF0dGVtcHQgaGFzIGJlZW4gbG9nZ2VkLicsXHJcbiAgICAgICAgaWQ6ICdNSVNTSU5HX0NBUEFCSUxJVFknLFxyXG4gICAgICAgIHRpdGxlOiAnSW5zdWZmaWNpZW50IGNhcGFiaWxpdHknLFxyXG4gICAgICAgIHJhdGlvbmFsZTogJ0F1dGhlbnRpY2F0ZWQgaWRlbnRpdHkgbGFja3MgcmVxdWlyZWQgY2FwYWJpbGl0eS4nLFxyXG4gICAgICAgIHRpbWluZ01zOiBEYXRlLm5vdygpIC0gdDAsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGhpbnRzLnN0cmljdE1vZGUpIHtcclxuICAgIGNvbnN0IHNpID0gYXV0aC5zZXNzaW9uSW50ZWdyaXR5O1xyXG4gICAgY29uc3Qgb2sgPSBCb29sZWFuKHNpPy5ub25jZU9rKSAmJiBCb29sZWFuKHNpPy5zaWduYXR1cmVPaykgJiYgQm9vbGVhbihzaT8udG9rZW5GcmVzaCk7XHJcbiAgICBpZiAoIW9rKSB7XHJcbiAgICAgIHJldHVybiBkZW55KHtcclxuICAgICAgICB0cmFjZUlkLFxyXG4gICAgICAgIGVuZm9yY2VtZW50TGV2ZWw6IDMsXHJcbiAgICAgICAgbWVzc2FnZTogJ1JlcXVlc3QgZGVuaWVkOiB1bmF1dGhvcml6ZWQgb3IgdW5zYWZlIG9wZXJhdGlvbi4gVGhpcyBhdHRlbXB0IGhhcyBiZWVuIGxvZ2dlZC4nLFxyXG4gICAgICAgIGlkOiAnU0VTU0lPTl9JTlRFR1JJVFlfRkFJTEVEJyxcclxuICAgICAgICB0aXRsZTogJ1Nlc3Npb24gaW50ZWdyaXR5IHZhbGlkYXRpb24gZmFpbGVkJyxcclxuICAgICAgICByYXRpb25hbGU6ICdTZXNzaW9uIGludGVncml0eSBjaGVja3Mgd2VyZSBtaXNzaW5nIG9yIGludmFsaWQuJyxcclxuICAgICAgICB0aW1pbmdNczogRGF0ZS5ub3coKSAtIHQwLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJwb2xpY3lGb3JQcm9maWxlIiwiaXNMb2NrZWQiLCJjaGVja0ludGVncml0eSIsImlzR2xvYmFsTG9ja2Rvd24iLCJkZW55IiwicGFyYW1zIiwidmVyZGljdCIsInNldmVyaXR5IiwiZmluZGluZ3MiLCJpZCIsInRpdGxlIiwicmF0aW9uYWxlIiwidGFncyIsInRyYWNlSWQiLCJ0aW1pbmdNcyIsImVuZm9yY2VtZW50TGV2ZWwiLCJwdWJsaWNNZXNzYWdlIiwibWVzc2FnZSIsImJhbmVQcmVmbGlnaHQiLCJjb25maWciLCJpbnB1dCIsInQwIiwiaGludHMiLCJwcm9maWxlSWQiLCJsb2NrZG93biIsImFjdGl2ZSIsIkRhdGUiLCJub3ciLCJhdXRoIiwicmVxIiwicmVxdWlyZWRDYXBhYmlsaXR5IiwiaWRlbnRpdHlJZCIsImludGVncml0eSIsIm9rIiwiY29kZSIsImNhcHMiLCJBcnJheSIsImlzQXJyYXkiLCJjYXBhYmlsaXRpZXMiLCJpbmNsdWRlcyIsInN0cmljdE1vZGUiLCJzaSIsInNlc3Npb25JbnRlZ3JpdHkiLCJCb29sZWFuIiwibm9uY2VPayIsInNpZ25hdHVyZU9rIiwidG9rZW5GcmVzaCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/preflight.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/publicResponse.ts":
/*!***********************************************!*\
  !*** ../scing/bane/runtime/publicResponse.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   finalizePublicFacing: () => (/* binding */ finalizePublicFacing),\n/* harmony export */   sanitizePublicMessage: () => (/* binding */ sanitizePublicMessage)\n/* harmony export */ });\nconst FORBIDDEN_FRAGMENTS = [\n    'system prompt',\n    'developer message',\n    'detector',\n    'regex',\n    'pattern',\n    'rule',\n    'threshold',\n    'internal',\n    'policy id'\n];\nfunction sanitizePublicMessage(msg) {\n    const lower = msg.toLowerCase();\n    for (const f of FORBIDDEN_FRAGMENTS){\n        if (lower.includes(f)) {\n            return 'Request denied by security policy. This attempt has been logged.';\n        }\n    }\n    return msg;\n}\nfunction finalizePublicFacing(out) {\n    if (out.publicMessage) out.publicMessage = sanitizePublicMessage(out.publicMessage);\n    return out;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvcHVibGljUmVzcG9uc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQSxNQUFNQSxzQkFBc0I7SUFDMUI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFTSxTQUFTQyxzQkFBc0JDLEdBQVc7SUFDL0MsTUFBTUMsUUFBUUQsSUFBSUUsV0FBVztJQUM3QixLQUFLLE1BQU1DLEtBQUtMLG9CQUFxQjtRQUNuQyxJQUFJRyxNQUFNRyxRQUFRLENBQUNELElBQUk7WUFDckIsT0FBTztRQUNUO0lBQ0Y7SUFDQSxPQUFPSDtBQUNUO0FBRU8sU0FBU0sscUJBQXFCQyxHQUFlO0lBQ2xELElBQUlBLElBQUlDLGFBQWEsRUFBRUQsSUFBSUMsYUFBYSxHQUFHUixzQkFBc0JPLElBQUlDLGFBQWE7SUFDbEYsT0FBT0Q7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxccnVudGltZVxccHVibGljUmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCYW5lT3V0cHV0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuY29uc3QgRk9SQklEREVOX0ZSQUdNRU5UUyA9IFtcclxuICAnc3lzdGVtIHByb21wdCcsXHJcbiAgJ2RldmVsb3BlciBtZXNzYWdlJyxcclxuICAnZGV0ZWN0b3InLFxyXG4gICdyZWdleCcsXHJcbiAgJ3BhdHRlcm4nLFxyXG4gICdydWxlJyxcclxuICAndGhyZXNob2xkJyxcclxuICAnaW50ZXJuYWwnLFxyXG4gICdwb2xpY3kgaWQnLFxyXG5dO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUHVibGljTWVzc2FnZShtc2c6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgbG93ZXIgPSBtc2cudG9Mb3dlckNhc2UoKTtcclxuICBmb3IgKGNvbnN0IGYgb2YgRk9SQklEREVOX0ZSQUdNRU5UUykge1xyXG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKGYpKSB7XHJcbiAgICAgIHJldHVybiAnUmVxdWVzdCBkZW5pZWQgYnkgc2VjdXJpdHkgcG9saWN5LiBUaGlzIGF0dGVtcHQgaGFzIGJlZW4gbG9nZ2VkLic7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtc2c7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5hbGl6ZVB1YmxpY0ZhY2luZyhvdXQ6IEJhbmVPdXRwdXQpOiBCYW5lT3V0cHV0IHtcclxuICBpZiAob3V0LnB1YmxpY01lc3NhZ2UpIG91dC5wdWJsaWNNZXNzYWdlID0gc2FuaXRpemVQdWJsaWNNZXNzYWdlKG91dC5wdWJsaWNNZXNzYWdlKTtcclxuICByZXR1cm4gb3V0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJGT1JCSURERU5fRlJBR01FTlRTIiwic2FuaXRpemVQdWJsaWNNZXNzYWdlIiwibXNnIiwibG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImYiLCJpbmNsdWRlcyIsImZpbmFsaXplUHVibGljRmFjaW5nIiwib3V0IiwicHVibGljTWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/publicResponse.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/riskLedger.ts":
/*!*******************************************!*\
  !*** ../scing/bane/runtime/riskLedger.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isLocked: () => (/* binding */ isLocked),\n/* harmony export */   lockIdentity: () => (/* binding */ lockIdentity),\n/* harmony export */   recordStrike: () => (/* binding */ recordStrike),\n/* harmony export */   unlockIdentity: () => (/* binding */ unlockIdentity)\n/* harmony export */ });\nconst ledger = new Map();\nfunction recordStrike(identityId, severity, now = Date.now()) {\n    const prev = ledger.get(identityId);\n    const strikes = (prev?.strikes ?? 0) + 1;\n    const rec = {\n        identityId,\n        strikes,\n        lastSeverity: severity,\n        lastSeen: now,\n        lockedUntil: prev?.lockedUntil\n    };\n    ledger.set(identityId, rec);\n    return rec;\n}\nfunction isLocked(identityId, now = Date.now()) {\n    const rec = ledger.get(identityId);\n    if (!rec?.lockedUntil) return false;\n    return now < rec.lockedUntil;\n}\nfunction lockIdentity(identityId, ttlMs, now = Date.now()) {\n    const rec = ledger.get(identityId) ?? {\n        identityId,\n        strikes: 0,\n        lastSeverity: 'high',\n        lastSeen: now\n    };\n    rec.lockedUntil = now + Math.max(0, ttlMs);\n    ledger.set(identityId, rec);\n}\nfunction unlockIdentity(identityId) {\n    const rec = ledger.get(identityId);\n    if (!rec) return;\n    delete rec.lockedUntil;\n    ledger.set(identityId, rec);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvcmlza0xlZGdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBVUEsTUFBTUEsU0FBUyxJQUFJQztBQUVaLFNBQVNDLGFBQWFDLFVBQWtCLEVBQUVDLFFBQXNCLEVBQUVDLE1BQU1DLEtBQUtELEdBQUcsRUFBRTtJQUN2RixNQUFNRSxPQUFPUCxPQUFPUSxHQUFHLENBQUNMO0lBQ3hCLE1BQU1NLFVBQVUsQ0FBQ0YsTUFBTUUsV0FBVyxLQUFLO0lBRXZDLE1BQU1DLE1BQWtCO1FBQ3RCUDtRQUNBTTtRQUNBRSxjQUFjUDtRQUNkUSxVQUFVUDtRQUNWUSxhQUFhTixNQUFNTTtJQUNyQjtJQUVBYixPQUFPYyxHQUFHLENBQUNYLFlBQVlPO0lBQ3ZCLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTSyxTQUFTWixVQUFrQixFQUFFRSxNQUFNQyxLQUFLRCxHQUFHLEVBQUU7SUFDM0QsTUFBTUssTUFBTVYsT0FBT1EsR0FBRyxDQUFDTDtJQUN2QixJQUFJLENBQUNPLEtBQUtHLGFBQWEsT0FBTztJQUM5QixPQUFPUixNQUFNSyxJQUFJRyxXQUFXO0FBQzlCO0FBRU8sU0FBU0csYUFBYWIsVUFBa0IsRUFBRWMsS0FBYSxFQUFFWixNQUFNQyxLQUFLRCxHQUFHLEVBQUU7SUFDOUUsTUFBTUssTUFBTVYsT0FBT1EsR0FBRyxDQUFDTCxlQUFlO1FBQ3BDQTtRQUNBTSxTQUFTO1FBQ1RFLGNBQWM7UUFDZEMsVUFBVVA7SUFDWjtJQUNBSyxJQUFJRyxXQUFXLEdBQUdSLE1BQU1hLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRjtJQUNwQ2pCLE9BQU9jLEdBQUcsQ0FBQ1gsWUFBWU87QUFDekI7QUFFTyxTQUFTVSxlQUFlakIsVUFBa0I7SUFDL0MsTUFBTU8sTUFBTVYsT0FBT1EsR0FBRyxDQUFDTDtJQUN2QixJQUFJLENBQUNPLEtBQUs7SUFDVixPQUFPQSxJQUFJRyxXQUFXO0lBQ3RCYixPQUFPYyxHQUFHLENBQUNYLFlBQVlPO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxydW50aW1lXFxyaXNrTGVkZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFuZVNldmVyaXR5IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IHR5cGUgUmlza1JlY29yZCA9IHtcclxuICBpZGVudGl0eUlkOiBzdHJpbmc7XHJcbiAgc3RyaWtlczogbnVtYmVyO1xyXG4gIGxhc3RTZXZlcml0eTogQmFuZVNldmVyaXR5O1xyXG4gIGxhc3RTZWVuOiBudW1iZXI7XHJcbiAgbG9ja2VkVW50aWw/OiBudW1iZXI7XHJcbn07XHJcblxyXG5jb25zdCBsZWRnZXIgPSBuZXcgTWFwPHN0cmluZywgUmlza1JlY29yZD4oKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvcmRTdHJpa2UoaWRlbnRpdHlJZDogc3RyaW5nLCBzZXZlcml0eTogQmFuZVNldmVyaXR5LCBub3cgPSBEYXRlLm5vdygpKTogUmlza1JlY29yZCB7XHJcbiAgY29uc3QgcHJldiA9IGxlZGdlci5nZXQoaWRlbnRpdHlJZCk7XHJcbiAgY29uc3Qgc3RyaWtlcyA9IChwcmV2Py5zdHJpa2VzID8/IDApICsgMTtcclxuXHJcbiAgY29uc3QgcmVjOiBSaXNrUmVjb3JkID0ge1xyXG4gICAgaWRlbnRpdHlJZCxcclxuICAgIHN0cmlrZXMsXHJcbiAgICBsYXN0U2V2ZXJpdHk6IHNldmVyaXR5LFxyXG4gICAgbGFzdFNlZW46IG5vdyxcclxuICAgIGxvY2tlZFVudGlsOiBwcmV2Py5sb2NrZWRVbnRpbCxcclxuICB9O1xyXG5cclxuICBsZWRnZXIuc2V0KGlkZW50aXR5SWQsIHJlYyk7XHJcbiAgcmV0dXJuIHJlYztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9ja2VkKGlkZW50aXR5SWQ6IHN0cmluZywgbm93ID0gRGF0ZS5ub3coKSk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHJlYyA9IGxlZGdlci5nZXQoaWRlbnRpdHlJZCk7XHJcbiAgaWYgKCFyZWM/LmxvY2tlZFVudGlsKSByZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuIG5vdyA8IHJlYy5sb2NrZWRVbnRpbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvY2tJZGVudGl0eShpZGVudGl0eUlkOiBzdHJpbmcsIHR0bE1zOiBudW1iZXIsIG5vdyA9IERhdGUubm93KCkpIHtcclxuICBjb25zdCByZWMgPSBsZWRnZXIuZ2V0KGlkZW50aXR5SWQpID8/IHtcclxuICAgIGlkZW50aXR5SWQsXHJcbiAgICBzdHJpa2VzOiAwLFxyXG4gICAgbGFzdFNldmVyaXR5OiAnaGlnaCcgYXMgQmFuZVNldmVyaXR5LFxyXG4gICAgbGFzdFNlZW46IG5vdyxcclxuICB9O1xyXG4gIHJlYy5sb2NrZWRVbnRpbCA9IG5vdyArIE1hdGgubWF4KDAsIHR0bE1zKTtcclxuICBsZWRnZXIuc2V0KGlkZW50aXR5SWQsIHJlYyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1bmxvY2tJZGVudGl0eShpZGVudGl0eUlkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZWMgPSBsZWRnZXIuZ2V0KGlkZW50aXR5SWQpO1xyXG4gIGlmICghcmVjKSByZXR1cm47XHJcbiAgZGVsZXRlIHJlYy5sb2NrZWRVbnRpbDtcclxuICBsZWRnZXIuc2V0KGlkZW50aXR5SWQsIHJlYyk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImxlZGdlciIsIk1hcCIsInJlY29yZFN0cmlrZSIsImlkZW50aXR5SWQiLCJzZXZlcml0eSIsIm5vdyIsIkRhdGUiLCJwcmV2IiwiZ2V0Iiwic3RyaWtlcyIsInJlYyIsImxhc3RTZXZlcml0eSIsImxhc3RTZWVuIiwibG9ja2VkVW50aWwiLCJzZXQiLCJpc0xvY2tlZCIsImxvY2tJZGVudGl0eSIsInR0bE1zIiwiTWF0aCIsIm1heCIsInVubG9ja0lkZW50aXR5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/riskLedger.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/safeSideEffects.ts":
/*!************************************************!*\
  !*** ../scing/bane/runtime/safeSideEffects.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   safeSideEffects: () => (/* binding */ safeSideEffects)\n/* harmony export */ });\n/* harmony import */ var _storage_toAuditRecord__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../storage/toAuditRecord */ \"(api-node)/../scing/bane/storage/toAuditRecord.ts\");\n\nfunction safeSideEffects(config, input, out) {\n    // Store: never block, never throw\n    try {\n        const store = config.store;\n        if (store) {\n            const rec = (0,_storage_toAuditRecord__WEBPACK_IMPORTED_MODULE_0__.toAuditRecord)(input, out);\n            void store.appendAudit(rec).catch(()=>{});\n            void store.appendEvent({\n                type: 'BANE_DECISION',\n                traceId: out.traceId,\n                at: Date.now(),\n                data: {\n                    verdict: out.verdict,\n                    severity: out.severity,\n                    enforcementLevel: out.enforcementLevel\n                }\n            }).catch(()=>{});\n        }\n    } catch  {\n    // swallow\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvc2FmZVNpZGVFZmZlY3RzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRXlEO0FBRWxELFNBQVNDLGdCQUFnQkMsTUFBeUIsRUFBRUMsS0FBZ0IsRUFBRUMsR0FBZTtJQUMxRixrQ0FBa0M7SUFDbEMsSUFBSTtRQUNGLE1BQU1DLFFBQVFILE9BQU9HLEtBQUs7UUFDMUIsSUFBSUEsT0FBTztZQUNULE1BQU1DLE1BQU1OLHFFQUFhQSxDQUFDRyxPQUFPQztZQUNqQyxLQUFLQyxNQUFNRSxXQUFXLENBQUNELEtBQUtFLEtBQUssQ0FBQyxLQUFPO1lBQ3pDLEtBQUtILE1BQ0ZJLFdBQVcsQ0FBQztnQkFDWEMsTUFBTTtnQkFDTkMsU0FBU1AsSUFBSU8sT0FBTztnQkFDcEJDLElBQUlDLEtBQUtDLEdBQUc7Z0JBQ1pDLE1BQU07b0JBQ0pDLFNBQVNaLElBQUlZLE9BQU87b0JBQ3BCQyxVQUFVYixJQUFJYSxRQUFRO29CQUN0QkMsa0JBQWtCZCxJQUFJYyxnQkFBZ0I7Z0JBQ3hDO1lBQ0YsR0FDQ1YsS0FBSyxDQUFDLEtBQU87UUFDbEI7SUFDRixFQUFFLE9BQU07SUFDTixVQUFVO0lBQ1o7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxccnVudGltZVxcc2FmZVNpZGVFZmZlY3RzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFuZUlucHV0LCBCYW5lT3V0cHV0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IEJhbmVSdW50aW1lQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xyXG5pbXBvcnQgeyB0b0F1ZGl0UmVjb3JkIH0gZnJvbSAnLi4vc3RvcmFnZS90b0F1ZGl0UmVjb3JkJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYWZlU2lkZUVmZmVjdHMoY29uZmlnOiBCYW5lUnVudGltZUNvbmZpZywgaW5wdXQ6IEJhbmVJbnB1dCwgb3V0OiBCYW5lT3V0cHV0KSB7XHJcbiAgLy8gU3RvcmU6IG5ldmVyIGJsb2NrLCBuZXZlciB0aHJvd1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdG9yZSA9IGNvbmZpZy5zdG9yZTtcclxuICAgIGlmIChzdG9yZSkge1xyXG4gICAgICBjb25zdCByZWMgPSB0b0F1ZGl0UmVjb3JkKGlucHV0LCBvdXQpO1xyXG4gICAgICB2b2lkIHN0b3JlLmFwcGVuZEF1ZGl0KHJlYykuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgICB2b2lkIHN0b3JlXHJcbiAgICAgICAgLmFwcGVuZEV2ZW50KHtcclxuICAgICAgICAgIHR5cGU6ICdCQU5FX0RFQ0lTSU9OJyxcclxuICAgICAgICAgIHRyYWNlSWQ6IG91dC50cmFjZUlkLFxyXG4gICAgICAgICAgYXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHZlcmRpY3Q6IG91dC52ZXJkaWN0LFxyXG4gICAgICAgICAgICBzZXZlcml0eTogb3V0LnNldmVyaXR5LFxyXG4gICAgICAgICAgICBlbmZvcmNlbWVudExldmVsOiBvdXQuZW5mb3JjZW1lbnRMZXZlbCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgLy8gc3dhbGxvd1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsidG9BdWRpdFJlY29yZCIsInNhZmVTaWRlRWZmZWN0cyIsImNvbmZpZyIsImlucHV0Iiwib3V0Iiwic3RvcmUiLCJyZWMiLCJhcHBlbmRBdWRpdCIsImNhdGNoIiwiYXBwZW5kRXZlbnQiLCJ0eXBlIiwidHJhY2VJZCIsImF0IiwiRGF0ZSIsIm5vdyIsImRhdGEiLCJ2ZXJkaWN0Iiwic2V2ZXJpdHkiLCJlbmZvcmNlbWVudExldmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/safeSideEffects.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/runtime/throttle.ts":
/*!*****************************************!*\
  !*** ../scing/bane/runtime/throttle.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decideThrottle: () => (/* binding */ decideThrottle),\n/* harmony export */   noteHostileAttempt: () => (/* binding */ noteHostileAttempt)\n/* harmony export */ });\nconst state = new Map();\nfunction key(identityId, ipHash) {\n    return identityId ? `id:${identityId}` : ipHash ? `ip:${ipHash}` : 'anon';\n}\nfunction noteHostileAttempt(params) {\n    const now = params.now ?? Date.now();\n    const k = key(params.identityId, params.ipHash);\n    const prev = state.get(k);\n    const strikes = (prev?.strikes ?? 0) + 1;\n    const next = {\n        strikes,\n        lastAt: now\n    };\n    state.set(k, next);\n    return next;\n}\nfunction decideThrottle(params) {\n    const now = params.now ?? Date.now();\n    const k = key(params.identityId, params.ipHash);\n    const s = state.get(k);\n    if (!s) return {\n        action: 'none'\n    };\n    const delayMs = Math.min(250 * Math.pow(2, Math.max(0, s.strikes - 1)), 8000);\n    const delta = now - s.lastAt;\n    if (delta < 250 && s.strikes >= 3) {\n        return {\n            action: 'block',\n            retryAfterMs: 15000\n        };\n    }\n    return delayMs >= 500 ? {\n        action: 'delay',\n        delayMs\n    } : {\n        action: 'none'\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3J1bnRpbWUvdGhyb3R0bGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFVQSxNQUFNQSxRQUFRLElBQUlDO0FBRWxCLFNBQVNDLElBQUlDLFVBQW1CLEVBQUVDLE1BQWU7SUFDL0MsT0FBT0QsYUFBYSxDQUFDLEdBQUcsRUFBRUEsWUFBWSxHQUFHQyxTQUFTLENBQUMsR0FBRyxFQUFFQSxRQUFRLEdBQUc7QUFDckU7QUFFTyxTQUFTQyxtQkFBbUJDLE1BQThEO0lBQy9GLE1BQU1DLE1BQU1ELE9BQU9DLEdBQUcsSUFBSUMsS0FBS0QsR0FBRztJQUNsQyxNQUFNRSxJQUFJUCxJQUFJSSxPQUFPSCxVQUFVLEVBQUVHLE9BQU9GLE1BQU07SUFDOUMsTUFBTU0sT0FBT1YsTUFBTVcsR0FBRyxDQUFDRjtJQUV2QixNQUFNRyxVQUFVLENBQUNGLE1BQU1FLFdBQVcsS0FBSztJQUN2QyxNQUFNQyxPQUFzQjtRQUFFRDtRQUFTRSxRQUFRUDtJQUFJO0lBQ25EUCxNQUFNZSxHQUFHLENBQUNOLEdBQUdJO0lBQ2IsT0FBT0E7QUFDVDtBQUVPLFNBQVNHLGVBQWVWLE1BQThEO0lBQzNGLE1BQU1DLE1BQU1ELE9BQU9DLEdBQUcsSUFBSUMsS0FBS0QsR0FBRztJQUNsQyxNQUFNRSxJQUFJUCxJQUFJSSxPQUFPSCxVQUFVLEVBQUVHLE9BQU9GLE1BQU07SUFDOUMsTUFBTWEsSUFBSWpCLE1BQU1XLEdBQUcsQ0FBQ0Y7SUFDcEIsSUFBSSxDQUFDUSxHQUFHLE9BQU87UUFBRUMsUUFBUTtJQUFPO0lBRWhDLE1BQU1DLFVBQVVDLEtBQUtDLEdBQUcsQ0FBQyxNQUFNRCxLQUFLRSxHQUFHLENBQUMsR0FBR0YsS0FBS0csR0FBRyxDQUFDLEdBQUdOLEVBQUVMLE9BQU8sR0FBRyxLQUFLO0lBRXhFLE1BQU1ZLFFBQVFqQixNQUFNVSxFQUFFSCxNQUFNO0lBQzVCLElBQUlVLFFBQVEsT0FBT1AsRUFBRUwsT0FBTyxJQUFJLEdBQUc7UUFDakMsT0FBTztZQUFFTSxRQUFRO1lBQVNPLGNBQWM7UUFBTztJQUNqRDtJQUVBLE9BQU9OLFdBQVcsTUFBTTtRQUFFRCxRQUFRO1FBQVNDO0lBQVEsSUFBSTtRQUFFRCxRQUFRO0lBQU87QUFDMUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHJ1bnRpbWVcXHRocm90dGxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIFRocm90dGxlRGVjaXNpb24gPVxyXG4gIHwgeyBhY3Rpb246ICdub25lJyB9XHJcbiAgfCB7IGFjdGlvbjogJ2RlbGF5JzsgZGVsYXlNczogbnVtYmVyIH1cclxuICB8IHsgYWN0aW9uOiAnYmxvY2snOyByZXRyeUFmdGVyTXM6IG51bWJlciB9O1xyXG5cclxudHlwZSBUaHJvdHRsZVN0YXRlID0ge1xyXG4gIHN0cmlrZXM6IG51bWJlcjtcclxuICBsYXN0QXQ6IG51bWJlcjtcclxufTtcclxuXHJcbmNvbnN0IHN0YXRlID0gbmV3IE1hcDxzdHJpbmcsIFRocm90dGxlU3RhdGU+KCk7XHJcblxyXG5mdW5jdGlvbiBrZXkoaWRlbnRpdHlJZD86IHN0cmluZywgaXBIYXNoPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gaWRlbnRpdHlJZCA/IGBpZDoke2lkZW50aXR5SWR9YCA6IGlwSGFzaCA/IGBpcDoke2lwSGFzaH1gIDogJ2Fub24nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbm90ZUhvc3RpbGVBdHRlbXB0KHBhcmFtczogeyBpZGVudGl0eUlkPzogc3RyaW5nOyBpcEhhc2g/OiBzdHJpbmc7IG5vdz86IG51bWJlciB9KTogVGhyb3R0bGVTdGF0ZSB7XHJcbiAgY29uc3Qgbm93ID0gcGFyYW1zLm5vdyA/PyBEYXRlLm5vdygpO1xyXG4gIGNvbnN0IGsgPSBrZXkocGFyYW1zLmlkZW50aXR5SWQsIHBhcmFtcy5pcEhhc2gpO1xyXG4gIGNvbnN0IHByZXYgPSBzdGF0ZS5nZXQoayk7XHJcblxyXG4gIGNvbnN0IHN0cmlrZXMgPSAocHJldj8uc3RyaWtlcyA/PyAwKSArIDE7XHJcbiAgY29uc3QgbmV4dDogVGhyb3R0bGVTdGF0ZSA9IHsgc3RyaWtlcywgbGFzdEF0OiBub3cgfTtcclxuICBzdGF0ZS5zZXQoaywgbmV4dCk7XHJcbiAgcmV0dXJuIG5leHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNpZGVUaHJvdHRsZShwYXJhbXM6IHsgaWRlbnRpdHlJZD86IHN0cmluZzsgaXBIYXNoPzogc3RyaW5nOyBub3c/OiBudW1iZXIgfSk6IFRocm90dGxlRGVjaXNpb24ge1xyXG4gIGNvbnN0IG5vdyA9IHBhcmFtcy5ub3cgPz8gRGF0ZS5ub3coKTtcclxuICBjb25zdCBrID0ga2V5KHBhcmFtcy5pZGVudGl0eUlkLCBwYXJhbXMuaXBIYXNoKTtcclxuICBjb25zdCBzID0gc3RhdGUuZ2V0KGspO1xyXG4gIGlmICghcykgcmV0dXJuIHsgYWN0aW9uOiAnbm9uZScgfTtcclxuXHJcbiAgY29uc3QgZGVsYXlNcyA9IE1hdGgubWluKDI1MCAqIE1hdGgucG93KDIsIE1hdGgubWF4KDAsIHMuc3RyaWtlcyAtIDEpKSwgODAwMCk7XHJcblxyXG4gIGNvbnN0IGRlbHRhID0gbm93IC0gcy5sYXN0QXQ7XHJcbiAgaWYgKGRlbHRhIDwgMjUwICYmIHMuc3RyaWtlcyA+PSAzKSB7XHJcbiAgICByZXR1cm4geyBhY3Rpb246ICdibG9jaycsIHJldHJ5QWZ0ZXJNczogMTVfMDAwIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGVsYXlNcyA+PSA1MDAgPyB7IGFjdGlvbjogJ2RlbGF5JywgZGVsYXlNcyB9IDogeyBhY3Rpb246ICdub25lJyB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzdGF0ZSIsIk1hcCIsImtleSIsImlkZW50aXR5SWQiLCJpcEhhc2giLCJub3RlSG9zdGlsZUF0dGVtcHQiLCJwYXJhbXMiLCJub3ciLCJEYXRlIiwiayIsInByZXYiLCJnZXQiLCJzdHJpa2VzIiwibmV4dCIsImxhc3RBdCIsInNldCIsImRlY2lkZVRocm90dGxlIiwicyIsImFjdGlvbiIsImRlbGF5TXMiLCJNYXRoIiwibWluIiwicG93IiwibWF4IiwiZGVsdGEiLCJyZXRyeUFmdGVyTXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/runtime/throttle.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/server/baneGuards.ts":
/*!******************************************!*\
  !*** ../scing/bane/server/baneGuards.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baneHttpGuard: () => (/* binding */ baneHttpGuard),\n/* harmony export */   baneToolGuard: () => (/* binding */ baneToolGuard)\n/* harmony export */ });\n/* harmony import */ var _integrations_httpMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../integrations/httpMiddleware */ \"(api-node)/../scing/bane/integrations/httpMiddleware.ts\");\n/* harmony import */ var _integrations_toolGuard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../integrations/toolGuard */ \"(api-node)/../scing/bane/integrations/toolGuard.ts\");\n/* harmony import */ var _storage_inMemoryBaneStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storage/inMemoryBaneStore */ \"(api-node)/../scing/bane/storage/inMemoryBaneStore.ts\");\n/* harmony import */ var _storage_firestoreBaneStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../storage/firestoreBaneStore */ \"(api-node)/../scing/bane/storage/firestoreBaneStore.ts\");\n/* harmony import */ var _firebase_admin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../firebase/admin */ \"(api-node)/../scing/firebase/admin.ts\");\n\n\n\n\n\nfunction buildStore() {\n    try {\n        const db = (0,_firebase_admin__WEBPACK_IMPORTED_MODULE_4__.getAdminFirestore)();\n        return new _storage_firestoreBaneStore__WEBPACK_IMPORTED_MODULE_3__.FirestoreBaneStore(db);\n    } catch  {\n        return new _storage_inMemoryBaneStore__WEBPACK_IMPORTED_MODULE_2__.InMemoryBaneStore();\n    }\n}\n// Server-only singleton guard construction.\nconst config = {\n    profileId: 'bane_fog_v1',\n    store: buildStore()\n};\nconst baneHttpGuard = (0,_integrations_httpMiddleware__WEBPACK_IMPORTED_MODULE_0__.makeBaneHttpGuard)(config);\nconst baneToolGuard = (0,_integrations_toolGuard__WEBPACK_IMPORTED_MODULE_1__.makeBaneToolGuard)(config);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3NlcnZlci9iYW5lR3VhcmRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBbUU7QUFDTDtBQUVHO0FBQ0U7QUFFVjtBQUV6RCxTQUFTSztJQUNQLElBQUk7UUFDRixNQUFNQyxLQUFLRixrRUFBaUJBO1FBQzVCLE9BQU8sSUFBSUQsMkVBQWtCQSxDQUFDRztJQUNoQyxFQUFFLE9BQU07UUFDTixPQUFPLElBQUlKLHlFQUFpQkE7SUFDOUI7QUFDRjtBQUVBLDRDQUE0QztBQUM1QyxNQUFNSyxTQUE0QjtJQUNoQ0MsV0FBVztJQUNYQyxPQUFPSjtBQUNUO0FBRU8sTUFBTUssZ0JBQWdCViwrRUFBaUJBLENBQUNPLFFBQVE7QUFDaEQsTUFBTUksZ0JBQWdCViwwRUFBaUJBLENBQUNNLFFBQVEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHNlcnZlclxcYmFuZUd1YXJkcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYWtlQmFuZUh0dHBHdWFyZCB9IGZyb20gJy4uL2ludGVncmF0aW9ucy9odHRwTWlkZGxld2FyZSc7XHJcbmltcG9ydCB7IG1ha2VCYW5lVG9vbEd1YXJkIH0gZnJvbSAnLi4vaW50ZWdyYXRpb25zL3Rvb2xHdWFyZCc7XHJcbmltcG9ydCB0eXBlIHsgQmFuZVJ1bnRpbWVDb25maWcgfSBmcm9tICcuLi9ydW50aW1lL2NvbmZpZyc7XHJcbmltcG9ydCB7IEluTWVtb3J5QmFuZVN0b3JlIH0gZnJvbSAnLi4vc3RvcmFnZS9pbk1lbW9yeUJhbmVTdG9yZSc7XHJcbmltcG9ydCB7IEZpcmVzdG9yZUJhbmVTdG9yZSB9IGZyb20gJy4uL3N0b3JhZ2UvZmlyZXN0b3JlQmFuZVN0b3JlJztcclxuXHJcbmltcG9ydCB7IGdldEFkbWluRmlyZXN0b3JlIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2UvYWRtaW4nO1xyXG5cclxuZnVuY3Rpb24gYnVpbGRTdG9yZSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGIgPSBnZXRBZG1pbkZpcmVzdG9yZSgpO1xyXG4gICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVCYW5lU3RvcmUoZGIgYXMgYW55KTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBuZXcgSW5NZW1vcnlCYW5lU3RvcmUoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFNlcnZlci1vbmx5IHNpbmdsZXRvbiBndWFyZCBjb25zdHJ1Y3Rpb24uXHJcbmNvbnN0IGNvbmZpZzogQmFuZVJ1bnRpbWVDb25maWcgPSB7XHJcbiAgcHJvZmlsZUlkOiAnYmFuZV9mb2dfdjEnLFxyXG4gIHN0b3JlOiBidWlsZFN0b3JlKCksXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYmFuZUh0dHBHdWFyZCA9IG1ha2VCYW5lSHR0cEd1YXJkKGNvbmZpZyk7XHJcbmV4cG9ydCBjb25zdCBiYW5lVG9vbEd1YXJkID0gbWFrZUJhbmVUb29sR3VhcmQoY29uZmlnKTtcclxuIl0sIm5hbWVzIjpbIm1ha2VCYW5lSHR0cEd1YXJkIiwibWFrZUJhbmVUb29sR3VhcmQiLCJJbk1lbW9yeUJhbmVTdG9yZSIsIkZpcmVzdG9yZUJhbmVTdG9yZSIsImdldEFkbWluRmlyZXN0b3JlIiwiYnVpbGRTdG9yZSIsImRiIiwiY29uZmlnIiwicHJvZmlsZUlkIiwic3RvcmUiLCJiYW5lSHR0cEd1YXJkIiwiYmFuZVRvb2xHdWFyZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/server/baneGuards.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/storage/collections.ts":
/*!********************************************!*\
  !*** ../scing/bane/storage/collections.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BANE_COLLECTIONS: () => (/* binding */ BANE_COLLECTIONS)\n/* harmony export */ });\nconst BANE_COLLECTIONS = {\n    audits: 'bane_audits',\n    events: 'bane_events',\n    incidents: 'bane_incidents'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3N0b3JhZ2UvY29sbGVjdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLG1CQUFtQjtJQUM5QkMsUUFBUTtJQUNSQyxRQUFRO0lBQ1JDLFdBQVc7QUFDYixFQUFXIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hc3RlXFxTQ0lOR09TX1dPUktcXFNjaW5nT1NcXHNjaW5nXFxiYW5lXFxzdG9yYWdlXFxjb2xsZWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQkFORV9DT0xMRUNUSU9OUyA9IHtcclxuICBhdWRpdHM6ICdiYW5lX2F1ZGl0cycsXHJcbiAgZXZlbnRzOiAnYmFuZV9ldmVudHMnLFxyXG4gIGluY2lkZW50czogJ2JhbmVfaW5jaWRlbnRzJyxcclxufSBhcyBjb25zdDtcclxuIl0sIm5hbWVzIjpbIkJBTkVfQ09MTEVDVElPTlMiLCJhdWRpdHMiLCJldmVudHMiLCJpbmNpZGVudHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/storage/collections.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/storage/firestoreBaneStore.ts":
/*!***************************************************!*\
  !*** ../scing/bane/storage/firestoreBaneStore.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirestoreBaneStore: () => (/* binding */ FirestoreBaneStore)\n/* harmony export */ });\n/* harmony import */ var _collections__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collections */ \"(api-node)/../scing/bane/storage/collections.ts\");\n\nfunction asArray(value) {\n    return Array.isArray(value) ? value : [];\n}\nclass FirestoreBaneStore {\n    constructor(db){\n        this.db = db;\n    }\n    async appendAudit(record) {\n        const ref = this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.audits).doc();\n        await ref.set({\n            ...record,\n            id: ref.id ?? undefined\n        }, {\n            merge: false\n        });\n    }\n    async appendEvent(event) {\n        const ref = this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.events).doc();\n        await ref.set({\n            ...event,\n            id: ref.id ?? undefined\n        }, {\n            merge: false\n        });\n    }\n    async getRecentAudits(limit) {\n        const q = this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.audits).orderBy?.('at', 'desc').limit?.(limit);\n        const snap = await (q ?? this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.audits)).get();\n        const docs = asArray(snap?.docs ?? []);\n        return docs.map((d)=>d.data());\n    }\n    async appendIncident(incident) {\n        const ref = this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.incidents).doc();\n        await ref.set({\n            ...incident,\n            id: ref.id ?? undefined\n        }, {\n            merge: false\n        });\n    }\n    async getRecentIncidents(limit) {\n        const q = this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.incidents).orderBy?.('occurredAt', 'desc').limit?.(limit);\n        const snap = await (q ?? this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.incidents)).get();\n        const docs = asArray(snap?.docs ?? []);\n        return docs.map((d)=>d.data());\n    }\n    async getIncidentByTrace(traceId) {\n        const q = this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.incidents).where?.('traceId', '==', traceId).limit?.(1);\n        const snap = await (q ?? this.db.collection(_collections__WEBPACK_IMPORTED_MODULE_0__.BANE_COLLECTIONS.incidents)).get();\n        const docs = asArray(snap?.docs ?? []);\n        if (!docs.length) return null;\n        return docs[0].data();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3N0b3JhZ2UvZmlyZXN0b3JlQmFuZVN0b3JlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRWlEO0FBMkJqRCxTQUFTQyxRQUFXQyxLQUFjO0lBQ2hDLE9BQU9DLE1BQU1DLE9BQU8sQ0FBQ0YsU0FBVUEsUUFBZ0IsRUFBRTtBQUNuRDtBQUVPLE1BQU1HO0lBR1gsWUFBWUMsRUFBaUIsQ0FBRTtRQUM3QixJQUFJLENBQUNBLEVBQUUsR0FBR0E7SUFDWjtJQUVBLE1BQU1DLFlBQVlDLE1BQXVCLEVBQWlCO1FBQ3hELE1BQU1DLE1BQU0sSUFBSSxDQUFDSCxFQUFFLENBQUNJLFVBQVUsQ0FBQ1YsMERBQWdCQSxDQUFDVyxNQUFNLEVBQUVDLEdBQUc7UUFDM0QsTUFBTUgsSUFBSUksR0FBRyxDQUFDO1lBQUUsR0FBR0wsTUFBTTtZQUFFTSxJQUFJTCxJQUFJSyxFQUFFLElBQUlDO1FBQVUsR0FBRztZQUFFQyxPQUFPO1FBQU07SUFDdkU7SUFFQSxNQUFNQyxZQUFZQyxLQUFzQixFQUFpQjtRQUN2RCxNQUFNVCxNQUFNLElBQUksQ0FBQ0gsRUFBRSxDQUFDSSxVQUFVLENBQUNWLDBEQUFnQkEsQ0FBQ21CLE1BQU0sRUFBRVAsR0FBRztRQUMzRCxNQUFNSCxJQUFJSSxHQUFHLENBQUM7WUFBRSxHQUFHSyxLQUFLO1lBQUVKLElBQUlMLElBQUlLLEVBQUUsSUFBSUM7UUFBVSxHQUFHO1lBQUVDLE9BQU87UUFBTTtJQUN0RTtJQUVBLE1BQU1JLGdCQUFnQkMsS0FBYSxFQUE4QjtRQUMvRCxNQUFNQyxJQUFJLElBQUksQ0FBQ2hCLEVBQUUsQ0FDZEksVUFBVSxDQUFDViwwREFBZ0JBLENBQUNXLE1BQU0sRUFDbENZLE9BQU8sR0FBRyxNQUFNLFFBQ2hCRixRQUFRQTtRQUVYLE1BQU1HLE9BQU8sTUFBTSxDQUFDRixLQUFNLElBQUksQ0FBQ2hCLEVBQUUsQ0FBQ0ksVUFBVSxDQUFDViwwREFBZ0JBLENBQUNXLE1BQU0sQ0FBUSxFQUFHYyxHQUFHO1FBQ2xGLE1BQU1DLE9BQU96QixRQUF5QyxNQUFleUIsUUFBUSxFQUFFO1FBQy9FLE9BQU9BLEtBQUtDLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJO0lBQy9CO0lBRUEsTUFBTUMsZUFBZUMsUUFBNEIsRUFBaUI7UUFDaEUsTUFBTXRCLE1BQU0sSUFBSSxDQUFDSCxFQUFFLENBQUNJLFVBQVUsQ0FBQ1YsMERBQWdCQSxDQUFDZ0MsU0FBUyxFQUFFcEIsR0FBRztRQUM5RCxNQUFNSCxJQUFJSSxHQUFHLENBQUM7WUFBRSxHQUFHa0IsUUFBUTtZQUFFakIsSUFBSUwsSUFBSUssRUFBRSxJQUFJQztRQUFVLEdBQUc7WUFBRUMsT0FBTztRQUFNO0lBQ3pFO0lBRUEsTUFBTWlCLG1CQUFtQlosS0FBYSxFQUFpQztRQUNyRSxNQUFNQyxJQUFJLElBQUksQ0FBQ2hCLEVBQUUsQ0FDZEksVUFBVSxDQUFDViwwREFBZ0JBLENBQUNnQyxTQUFTLEVBQ3JDVCxPQUFPLEdBQUcsY0FBYyxRQUN4QkYsUUFBUUE7UUFFWCxNQUFNRyxPQUFPLE1BQU0sQ0FBQ0YsS0FBTSxJQUFJLENBQUNoQixFQUFFLENBQUNJLFVBQVUsQ0FBQ1YsMERBQWdCQSxDQUFDZ0MsU0FBUyxDQUFRLEVBQUdQLEdBQUc7UUFDckYsTUFBTUMsT0FBT3pCLFFBQXlDLE1BQWV5QixRQUFRLEVBQUU7UUFDL0UsT0FBT0EsS0FBS0MsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVDLElBQUk7SUFDL0I7SUFFQSxNQUFNSyxtQkFBbUJDLE9BQWUsRUFBc0M7UUFDNUUsTUFBTWIsSUFBSSxJQUFJLENBQUNoQixFQUFFLENBQ2RJLFVBQVUsQ0FBQ1YsMERBQWdCQSxDQUFDZ0MsU0FBUyxFQUNyQ0ksS0FBSyxHQUFHLFdBQVcsTUFBTUQsU0FDekJkLFFBQVE7UUFFWCxNQUFNRyxPQUFPLE1BQU0sQ0FBQ0YsS0FBTSxJQUFJLENBQUNoQixFQUFFLENBQUNJLFVBQVUsQ0FBQ1YsMERBQWdCQSxDQUFDZ0MsU0FBUyxDQUFRLEVBQUdQLEdBQUc7UUFDckYsTUFBTUMsT0FBT3pCLFFBQXlDLE1BQWV5QixRQUFRLEVBQUU7UUFDL0UsSUFBSSxDQUFDQSxLQUFLVyxNQUFNLEVBQUUsT0FBTztRQUN6QixPQUFPWCxJQUFJLENBQUMsRUFBRSxDQUFDRyxJQUFJO0lBQ3JCO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHN0b3JhZ2VcXGZpcmVzdG9yZUJhbmVTdG9yZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJhbmVTdG9yZSB9IGZyb20gJy4vYmFuZVN0b3JlJztcclxuaW1wb3J0IHR5cGUgeyBCYW5lQXVkaXRSZWNvcmQsIEJhbmVFdmVudFJlY29yZCwgQmFuZUluY2lkZW50UmVjb3JkIH0gZnJvbSAnLi9yZWNvcmRzJztcclxuaW1wb3J0IHsgQkFORV9DT0xMRUNUSU9OUyB9IGZyb20gJy4vY29sbGVjdGlvbnMnO1xyXG5cclxudHlwZSBGaXJlc3RvcmVEb2NSZWYgPSB7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbiAgc2V0OiAoZGF0YTogdW5rbm93biwgb3B0cz86IHsgbWVyZ2U/OiBib29sZWFuIH0pID0+IFByb21pc2U8dW5rbm93bj47XHJcbn07XHJcblxyXG50eXBlIEZpcmVzdG9yZVF1ZXJ5U25hcCA9IHtcclxuICBkb2NzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGRhdGE6ICgpID0+IGFueSB9PjtcclxuICBmb3JFYWNoPzogKGNiOiAoZDogeyBpZDogc3RyaW5nOyBkYXRhOiAoKSA9PiBhbnkgfSkgPT4gdm9pZCkgPT4gdm9pZDtcclxufTtcclxuXHJcbnR5cGUgRmlyZXN0b3JlUXVlcnkgPSB7XHJcbiAgb3JkZXJCeT86IChmaWVsZDogc3RyaW5nLCBkaXI6ICdhc2MnIHwgJ2Rlc2MnKSA9PiBGaXJlc3RvcmVRdWVyeTtcclxuICBsaW1pdD86IChuOiBudW1iZXIpID0+IEZpcmVzdG9yZVF1ZXJ5O1xyXG4gIHdoZXJlPzogKGZpZWxkOiBzdHJpbmcsIG9wOiBhbnksIHZhbHVlOiBhbnkpID0+IEZpcmVzdG9yZVF1ZXJ5O1xyXG4gIGdldDogKCkgPT4gUHJvbWlzZTxGaXJlc3RvcmVRdWVyeVNuYXA+O1xyXG59O1xyXG5cclxudHlwZSBGaXJlc3RvcmVDb2xsZWN0aW9uUmVmID0gRmlyZXN0b3JlUXVlcnkgJiB7XHJcbiAgZG9jOiAoaWQ/OiBzdHJpbmcpID0+IEZpcmVzdG9yZURvY1JlZjtcclxufTtcclxuXHJcbnR5cGUgRmlyZXN0b3JlTGlrZSA9IHtcclxuICBjb2xsZWN0aW9uOiAobmFtZTogc3RyaW5nKSA9PiBGaXJlc3RvcmVDb2xsZWN0aW9uUmVmO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gYXNBcnJheTxUPih2YWx1ZTogdW5rbm93bik6IFRbXSB7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpID8gKHZhbHVlIGFzIFRbXSkgOiBbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpcmVzdG9yZUJhbmVTdG9yZSBpbXBsZW1lbnRzIEJhbmVTdG9yZSB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBkYjogRmlyZXN0b3JlTGlrZTtcclxuXHJcbiAgY29uc3RydWN0b3IoZGI6IEZpcmVzdG9yZUxpa2UpIHtcclxuICAgIHRoaXMuZGIgPSBkYjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGFwcGVuZEF1ZGl0KHJlY29yZDogQmFuZUF1ZGl0UmVjb3JkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCByZWYgPSB0aGlzLmRiLmNvbGxlY3Rpb24oQkFORV9DT0xMRUNUSU9OUy5hdWRpdHMpLmRvYygpO1xyXG4gICAgYXdhaXQgcmVmLnNldCh7IC4uLnJlY29yZCwgaWQ6IHJlZi5pZCA/PyB1bmRlZmluZWQgfSwgeyBtZXJnZTogZmFsc2UgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhcHBlbmRFdmVudChldmVudDogQmFuZUV2ZW50UmVjb3JkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCByZWYgPSB0aGlzLmRiLmNvbGxlY3Rpb24oQkFORV9DT0xMRUNUSU9OUy5ldmVudHMpLmRvYygpO1xyXG4gICAgYXdhaXQgcmVmLnNldCh7IC4uLmV2ZW50LCBpZDogcmVmLmlkID8/IHVuZGVmaW5lZCB9LCB7IG1lcmdlOiBmYWxzZSB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFJlY2VudEF1ZGl0cyhsaW1pdDogbnVtYmVyKTogUHJvbWlzZTxCYW5lQXVkaXRSZWNvcmRbXT4ge1xyXG4gICAgY29uc3QgcSA9IHRoaXMuZGJcclxuICAgICAgLmNvbGxlY3Rpb24oQkFORV9DT0xMRUNUSU9OUy5hdWRpdHMpXHJcbiAgICAgIC5vcmRlckJ5Py4oJ2F0JywgJ2Rlc2MnKVxyXG4gICAgICAubGltaXQ/LihsaW1pdCk7XHJcblxyXG4gICAgY29uc3Qgc25hcCA9IGF3YWl0IChxID8/ICh0aGlzLmRiLmNvbGxlY3Rpb24oQkFORV9DT0xMRUNUSU9OUy5hdWRpdHMpIGFzIGFueSkpLmdldCgpO1xyXG4gICAgY29uc3QgZG9jcyA9IGFzQXJyYXk8eyBpZDogc3RyaW5nOyBkYXRhOiAoKSA9PiBhbnkgfT4oKHNuYXAgYXMgYW55KT8uZG9jcyA/PyBbXSk7XHJcbiAgICByZXR1cm4gZG9jcy5tYXAoKGQpID0+IGQuZGF0YSgpIGFzIEJhbmVBdWRpdFJlY29yZCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhcHBlbmRJbmNpZGVudChpbmNpZGVudDogQmFuZUluY2lkZW50UmVjb3JkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCByZWYgPSB0aGlzLmRiLmNvbGxlY3Rpb24oQkFORV9DT0xMRUNUSU9OUy5pbmNpZGVudHMpLmRvYygpO1xyXG4gICAgYXdhaXQgcmVmLnNldCh7IC4uLmluY2lkZW50LCBpZDogcmVmLmlkID8/IHVuZGVmaW5lZCB9LCB7IG1lcmdlOiBmYWxzZSB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFJlY2VudEluY2lkZW50cyhsaW1pdDogbnVtYmVyKTogUHJvbWlzZTxCYW5lSW5jaWRlbnRSZWNvcmRbXT4ge1xyXG4gICAgY29uc3QgcSA9IHRoaXMuZGJcclxuICAgICAgLmNvbGxlY3Rpb24oQkFORV9DT0xMRUNUSU9OUy5pbmNpZGVudHMpXHJcbiAgICAgIC5vcmRlckJ5Py4oJ29jY3VycmVkQXQnLCAnZGVzYycpXHJcbiAgICAgIC5saW1pdD8uKGxpbWl0KTtcclxuXHJcbiAgICBjb25zdCBzbmFwID0gYXdhaXQgKHEgPz8gKHRoaXMuZGIuY29sbGVjdGlvbihCQU5FX0NPTExFQ1RJT05TLmluY2lkZW50cykgYXMgYW55KSkuZ2V0KCk7XHJcbiAgICBjb25zdCBkb2NzID0gYXNBcnJheTx7IGlkOiBzdHJpbmc7IGRhdGE6ICgpID0+IGFueSB9Pigoc25hcCBhcyBhbnkpPy5kb2NzID8/IFtdKTtcclxuICAgIHJldHVybiBkb2NzLm1hcCgoZCkgPT4gZC5kYXRhKCkgYXMgQmFuZUluY2lkZW50UmVjb3JkKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEluY2lkZW50QnlUcmFjZSh0cmFjZUlkOiBzdHJpbmcpOiBQcm9taXNlPEJhbmVJbmNpZGVudFJlY29yZCB8IG51bGw+IHtcclxuICAgIGNvbnN0IHEgPSB0aGlzLmRiXHJcbiAgICAgIC5jb2xsZWN0aW9uKEJBTkVfQ09MTEVDVElPTlMuaW5jaWRlbnRzKVxyXG4gICAgICAud2hlcmU/LigndHJhY2VJZCcsICc9PScsIHRyYWNlSWQpXHJcbiAgICAgIC5saW1pdD8uKDEpO1xyXG5cclxuICAgIGNvbnN0IHNuYXAgPSBhd2FpdCAocSA/PyAodGhpcy5kYi5jb2xsZWN0aW9uKEJBTkVfQ09MTEVDVElPTlMuaW5jaWRlbnRzKSBhcyBhbnkpKS5nZXQoKTtcclxuICAgIGNvbnN0IGRvY3MgPSBhc0FycmF5PHsgaWQ6IHN0cmluZzsgZGF0YTogKCkgPT4gYW55IH0+KChzbmFwIGFzIGFueSk/LmRvY3MgPz8gW10pO1xyXG4gICAgaWYgKCFkb2NzLmxlbmd0aCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gZG9jc1swXS5kYXRhKCkgYXMgQmFuZUluY2lkZW50UmVjb3JkO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQkFORV9DT0xMRUNUSU9OUyIsImFzQXJyYXkiLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsIkZpcmVzdG9yZUJhbmVTdG9yZSIsImRiIiwiYXBwZW5kQXVkaXQiLCJyZWNvcmQiLCJyZWYiLCJjb2xsZWN0aW9uIiwiYXVkaXRzIiwiZG9jIiwic2V0IiwiaWQiLCJ1bmRlZmluZWQiLCJtZXJnZSIsImFwcGVuZEV2ZW50IiwiZXZlbnQiLCJldmVudHMiLCJnZXRSZWNlbnRBdWRpdHMiLCJsaW1pdCIsInEiLCJvcmRlckJ5Iiwic25hcCIsImdldCIsImRvY3MiLCJtYXAiLCJkIiwiZGF0YSIsImFwcGVuZEluY2lkZW50IiwiaW5jaWRlbnQiLCJpbmNpZGVudHMiLCJnZXRSZWNlbnRJbmNpZGVudHMiLCJnZXRJbmNpZGVudEJ5VHJhY2UiLCJ0cmFjZUlkIiwid2hlcmUiLCJsZW5ndGgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/storage/firestoreBaneStore.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/storage/hash.ts":
/*!*************************************!*\
  !*** ../scing/bane/storage/hash.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sha256Hex: () => (/* binding */ sha256Hex)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction sha256Hex(s) {\n    return node_crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(s).digest('hex');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3N0b3JhZ2UvaGFzaC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUM7QUFFMUIsU0FBU0MsVUFBVUMsQ0FBUztJQUNqQyxPQUFPRiw2REFBaUIsQ0FBQyxVQUFVSSxNQUFNLENBQUNGLEdBQUdHLE1BQU0sQ0FBQztBQUN0RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxzY2luZ1xcYmFuZVxcc3RvcmFnZVxcaGFzaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ25vZGU6Y3J5cHRvJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaGEyNTZIZXgoczogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShzKS5kaWdlc3QoJ2hleCcpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJzaGEyNTZIZXgiLCJzIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/storage/hash.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/storage/inMemoryBaneStore.ts":
/*!**************************************************!*\
  !*** ../scing/bane/storage/inMemoryBaneStore.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InMemoryBaneStore: () => (/* binding */ InMemoryBaneStore)\n/* harmony export */ });\nclass InMemoryBaneStore {\n    async appendAudit(record) {\n        this.audits.push(record);\n    }\n    async appendEvent(event) {\n        this.events.push(event);\n    }\n    async getRecentAudits(limit) {\n        return this.audits.slice().sort((a, b)=>b.at - a.at).slice(0, Math.max(1, Math.min(200, limit)));\n    }\n    async appendIncident(incident) {\n        this.incidents.push(incident);\n    }\n    async getRecentIncidents(limit) {\n        return this.incidents.slice().sort((a, b)=>b.occurredAt - a.occurredAt).slice(0, Math.max(1, Math.min(200, limit)));\n    }\n    async getIncidentByTrace(traceId) {\n        return this.incidents.find((i)=>i.traceId === traceId) ?? null;\n    }\n    constructor(){\n        this.audits = [];\n        this.events = [];\n        this.incidents = [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3N0b3JhZ2UvaW5NZW1vcnlCYW5lU3RvcmUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUdPLE1BQU1BO0lBS1gsTUFBTUMsWUFBWUMsTUFBdUIsRUFBaUI7UUFDeEQsSUFBSSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQ0Y7SUFDbkI7SUFFQSxNQUFNRyxZQUFZQyxLQUFzQixFQUFpQjtRQUN2RCxJQUFJLENBQUNDLE1BQU0sQ0FBQ0gsSUFBSSxDQUFDRTtJQUNuQjtJQUVBLE1BQU1FLGdCQUFnQkMsS0FBYSxFQUE4QjtRQUMvRCxPQUFPLElBQUksQ0FBQ04sTUFBTSxDQUFDTyxLQUFLLEdBQUdDLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFQyxFQUFFLEdBQUdGLEVBQUVFLEVBQUUsRUFBRUosS0FBSyxDQUFDLEdBQUdLLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsS0FBS1I7SUFDNUY7SUFFQSxNQUFNUyxlQUFlQyxRQUE0QixFQUFpQjtRQUNoRSxJQUFJLENBQUNDLFNBQVMsQ0FBQ2hCLElBQUksQ0FBQ2U7SUFDdEI7SUFFQSxNQUFNRSxtQkFBbUJaLEtBQWEsRUFBaUM7UUFDckUsT0FBTyxJQUFJLENBQUNXLFNBQVMsQ0FDbEJWLEtBQUssR0FDTEMsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUVTLFVBQVUsR0FBR1YsRUFBRVUsVUFBVSxFQUMxQ1osS0FBSyxDQUFDLEdBQUdLLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsS0FBS1I7SUFDeEM7SUFFQSxNQUFNYyxtQkFBbUJDLE9BQWUsRUFBc0M7UUFDNUUsT0FBTyxJQUFJLENBQUNKLFNBQVMsQ0FBQ0ssSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVGLE9BQU8sS0FBS0EsWUFBWTtJQUM5RDs7YUE3QlFyQixTQUE0QixFQUFFO2FBQzlCSSxTQUE0QixFQUFFO2FBQzlCYSxZQUFrQyxFQUFFOztBQTRCOUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHN0b3JhZ2VcXGluTWVtb3J5QmFuZVN0b3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFuZVN0b3JlIH0gZnJvbSAnLi9iYW5lU3RvcmUnO1xyXG5pbXBvcnQgdHlwZSB7IEJhbmVBdWRpdFJlY29yZCwgQmFuZUV2ZW50UmVjb3JkLCBCYW5lSW5jaWRlbnRSZWNvcmQgfSBmcm9tICcuL3JlY29yZHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEluTWVtb3J5QmFuZVN0b3JlIGltcGxlbWVudHMgQmFuZVN0b3JlIHtcclxuICBwcml2YXRlIGF1ZGl0czogQmFuZUF1ZGl0UmVjb3JkW10gPSBbXTtcclxuICBwcml2YXRlIGV2ZW50czogQmFuZUV2ZW50UmVjb3JkW10gPSBbXTtcclxuICBwcml2YXRlIGluY2lkZW50czogQmFuZUluY2lkZW50UmVjb3JkW10gPSBbXTtcclxuXHJcbiAgYXN5bmMgYXBwZW5kQXVkaXQocmVjb3JkOiBCYW5lQXVkaXRSZWNvcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuYXVkaXRzLnB1c2gocmVjb3JkKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGFwcGVuZEV2ZW50KGV2ZW50OiBCYW5lRXZlbnRSZWNvcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuZXZlbnRzLnB1c2goZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UmVjZW50QXVkaXRzKGxpbWl0OiBudW1iZXIpOiBQcm9taXNlPEJhbmVBdWRpdFJlY29yZFtdPiB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpdHMuc2xpY2UoKS5zb3J0KChhLCBiKSA9PiBiLmF0IC0gYS5hdCkuc2xpY2UoMCwgTWF0aC5tYXgoMSwgTWF0aC5taW4oMjAwLCBsaW1pdCkpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGFwcGVuZEluY2lkZW50KGluY2lkZW50OiBCYW5lSW5jaWRlbnRSZWNvcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuaW5jaWRlbnRzLnB1c2goaW5jaWRlbnQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UmVjZW50SW5jaWRlbnRzKGxpbWl0OiBudW1iZXIpOiBQcm9taXNlPEJhbmVJbmNpZGVudFJlY29yZFtdPiB7XHJcbiAgICByZXR1cm4gdGhpcy5pbmNpZGVudHNcclxuICAgICAgLnNsaWNlKClcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIub2NjdXJyZWRBdCAtIGEub2NjdXJyZWRBdClcclxuICAgICAgLnNsaWNlKDAsIE1hdGgubWF4KDEsIE1hdGgubWluKDIwMCwgbGltaXQpKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRJbmNpZGVudEJ5VHJhY2UodHJhY2VJZDogc3RyaW5nKTogUHJvbWlzZTxCYW5lSW5jaWRlbnRSZWNvcmQgfCBudWxsPiB7XHJcbiAgICByZXR1cm4gdGhpcy5pbmNpZGVudHMuZmluZCgoaSkgPT4gaS50cmFjZUlkID09PSB0cmFjZUlkKSA/PyBudWxsO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiSW5NZW1vcnlCYW5lU3RvcmUiLCJhcHBlbmRBdWRpdCIsInJlY29yZCIsImF1ZGl0cyIsInB1c2giLCJhcHBlbmRFdmVudCIsImV2ZW50IiwiZXZlbnRzIiwiZ2V0UmVjZW50QXVkaXRzIiwibGltaXQiLCJzbGljZSIsInNvcnQiLCJhIiwiYiIsImF0IiwiTWF0aCIsIm1heCIsIm1pbiIsImFwcGVuZEluY2lkZW50IiwiaW5jaWRlbnQiLCJpbmNpZGVudHMiLCJnZXRSZWNlbnRJbmNpZGVudHMiLCJvY2N1cnJlZEF0IiwiZ2V0SW5jaWRlbnRCeVRyYWNlIiwidHJhY2VJZCIsImZpbmQiLCJpIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/storage/inMemoryBaneStore.ts\n");

/***/ }),

/***/ "(api-node)/../scing/bane/storage/toAuditRecord.ts":
/*!**********************************************!*\
  !*** ../scing/bane/storage/toAuditRecord.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toAuditRecord: () => (/* binding */ toAuditRecord)\n/* harmony export */ });\n/* harmony import */ var _hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hash */ \"(api-node)/../scing/bane/storage/hash.ts\");\n\nfunction toAuditRecord(input, out) {\n    const rawText = input.text ?? '';\n    const safeText = out.safeText;\n    return {\n        at: Date.now(),\n        traceId: out.traceId,\n        route: String(input.req?.route ?? 'unknown'),\n        requiredCapability: input.req?.requiredCapability,\n        identityId: input.req?.auth?.identityId,\n        verdict: out.verdict,\n        severity: out.severity,\n        enforcementLevel: out.enforcementLevel,\n        inputHash: (0,_hash__WEBPACK_IMPORTED_MODULE_0__.sha256Hex)(rawText),\n        safeTextHash: typeof safeText === 'string' ? (0,_hash__WEBPACK_IMPORTED_MODULE_0__.sha256Hex)(safeText) : undefined,\n        findingsSummary: (out.findings ?? []).map((f)=>({\n                id: f.id,\n                severity: f.severity,\n                verdict: f.verdict\n            }))\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9iYW5lL3N0b3JhZ2UvdG9BdWRpdFJlY29yZC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVtQztBQUU1QixTQUFTQyxjQUFjQyxLQUFnQixFQUFFQyxHQUFlO0lBQzdELE1BQU1DLFVBQVVGLE1BQU1HLElBQUksSUFBSTtJQUM5QixNQUFNQyxXQUFXSCxJQUFJRyxRQUFRO0lBQzdCLE9BQU87UUFDTEMsSUFBSUMsS0FBS0MsR0FBRztRQUNaQyxTQUFTUCxJQUFJTyxPQUFPO1FBQ3BCQyxPQUFPQyxPQUFPVixNQUFNVyxHQUFHLEVBQUVGLFNBQVM7UUFDbENHLG9CQUFvQlosTUFBTVcsR0FBRyxFQUFFQztRQUMvQkMsWUFBWWIsTUFBTVcsR0FBRyxFQUFFRyxNQUFNRDtRQUM3QkUsU0FBU2QsSUFBSWMsT0FBTztRQUNwQkMsVUFBVWYsSUFBSWUsUUFBUTtRQUN0QkMsa0JBQWtCaEIsSUFBSWdCLGdCQUFnQjtRQUN0Q0MsV0FBV3BCLGdEQUFTQSxDQUFDSTtRQUNyQmlCLGNBQWMsT0FBT2YsYUFBYSxXQUFXTixnREFBU0EsQ0FBQ00sWUFBWWdCO1FBQ25FQyxpQkFBaUIsQ0FBQ3BCLElBQUlxQixRQUFRLElBQUksRUFBRSxFQUFFQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTztnQkFBRUMsSUFBSUQsRUFBRUMsRUFBRTtnQkFBRVQsVUFBVVEsRUFBRVIsUUFBUTtnQkFBRUQsU0FBU1MsRUFBRVQsT0FBTztZQUFDO0lBQ3pHO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGJhbmVcXHN0b3JhZ2VcXHRvQXVkaXRSZWNvcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCYW5lSW5wdXQsIEJhbmVPdXRwdXQgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgQmFuZUF1ZGl0UmVjb3JkIH0gZnJvbSAnLi9yZWNvcmRzJztcclxuaW1wb3J0IHsgc2hhMjU2SGV4IH0gZnJvbSAnLi9oYXNoJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b0F1ZGl0UmVjb3JkKGlucHV0OiBCYW5lSW5wdXQsIG91dDogQmFuZU91dHB1dCk6IEJhbmVBdWRpdFJlY29yZCB7XHJcbiAgY29uc3QgcmF3VGV4dCA9IGlucHV0LnRleHQgPz8gJyc7XHJcbiAgY29uc3Qgc2FmZVRleHQgPSBvdXQuc2FmZVRleHQ7XHJcbiAgcmV0dXJuIHtcclxuICAgIGF0OiBEYXRlLm5vdygpLFxyXG4gICAgdHJhY2VJZDogb3V0LnRyYWNlSWQsXHJcbiAgICByb3V0ZTogU3RyaW5nKGlucHV0LnJlcT8ucm91dGUgPz8gJ3Vua25vd24nKSxcclxuICAgIHJlcXVpcmVkQ2FwYWJpbGl0eTogaW5wdXQucmVxPy5yZXF1aXJlZENhcGFiaWxpdHksXHJcbiAgICBpZGVudGl0eUlkOiBpbnB1dC5yZXE/LmF1dGg/LmlkZW50aXR5SWQsXHJcbiAgICB2ZXJkaWN0OiBvdXQudmVyZGljdCxcclxuICAgIHNldmVyaXR5OiBvdXQuc2V2ZXJpdHksXHJcbiAgICBlbmZvcmNlbWVudExldmVsOiBvdXQuZW5mb3JjZW1lbnRMZXZlbCxcclxuICAgIGlucHV0SGFzaDogc2hhMjU2SGV4KHJhd1RleHQpLFxyXG4gICAgc2FmZVRleHRIYXNoOiB0eXBlb2Ygc2FmZVRleHQgPT09ICdzdHJpbmcnID8gc2hhMjU2SGV4KHNhZmVUZXh0KSA6IHVuZGVmaW5lZCxcclxuICAgIGZpbmRpbmdzU3VtbWFyeTogKG91dC5maW5kaW5ncyA/PyBbXSkubWFwKChmKSA9PiAoeyBpZDogZi5pZCwgc2V2ZXJpdHk6IGYuc2V2ZXJpdHksIHZlcmRpY3Q6IGYudmVyZGljdCB9KSksXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsic2hhMjU2SGV4IiwidG9BdWRpdFJlY29yZCIsImlucHV0Iiwib3V0IiwicmF3VGV4dCIsInRleHQiLCJzYWZlVGV4dCIsImF0IiwiRGF0ZSIsIm5vdyIsInRyYWNlSWQiLCJyb3V0ZSIsIlN0cmluZyIsInJlcSIsInJlcXVpcmVkQ2FwYWJpbGl0eSIsImlkZW50aXR5SWQiLCJhdXRoIiwidmVyZGljdCIsInNldmVyaXR5IiwiZW5mb3JjZW1lbnRMZXZlbCIsImlucHV0SGFzaCIsInNhZmVUZXh0SGFzaCIsInVuZGVmaW5lZCIsImZpbmRpbmdzU3VtbWFyeSIsImZpbmRpbmdzIiwibWFwIiwiZiIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/bane/storage/toAuditRecord.ts\n");

/***/ }),

/***/ "(api-node)/../scing/firebase/admin.ts":
/*!**********************************!*\
  !*** ../scing/firebase/admin.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAdminApp: () => (/* binding */ getAdminApp),\n/* harmony export */   getAdminFirestore: () => (/* binding */ getAdminFirestore)\n/* harmony export */ });\n// Server-only Firebase Admin wrapper.\n// Uses GOOGLE_APPLICATION_CREDENTIALS or default service account in hosted envs.\n// NOTE: This module intentionally avoids a static import of `firebase-admin` so\n// the base repo does not require firebase-admin as a root dependency.\n// Cloud Functions (and any server host that installs firebase-admin) can use it.\nlet adminMod;\nlet app;\nfunction getAdmin() {\n    if (adminMod) return adminMod;\n    // Avoid bundlers trying to resolve firebase-admin at build time (e.g. Next.js).\n    const req = (0, eval)('require');\n    const loaded = req('firebase-admin');\n    adminMod = loaded?.default ?? loaded;\n    return adminMod;\n}\nfunction getAdminApp() {\n    if (app) return app;\n    const admin = getAdmin();\n    if (!admin.apps || admin.apps.length === 0) {\n        admin.initializeApp();\n    }\n    app = admin.app();\n    return app;\n}\nfunction getAdminFirestore() {\n    return getAdminApp().firestore();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9zY2luZy9maXJlYmFzZS9hZG1pbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHNDQUFzQztBQUN0QyxpRkFBaUY7QUFFakYsZ0ZBQWdGO0FBQ2hGLHNFQUFzRTtBQUN0RSxpRkFBaUY7QUFRakYsSUFBSUE7QUFDSixJQUFJQztBQUVKLFNBQVNDO0lBQ1AsSUFBSUYsVUFBVSxPQUFPQTtJQUVyQixnRkFBZ0Y7SUFDaEYsTUFBTUcsTUFBTSxDQUFDLEdBQUdDLElBQUcsRUFBRztJQUN0QixNQUFNQyxTQUFTRixJQUFJO0lBQ25CSCxXQUFZSyxRQUFRQyxXQUFXRDtJQUMvQixPQUFPTDtBQUNUO0FBRU8sU0FBU087SUFDZCxJQUFJTixLQUFLLE9BQU9BO0lBRWhCLE1BQU1PLFFBQVFOO0lBRWQsSUFBSSxDQUFDTSxNQUFNQyxJQUFJLElBQUlELE1BQU1DLElBQUksQ0FBQ0MsTUFBTSxLQUFLLEdBQUc7UUFDMUNGLE1BQU1HLGFBQWE7SUFDckI7SUFFQVYsTUFBTU8sTUFBTVAsR0FBRztJQUNmLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTVztJQUNkLE9BQU9MLGNBQWNNLFNBQVM7QUFDaEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFzdGVcXFNDSU5HT1NfV09SS1xcU2NpbmdPU1xcc2NpbmdcXGZpcmViYXNlXFxhZG1pbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZXJ2ZXItb25seSBGaXJlYmFzZSBBZG1pbiB3cmFwcGVyLlxyXG4vLyBVc2VzIEdPT0dMRV9BUFBMSUNBVElPTl9DUkVERU5USUFMUyBvciBkZWZhdWx0IHNlcnZpY2UgYWNjb3VudCBpbiBob3N0ZWQgZW52cy5cclxuXHJcbi8vIE5PVEU6IFRoaXMgbW9kdWxlIGludGVudGlvbmFsbHkgYXZvaWRzIGEgc3RhdGljIGltcG9ydCBvZiBgZmlyZWJhc2UtYWRtaW5gIHNvXHJcbi8vIHRoZSBiYXNlIHJlcG8gZG9lcyBub3QgcmVxdWlyZSBmaXJlYmFzZS1hZG1pbiBhcyBhIHJvb3QgZGVwZW5kZW5jeS5cclxuLy8gQ2xvdWQgRnVuY3Rpb25zIChhbmQgYW55IHNlcnZlciBob3N0IHRoYXQgaW5zdGFsbHMgZmlyZWJhc2UtYWRtaW4pIGNhbiB1c2UgaXQuXHJcblxyXG50eXBlIEFkbWluTW9kdWxlID0ge1xyXG4gIGFwcHM6IGFueVtdO1xyXG4gIGluaXRpYWxpemVBcHA6ICgpID0+IHZvaWQ7XHJcbiAgYXBwOiAoKSA9PiBhbnk7XHJcbn07XHJcblxyXG5sZXQgYWRtaW5Nb2Q6IEFkbWluTW9kdWxlIHwgdW5kZWZpbmVkO1xyXG5sZXQgYXBwOiBhbnkgfCB1bmRlZmluZWQ7XHJcblxyXG5mdW5jdGlvbiBnZXRBZG1pbigpOiBBZG1pbk1vZHVsZSB7XHJcbiAgaWYgKGFkbWluTW9kKSByZXR1cm4gYWRtaW5Nb2Q7XHJcblxyXG4gIC8vIEF2b2lkIGJ1bmRsZXJzIHRyeWluZyB0byByZXNvbHZlIGZpcmViYXNlLWFkbWluIGF0IGJ1aWxkIHRpbWUgKGUuZy4gTmV4dC5qcykuXHJcbiAgY29uc3QgcmVxID0gKDAsIGV2YWwpKCdyZXF1aXJlJykgYXMgKGlkOiBzdHJpbmcpID0+IGFueTtcclxuICBjb25zdCBsb2FkZWQgPSByZXEoJ2ZpcmViYXNlLWFkbWluJyk7XHJcbiAgYWRtaW5Nb2QgPSAobG9hZGVkPy5kZWZhdWx0ID8/IGxvYWRlZCkgYXMgQWRtaW5Nb2R1bGU7XHJcbiAgcmV0dXJuIGFkbWluTW9kO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRtaW5BcHAoKTogYW55IHtcclxuICBpZiAoYXBwKSByZXR1cm4gYXBwO1xyXG5cclxuICBjb25zdCBhZG1pbiA9IGdldEFkbWluKCk7XHJcblxyXG4gIGlmICghYWRtaW4uYXBwcyB8fCBhZG1pbi5hcHBzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgYWRtaW4uaW5pdGlhbGl6ZUFwcCgpO1xyXG4gIH1cclxuXHJcbiAgYXBwID0gYWRtaW4uYXBwKCk7XHJcbiAgcmV0dXJuIGFwcDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkbWluRmlyZXN0b3JlKCk6IGFueSB7XHJcbiAgcmV0dXJuIGdldEFkbWluQXBwKCkuZmlyZXN0b3JlKCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImFkbWluTW9kIiwiYXBwIiwiZ2V0QWRtaW4iLCJyZXEiLCJldmFsIiwibG9hZGVkIiwiZGVmYXVsdCIsImdldEFkbWluQXBwIiwiYWRtaW4iLCJhcHBzIiwibGVuZ3RoIiwiaW5pdGlhbGl6ZUFwcCIsImdldEFkbWluRmlyZXN0b3JlIiwiZmlyZXN0b3JlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../scing/firebase/admin.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fneural%2Fstream&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cneural%5Cstream.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fneural%2Fstream&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cneural%5Cstream.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_neural_stream_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages\\api\\neural\\stream.ts */ \"(api-node)/./pages/api/neural/stream.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(api-node)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n// Import the userland code.\n\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_neural_stream_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_neural_stream_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/neural/stream\",\n        pathname: \"/api/neural/stream\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_neural_stream_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\\\\dev\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7__.addRequestMeta)(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/neural/stream\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/neural/stream\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGbmV1cmFsJTJGc3RyZWFtJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNuZXVyYWwlNUNzdHJlYW0udHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQztBQUN1QztBQUNyQztBQUMxRDtBQUM0RDtBQUNZO0FBQ0Y7QUFDUDtBQUMvRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osYUFBYSxZQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9ELENBQUM7QUFDTTtBQUNQO0FBQ0EsUUFBUSw2RUFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUF3RDtBQUNwRTtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDZDQUE2QyxFQUE2QztBQUMxRiw0Q0FBNEMsS0FBd0M7QUFDcEYsaUNBQWlDLEtBQW9DO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFTO0FBQ2pCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZW5kRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcGktdXRpbHNcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXG5ldXJhbFxcXFxzdHJlYW0udHNcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGFkZFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL25ldXJhbC9zdHJlYW1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9uZXVyYWwvc3RyZWFtXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmQsXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgYWRkUmVxdWVzdE1ldGEocmVxLCAnZGV2UmVxdWVzdFRpbWluZ0ludGVybmFsc0VuZCcsIHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpKTtcbiAgICB9XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvbmV1cmFsL3N0cmVhbVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnksIHBhcmFtcywgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICAgICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgICAgIGNvbnN0IG9uUmVxdWVzdEVycm9yID0gcm91dGVNb2R1bGUuaW5zdHJ1bWVudGF0aW9uT25SZXF1ZXN0RXJyb3IuYmluZChyb3V0ZU1vZHVsZSk7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT5yb3V0ZU1vZHVsZS5yZW5kZXIocmVxLCByZXMsIHtcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgYWxsb3dlZFJldmFsaWRhdGVIZWFkZXJLZXlzOiBwcm9jZXNzLmVudi5fX05FWFRfQUxMT1dFRF9SRVZBTElEQVRFX0hFQURFUlMsXG4gICAgICAgICAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlOiBCb29sZWFuKHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREUpLFxuICAgICAgICAgICAgICAgIHRydXN0SG9zdEhlYWRlcjogcHJvY2Vzcy5lbnYuX19ORVhUX1RSVVNUX0hPU1RfSEVBREVSLFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGdldCB0aGlzIGZyb20gZnJvbSBydW50aW1lIGVudiBzbyBtYW5pZmVzdFxuICAgICAgICAgICAgICAgIC8vIGRvZXNuJ3QgbmVlZCB0byBsb2FkXG4gICAgICAgICAgICAgICAgcHJldmlld1Byb3BzOiBwcmVyZW5kZXJNYW5pZmVzdC5wcmV2aWV3LFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUVycm9yOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkZXY6IHJvdXRlTW9kdWxlLmlzRGV2LFxuICAgICAgICAgICAgICAgIHBhZ2U6IFwiL2FwaS9uZXVyYWwvc3RyZWFtXCIsXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxSZXZhbGlkYXRlOiByb3V0ZXJTZXJ2ZXJDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTZXJ2ZXJDb250ZXh0LnJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKC4uLmFyZ3MpPT5vblJlcXVlc3RFcnJvcihyZXEsIC4uLmFyZ3MpXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3NyY1BhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3NyY1BhZ2V9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBpbnZva2VSb3V0ZU1vZHVsZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIHdlIHJlLXRocm93IGluIGRldiB0byBzaG93IHRoZSBlcnJvciBvdmVybGF5XG4gICAgICAgIGlmIChyb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgaXMgdGVjaG5pY2FsbHkgYW4gaW52YXJpYW50IGFzIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIC8vIHNob3VsZCBiZSBkb25lIGluc2lkZSBvZiBhcGktcmVzb2x2ZXIgb25FcnJvclxuICAgICAgICBzZW5kRXJyb3IocmVzLCA1MDAsICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcbiAgICB9IGZpbmFsbHl7XG4gICAgICAgIC8vIFdlIGRvbid0IGFsbG93IGFueSB3YWl0VW50aWwgd29yayBpbiBwYWdlcyBBUEkgcm91dGVzIGN1cnJlbnRseVxuICAgICAgICAvLyBzbyBpZiBjYWxsYmFjayBpcyBwcmVzZW50IHJldHVybiB3aXRoIHJlc29sdmVkIHByb21pc2Ugc2luY2Ugbm9cbiAgICAgICAgLy8gcGVuZGluZyB3b3JrXG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fneural%2Fstream&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cneural%5Cstream.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/neural/stream.ts":
/*!************************************!*\
  !*** ./pages/api/neural/stream.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _scing_bane_server_baneGuards__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @scing/bane/server/baneGuards */ \"(api-node)/../scing/bane/server/baneGuards.ts\");\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nfunction clamp01(n) {\n    return Math.max(0, Math.min(1, n));\n}\nfunction makeEvent(ts) {\n    const phase = ts / 1000 % (Math.PI * 2);\n    const intensity = clamp01(0.55 + 0.35 * Math.sin(phase));\n    const modes = [\n        'think',\n        'speak',\n        'alert',\n        'idle'\n    ];\n    const mode = modes[Math.floor(ts / 2500 % modes.length)];\n    const channels = {\n        lari: mode === 'think' ? 1 : mode === 'idle' ? 0.35 : 0.15,\n        bane: mode === 'alert' ? 1 : 0.1,\n        io: mode === 'speak' ? 0.75 : 0.25\n    };\n    return {\n        ts,\n        source: 'neural-backend-stub',\n        mode,\n        intensity,\n        channels,\n        payload: {\n            text: mode === 'speak' ? 'demo: speaking' : mode === 'think' ? 'demo: thinking' : undefined,\n            tags: [\n                'demo',\n                `mode:${mode}`\n            ]\n        }\n    };\n}\nfunction writeEvent(res, evt) {\n    res.write(`data: ${JSON.stringify(evt)}\\n\\n`);\n}\nfunction handler(req, res) {\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET, OPTIONS');\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');\n    if (req.method === 'OPTIONS') {\n        res.status(204).end();\n        return;\n    }\n    const host = typeof req.headers.host === 'string' ? req.headers.host : 'localhost';\n    const path = req.url ? new URL(req.url, `http://${host}`).pathname : '/api/neural/stream';\n    const identityId = typeof req.headers['x-bane-identity'] === 'string' ? req.headers['x-bane-identity'] : undefined;\n    const capsHeader = typeof req.headers['x-bane-capabilities'] === 'string' ? req.headers['x-bane-capabilities'] : '';\n    const capabilities = capsHeader ? capsHeader.split(',').map((s)=>s.trim()).filter(Boolean) : undefined;\n    const decision = (0,_scing_bane_server_baneGuards__WEBPACK_IMPORTED_MODULE_0__.baneHttpGuard)({\n        path,\n        bodyText: '',\n        identityId,\n        capabilities,\n        sessionIntegrity: identityId ? {\n            nonceOk: true,\n            signatureOk: true,\n            tokenFresh: true\n        } : {\n            nonceOk: false,\n            signatureOk: false,\n            tokenFresh: false\n        }\n    });\n    if (!decision.ok) {\n        res.setHeader('x-bane-trace-id', decision.traceId);\n        if (decision.retryAfterMs) res.setHeader('retry-after', String(Math.ceil(decision.retryAfterMs / 1000)));\n        res.status(decision.status).json({\n            ok: false,\n            message: decision.message,\n            traceId: decision.traceId\n        });\n        return;\n    }\n    res.setHeader('x-bane-trace-id', decision.traceId);\n    res.writeHead(200, {\n        'Content-Type': 'text/event-stream; charset=utf-8',\n        'Cache-Control': 'no-cache, no-transform',\n        Connection: 'keep-alive'\n    });\n    // Flush headers early.\n    res.flushHeaders?.();\n    // Avoid server-side timeouts killing the stream.\n    try {\n        req.socket.setTimeout(0);\n    } catch  {\n    // ignore\n    }\n    // Initial event.\n    writeEvent(res, makeEvent(Date.now()));\n    // Emit every 5001000ms (jittered).\n    let closed = false;\n    const timers = new Set();\n    const schedule = ()=>{\n        if (closed) return;\n        const delay = 500 + Math.floor(Date.now() % 500);\n        const t = setTimeout(()=>{\n            if (closed) return;\n            // Comment line as keep-alive for proxies.\n            res.write(`: ping ${Date.now()}\\n\\n`);\n            writeEvent(res, makeEvent(Date.now()));\n            schedule();\n        }, delay);\n        timers.add(t);\n    };\n    schedule();\n    const onClose = ()=>{\n        closed = true;\n        for (const t of timers)clearTimeout(t);\n        timers.clear();\n        res.end();\n    };\n    req.on('close', onClose);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9uZXVyYWwvc3RyZWFtLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUM4RDtBQXFCdkQsTUFBTUMsU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFO0FBRUYsU0FBU0MsUUFBUUMsQ0FBUztJQUN4QixPQUFPQyxLQUFLQyxHQUFHLENBQUMsR0FBR0QsS0FBS0UsR0FBRyxDQUFDLEdBQUdIO0FBQ2pDO0FBRUEsU0FBU0ksVUFBVUMsRUFBVTtJQUMzQixNQUFNQyxRQUFRLEtBQU0sT0FBU0wsQ0FBQUEsS0FBS00sRUFBRSxHQUFHO0lBQ3ZDLE1BQU1DLFlBQVlULFFBQVEsT0FBTyxPQUFPRSxLQUFLUSxHQUFHLENBQUNIO0lBRWpELE1BQU1JLFFBQXNCO1FBQUM7UUFBUztRQUFTO1FBQVM7S0FBTztJQUMvRCxNQUFNQyxPQUFPRCxLQUFLLENBQUNULEtBQUtXLEtBQUssQ0FBQyxLQUFNLE9BQVFGLE1BQU1HLE1BQU0sRUFBRTtJQUUxRCxNQUFNQyxXQUFXO1FBQ2ZDLE1BQU1KLFNBQVMsVUFBVSxJQUFJQSxTQUFTLFNBQVMsT0FBTztRQUN0REssTUFBTUwsU0FBUyxVQUFVLElBQUk7UUFDN0JNLElBQUlOLFNBQVMsVUFBVSxPQUFPO0lBQ2hDO0lBRUEsT0FBTztRQUNMTjtRQUNBYSxRQUFRO1FBQ1JQO1FBQ0FIO1FBQ0FNO1FBQ0FLLFNBQVM7WUFDUEMsTUFBTVQsU0FBUyxVQUFVLG1CQUFtQkEsU0FBUyxVQUFVLG1CQUFtQlU7WUFDbEZDLE1BQU07Z0JBQUM7Z0JBQVEsQ0FBQyxLQUFLLEVBQUVYLE1BQU07YUFBQztRQUNoQztJQUNGO0FBQ0Y7QUFFQSxTQUFTWSxXQUFXQyxHQUFvQixFQUFFQyxHQUFnQjtJQUN4REQsSUFBSUUsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFQyxLQUFLQyxTQUFTLENBQUNILEtBQUssSUFBSSxDQUFDO0FBQzlDO0FBRWUsU0FBU0ksUUFBUUMsR0FBbUIsRUFBRU4sR0FBb0I7SUFDdkVBLElBQUlPLFNBQVMsQ0FBQywrQkFBK0I7SUFDN0NQLElBQUlPLFNBQVMsQ0FBQyxnQ0FBZ0M7SUFDOUNQLElBQUlPLFNBQVMsQ0FBQyxnQ0FBZ0M7SUFFOUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFdBQVc7UUFDNUJSLElBQUlTLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO1FBQ25CO0lBQ0Y7SUFFQSxNQUFNQyxPQUFPLE9BQU9MLElBQUlNLE9BQU8sQ0FBQ0QsSUFBSSxLQUFLLFdBQVdMLElBQUlNLE9BQU8sQ0FBQ0QsSUFBSSxHQUFHO0lBQ3ZFLE1BQU1FLE9BQU9QLElBQUlRLEdBQUcsR0FBRyxJQUFJQyxJQUFJVCxJQUFJUSxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUVILE1BQU0sRUFBRUssUUFBUSxHQUFHO0lBQ3JFLE1BQU1DLGFBQWEsT0FBT1gsSUFBSU0sT0FBTyxDQUFDLGtCQUFrQixLQUFLLFdBQVdOLElBQUlNLE9BQU8sQ0FBQyxrQkFBa0IsR0FBR2Y7SUFDekcsTUFBTXFCLGFBQWEsT0FBT1osSUFBSU0sT0FBTyxDQUFDLHNCQUFzQixLQUFLLFdBQVdOLElBQUlNLE9BQU8sQ0FBQyxzQkFBc0IsR0FBRztJQUNqSCxNQUFNTyxlQUFlRCxhQUNqQkEsV0FDR0UsS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ2pCQyxNQUFNLENBQUNDLFdBQ1Y1QjtJQUVKLE1BQU02QixXQUFXdkQsNEVBQWFBLENBQUM7UUFDN0IwQztRQUNBYyxVQUFVO1FBQ1ZWO1FBQ0FFO1FBQ0FTLGtCQUFrQlgsYUFDZDtZQUFFWSxTQUFTO1lBQU1DLGFBQWE7WUFBTUMsWUFBWTtRQUFLLElBQ3JEO1lBQUVGLFNBQVM7WUFBT0MsYUFBYTtZQUFPQyxZQUFZO1FBQU07SUFDOUQ7SUFFQSxJQUFJLENBQUNMLFNBQVNNLEVBQUUsRUFBRTtRQUNoQmhDLElBQUlPLFNBQVMsQ0FBQyxtQkFBbUJtQixTQUFTTyxPQUFPO1FBQ2pELElBQUlQLFNBQVNRLFlBQVksRUFBRWxDLElBQUlPLFNBQVMsQ0FBQyxlQUFlNEIsT0FBTzFELEtBQUsyRCxJQUFJLENBQUNWLFNBQVNRLFlBQVksR0FBRztRQUNqR2xDLElBQUlTLE1BQU0sQ0FBQ2lCLFNBQVNqQixNQUFNLEVBQUU0QixJQUFJLENBQUM7WUFBRUwsSUFBSTtZQUFPTSxTQUFTWixTQUFTWSxPQUFPO1lBQUVMLFNBQVNQLFNBQVNPLE9BQU87UUFBQztRQUNuRztJQUNGO0lBRUFqQyxJQUFJTyxTQUFTLENBQUMsbUJBQW1CbUIsU0FBU08sT0FBTztJQUVqRGpDLElBQUl1QyxTQUFTLENBQUMsS0FBSztRQUNqQixnQkFBZ0I7UUFDaEIsaUJBQWlCO1FBQ2pCQyxZQUFZO0lBQ2Q7SUFFQSx1QkFBdUI7SUFDdkJ4QyxJQUFJeUMsWUFBWTtJQUVoQixpREFBaUQ7SUFDakQsSUFBSTtRQUNGbkMsSUFBSW9DLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDO0lBQ3hCLEVBQUUsT0FBTTtJQUNOLFNBQVM7SUFDWDtJQUVBLGlCQUFpQjtJQUNqQjVDLFdBQVdDLEtBQUtwQixVQUFVZ0UsS0FBS0MsR0FBRztJQUVsQyxvQ0FBb0M7SUFDcEMsSUFBSUMsU0FBUztJQUNiLE1BQU1DLFNBQVMsSUFBSUM7SUFFbkIsTUFBTUMsV0FBVztRQUNmLElBQUlILFFBQVE7UUFFWixNQUFNSSxRQUFRLE1BQU16RSxLQUFLVyxLQUFLLENBQUV3RCxLQUFLQyxHQUFHLEtBQUs7UUFDN0MsTUFBTU0sSUFBSVIsV0FBVztZQUNuQixJQUFJRyxRQUFRO1lBRVosMENBQTBDO1lBQzFDOUMsSUFBSUUsS0FBSyxDQUFDLENBQUMsT0FBTyxFQUFFMEMsS0FBS0MsR0FBRyxHQUFHLElBQUksQ0FBQztZQUNwQzlDLFdBQVdDLEtBQUtwQixVQUFVZ0UsS0FBS0MsR0FBRztZQUNsQ0k7UUFDRixHQUFHQztRQUVISCxPQUFPSyxHQUFHLENBQUNEO0lBQ2I7SUFFQUY7SUFFQSxNQUFNSSxVQUFVO1FBQ2RQLFNBQVM7UUFDVCxLQUFLLE1BQU1LLEtBQUtKLE9BQVFPLGFBQWFIO1FBQ3JDSixPQUFPUSxLQUFLO1FBQ1p2RCxJQUFJVSxHQUFHO0lBQ1Q7SUFFQUosSUFBSWtELEVBQUUsQ0FBQyxTQUFTSDtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXN0ZVxcU0NJTkdPU19XT1JLXFxTY2luZ09TXFxjbGllbnRcXHBhZ2VzXFxhcGlcXG5ldXJhbFxcc3RyZWFtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBiYW5lSHR0cEd1YXJkIH0gZnJvbSAnQHNjaW5nL2JhbmUvc2VydmVyL2JhbmVHdWFyZHMnO1xyXG5cclxudHlwZSBOZXVyYWxNb2RlID0gJ3RoaW5rJyB8ICdzcGVhaycgfCAnYWxlcnQnIHwgJ2lkbGUnO1xyXG5cclxudHlwZSBOZXVyYWxFdmVudCA9IHtcclxuICB0czogbnVtYmVyO1xyXG4gIHNvdXJjZTogc3RyaW5nO1xyXG4gIG1vZGU6IE5ldXJhbE1vZGU7XHJcbiAgaW50ZW5zaXR5OiBudW1iZXI7XHJcbiAgY2hhbm5lbHM6IHtcclxuICAgIGxhcmk6IG51bWJlcjtcclxuICAgIGJhbmU6IG51bWJlcjtcclxuICAgIGlvOiBudW1iZXI7XHJcbiAgfTtcclxuICBwYXlsb2FkPzoge1xyXG4gICAgdGV4dD86IHN0cmluZztcclxuICAgIHNlc3Npb25JZD86IHN0cmluZztcclxuICAgIHRhZ3M/OiBzdHJpbmdbXTtcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjbGFtcDAxKG46IG51bWJlcikge1xyXG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBuKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VFdmVudCh0czogbnVtYmVyKTogTmV1cmFsRXZlbnQge1xyXG4gIGNvbnN0IHBoYXNlID0gKHRzIC8gMTAwMCkgJSAoTWF0aC5QSSAqIDIpO1xyXG4gIGNvbnN0IGludGVuc2l0eSA9IGNsYW1wMDEoMC41NSArIDAuMzUgKiBNYXRoLnNpbihwaGFzZSkpO1xyXG5cclxuICBjb25zdCBtb2RlczogTmV1cmFsTW9kZVtdID0gWyd0aGluaycsICdzcGVhaycsICdhbGVydCcsICdpZGxlJ107XHJcbiAgY29uc3QgbW9kZSA9IG1vZGVzW01hdGguZmxvb3IoKHRzIC8gMjUwMCkgJSBtb2Rlcy5sZW5ndGgpXTtcclxuXHJcbiAgY29uc3QgY2hhbm5lbHMgPSB7XHJcbiAgICBsYXJpOiBtb2RlID09PSAndGhpbmsnID8gMSA6IG1vZGUgPT09ICdpZGxlJyA/IDAuMzUgOiAwLjE1LFxyXG4gICAgYmFuZTogbW9kZSA9PT0gJ2FsZXJ0JyA/IDEgOiAwLjEsXHJcbiAgICBpbzogbW9kZSA9PT0gJ3NwZWFrJyA/IDAuNzUgOiAwLjI1LFxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB0cyxcclxuICAgIHNvdXJjZTogJ25ldXJhbC1iYWNrZW5kLXN0dWInLFxyXG4gICAgbW9kZSxcclxuICAgIGludGVuc2l0eSxcclxuICAgIGNoYW5uZWxzLFxyXG4gICAgcGF5bG9hZDoge1xyXG4gICAgICB0ZXh0OiBtb2RlID09PSAnc3BlYWsnID8gJ2RlbW86IHNwZWFraW5nJyA6IG1vZGUgPT09ICd0aGluaycgPyAnZGVtbzogdGhpbmtpbmcnIDogdW5kZWZpbmVkLFxyXG4gICAgICB0YWdzOiBbJ2RlbW8nLCBgbW9kZToke21vZGV9YF0sXHJcbiAgICB9LFxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlRXZlbnQocmVzOiBOZXh0QXBpUmVzcG9uc2UsIGV2dDogTmV1cmFsRXZlbnQpIHtcclxuICByZXMud3JpdGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZXZ0KX1cXG5cXG5gKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIE9QVElPTlMnKTtcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZScpO1xyXG5cclxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XHJcbiAgICByZXMuc3RhdHVzKDIwNCkuZW5kKCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBob3N0ID0gdHlwZW9mIHJlcS5oZWFkZXJzLmhvc3QgPT09ICdzdHJpbmcnID8gcmVxLmhlYWRlcnMuaG9zdCA6ICdsb2NhbGhvc3QnO1xyXG4gIGNvbnN0IHBhdGggPSByZXEudXJsID8gbmV3IFVSTChyZXEudXJsLCBgaHR0cDovLyR7aG9zdH1gKS5wYXRobmFtZSA6ICcvYXBpL25ldXJhbC9zdHJlYW0nO1xyXG4gIGNvbnN0IGlkZW50aXR5SWQgPSB0eXBlb2YgcmVxLmhlYWRlcnNbJ3gtYmFuZS1pZGVudGl0eSddID09PSAnc3RyaW5nJyA/IHJlcS5oZWFkZXJzWyd4LWJhbmUtaWRlbnRpdHknXSA6IHVuZGVmaW5lZDtcclxuICBjb25zdCBjYXBzSGVhZGVyID0gdHlwZW9mIHJlcS5oZWFkZXJzWyd4LWJhbmUtY2FwYWJpbGl0aWVzJ10gPT09ICdzdHJpbmcnID8gcmVxLmhlYWRlcnNbJ3gtYmFuZS1jYXBhYmlsaXRpZXMnXSA6ICcnO1xyXG4gIGNvbnN0IGNhcGFiaWxpdGllcyA9IGNhcHNIZWFkZXJcclxuICAgID8gY2Fwc0hlYWRlclxyXG4gICAgICAgIC5zcGxpdCgnLCcpXHJcbiAgICAgICAgLm1hcCgocykgPT4gcy50cmltKCkpXHJcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgOiB1bmRlZmluZWQ7XHJcblxyXG4gIGNvbnN0IGRlY2lzaW9uID0gYmFuZUh0dHBHdWFyZCh7XHJcbiAgICBwYXRoLFxyXG4gICAgYm9keVRleHQ6ICcnLFxyXG4gICAgaWRlbnRpdHlJZCxcclxuICAgIGNhcGFiaWxpdGllcyxcclxuICAgIHNlc3Npb25JbnRlZ3JpdHk6IGlkZW50aXR5SWRcclxuICAgICAgPyB7IG5vbmNlT2s6IHRydWUsIHNpZ25hdHVyZU9rOiB0cnVlLCB0b2tlbkZyZXNoOiB0cnVlIH1cclxuICAgICAgOiB7IG5vbmNlT2s6IGZhbHNlLCBzaWduYXR1cmVPazogZmFsc2UsIHRva2VuRnJlc2g6IGZhbHNlIH0sXHJcbiAgfSk7XHJcblxyXG4gIGlmICghZGVjaXNpb24ub2spIHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ3gtYmFuZS10cmFjZS1pZCcsIGRlY2lzaW9uLnRyYWNlSWQpO1xyXG4gICAgaWYgKGRlY2lzaW9uLnJldHJ5QWZ0ZXJNcykgcmVzLnNldEhlYWRlcigncmV0cnktYWZ0ZXInLCBTdHJpbmcoTWF0aC5jZWlsKGRlY2lzaW9uLnJldHJ5QWZ0ZXJNcyAvIDEwMDApKSk7XHJcbiAgICByZXMuc3RhdHVzKGRlY2lzaW9uLnN0YXR1cykuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogZGVjaXNpb24ubWVzc2FnZSwgdHJhY2VJZDogZGVjaXNpb24udHJhY2VJZCB9KTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHJlcy5zZXRIZWFkZXIoJ3gtYmFuZS10cmFjZS1pZCcsIGRlY2lzaW9uLnRyYWNlSWQpO1xyXG5cclxuICByZXMud3JpdGVIZWFkKDIwMCwge1xyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbTsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZSwgbm8tdHJhbnNmb3JtJyxcclxuICAgIENvbm5lY3Rpb246ICdrZWVwLWFsaXZlJyxcclxuICB9KTtcclxuXHJcbiAgLy8gRmx1c2ggaGVhZGVycyBlYXJseS5cclxuICByZXMuZmx1c2hIZWFkZXJzPy4oKTtcclxuXHJcbiAgLy8gQXZvaWQgc2VydmVyLXNpZGUgdGltZW91dHMga2lsbGluZyB0aGUgc3RyZWFtLlxyXG4gIHRyeSB7XHJcbiAgICByZXEuc29ja2V0LnNldFRpbWVvdXQoMCk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICAvLyBpZ25vcmVcclxuICB9XHJcblxyXG4gIC8vIEluaXRpYWwgZXZlbnQuXHJcbiAgd3JpdGVFdmVudChyZXMsIG1ha2VFdmVudChEYXRlLm5vdygpKSk7XHJcblxyXG4gIC8vIEVtaXQgZXZlcnkgNTAw4oCTMTAwMG1zIChqaXR0ZXJlZCkuXHJcbiAgbGV0IGNsb3NlZCA9IGZhbHNlO1xyXG4gIGNvbnN0IHRpbWVycyA9IG5ldyBTZXQ8Tm9kZUpTLlRpbWVvdXQ+KCk7XHJcblxyXG4gIGNvbnN0IHNjaGVkdWxlID0gKCkgPT4ge1xyXG4gICAgaWYgKGNsb3NlZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGRlbGF5ID0gNTAwICsgTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAlIDUwMCkpO1xyXG4gICAgY29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAoY2xvc2VkKSByZXR1cm47XHJcblxyXG4gICAgICAvLyBDb21tZW50IGxpbmUgYXMga2VlcC1hbGl2ZSBmb3IgcHJveGllcy5cclxuICAgICAgcmVzLndyaXRlKGA6IHBpbmcgJHtEYXRlLm5vdygpfVxcblxcbmApO1xyXG4gICAgICB3cml0ZUV2ZW50KHJlcywgbWFrZUV2ZW50KERhdGUubm93KCkpKTtcclxuICAgICAgc2NoZWR1bGUoKTtcclxuICAgIH0sIGRlbGF5KTtcclxuXHJcbiAgICB0aW1lcnMuYWRkKHQpO1xyXG4gIH07XHJcblxyXG4gIHNjaGVkdWxlKCk7XHJcblxyXG4gIGNvbnN0IG9uQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICBjbG9zZWQgPSB0cnVlO1xyXG4gICAgZm9yIChjb25zdCB0IG9mIHRpbWVycykgY2xlYXJUaW1lb3V0KHQpO1xyXG4gICAgdGltZXJzLmNsZWFyKCk7XHJcbiAgICByZXMuZW5kKCk7XHJcbiAgfTtcclxuXHJcbiAgcmVxLm9uKCdjbG9zZScsIG9uQ2xvc2UpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJiYW5lSHR0cEd1YXJkIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImNsYW1wMDEiLCJuIiwiTWF0aCIsIm1heCIsIm1pbiIsIm1ha2VFdmVudCIsInRzIiwicGhhc2UiLCJQSSIsImludGVuc2l0eSIsInNpbiIsIm1vZGVzIiwibW9kZSIsImZsb29yIiwibGVuZ3RoIiwiY2hhbm5lbHMiLCJsYXJpIiwiYmFuZSIsImlvIiwic291cmNlIiwicGF5bG9hZCIsInRleHQiLCJ1bmRlZmluZWQiLCJ0YWdzIiwid3JpdGVFdmVudCIsInJlcyIsImV2dCIsIndyaXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsImhhbmRsZXIiLCJyZXEiLCJzZXRIZWFkZXIiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJob3N0IiwiaGVhZGVycyIsInBhdGgiLCJ1cmwiLCJVUkwiLCJwYXRobmFtZSIsImlkZW50aXR5SWQiLCJjYXBzSGVhZGVyIiwiY2FwYWJpbGl0aWVzIiwic3BsaXQiLCJtYXAiLCJzIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJkZWNpc2lvbiIsImJvZHlUZXh0Iiwic2Vzc2lvbkludGVncml0eSIsIm5vbmNlT2siLCJzaWduYXR1cmVPayIsInRva2VuRnJlc2giLCJvayIsInRyYWNlSWQiLCJyZXRyeUFmdGVyTXMiLCJTdHJpbmciLCJjZWlsIiwianNvbiIsIm1lc3NhZ2UiLCJ3cml0ZUhlYWQiLCJDb25uZWN0aW9uIiwiZmx1c2hIZWFkZXJzIiwic29ja2V0Iiwic2V0VGltZW91dCIsIkRhdGUiLCJub3ciLCJjbG9zZWQiLCJ0aW1lcnMiLCJTZXQiLCJzY2hlZHVsZSIsImRlbGF5IiwidCIsImFkZCIsIm9uQ2xvc2UiLCJjbGVhclRpbWVvdXQiLCJjbGVhciIsIm9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/neural/stream.ts\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fneural%2Fstream&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cneural%5Cstream.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();