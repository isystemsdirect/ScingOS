{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "SyncDocs",
			"type": "shell",
			"command": "node scripts/syncDocsToWiki.js",
			"problemMatcher": []
		},
		{
			"label": "SyncWiki",
			"type": "shell",
			"command": "node scripts/syncWikiToDocs.js",
			"problemMatcher": []
		},
		{
			"label": "Sync Dynamic Library",
			"type": "shell",
			"command": "node sync-library.js",
			"problemMatcher": []
		},
		{
			"label": "Scing Avatar: Run Emulator (Vite)",
			"type": "shell",
			"command": "npm.cmd run dev",
			"options": {
				"cwd": "${workspaceFolder}/experiments/scing_avatar_env"
			},
			"isBackground": true,
			"problemMatcher": [
				{
					"owner": "vite",
					"fileLocation": [
						"relative",
						"${workspaceFolder}/experiments/scing_avatar_env"
					],
					"pattern": [
						{
							"regexp": "^([^:\\r\\n]+):(\\d+):(\\d+):\\s+(ERROR|WARNING):\\s+(.*)$",
							"file": 1,
							"line": 2,
							"column": 3,
							"severity": 4,
							"message": 5
						}
					],
					"background": {
						"activeOnStart": true,
						"beginsPattern": "^\\s*>\\s+.*\\s+dev\\s*$|^\\s*VITE\\s+v",
						"endsPattern": "ready in"
					}
				}
			],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated"
			}
		},
		{
			"label": "scing_avatar_env: npm install",
			"type": "shell",
			"command": "cd experiments\\scing_avatar_env; npm install",
			"isBackground": false,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "scing_avatar_env: npm.cmd install",
			"type": "shell",
			"command": "cd experiments\\scing_avatar_env; npm.cmd install",
			"isBackground": false,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "git: status (porcelain)",
			"type": "shell",
			"command": "git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: status",
			"type": "shell",
			"command": "git status",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: stash non-experiments changes",
			"type": "shell",
			"command": "git stash push -u -m \"wip: stash non-experiments before avatar-emulator commit\" -- cloud/functions/eslint.config.cjs cloud/functions/package-lock.json cloud/functions/src/isdc/protocol.ts .github/regenerate_client_lock.bat conflicts.txt",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: current branch + status",
			"type": "shell",
			"command": "git rev-parse --abbrev-ref HEAD; git status --porcelain=v1; git stash list",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: stash all WIP",
			"type": "shell",
			"command": "git stash push -u -m \"wip before avatar-emulator commit\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: status after stash attempt",
			"type": "shell",
			"command": "git status --porcelain=v1; git stash list",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: inspect diffs",
			"type": "shell",
			"command": "git status; git diff --name-only; git diff --stat",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: stash all (retry include-untracked)",
			"type": "shell",
			"command": "git stash push --include-untracked -m \"wip before avatar commit 2\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: stash attempt (clean output)",
			"type": "shell",
			"command": "Clear-Host; git status --porcelain=v1; git stash push -u -m \"wip-before-avatar-commit\"; git status --porcelain=v1; git stash list",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: status now",
			"type": "shell",
			"command": "Clear-Host; git status",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: check ScingOSEnvironment subrepo status",
			"type": "shell",
			"command": "Clear-Host; git -C ScingOSEnvironment status --porcelain=v1; git -C ScingOSEnvironment rev-parse --abbrev-ref HEAD",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: discard ScingOSEnvironment changes",
			"type": "shell",
			"command": "Clear-Host; git -C ScingOSEnvironment reset --hard; git -C ScingOSEnvironment clean -fd; git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: status clean check",
			"type": "shell",
			"command": "Clear-Host; git status --porcelain=v1; git stash list",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: switch to main",
			"type": "shell",
			"command": "Clear-Host; git switch main; git rev-parse --abbrev-ref HEAD",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: apply avatar-emulator stash onto main",
			"type": "shell",
			"command": "Clear-Host; git stash apply stash@{0}; git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: apply stash@{0} (quoted)",
			"type": "shell",
			"command": "Clear-Host; git stash apply \"stash@{0}\"; git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: apply stash@{0} (single quotes)",
			"type": "shell",
			"command": "Clear-Host; git stash apply 'stash@{0}'; git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "cleanup: remove ScingOS.wiki dir",
			"type": "shell",
			"command": "if (Test-Path ScingOS.wiki) { Remove-Item -Recurse -Force ScingOS.wiki }; git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: status verify only experiments",
			"type": "shell",
			"command": "Clear-Host; git status; git diff --cached --name-only",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: add experiments",
			"type": "shell",
			"command": "git add experiments/scing_avatar_env",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: commit avatar-emulator changes",
			"type": "shell",
			"command": "git commit -m \"feat(avatar-emulator): advanced avatar form, cinematic lighting, dev panel, sensor-driven state, emulator upgrades\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: commit avatar-emulator changes (quoted)",
			"type": "shell",
			"command": "git commit -m 'feat(avatar-emulator): advanced avatar form, cinematic lighting, dev panel, sensor-driven state, emulator upgrades'",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: status (see conflicts)",
			"type": "shell",
			"command": "Clear-Host; git status --porcelain=v1; git status",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "git: resolve conflicts by restoring files",
			"type": "shell",
			"command": "git restore --source=HEAD --staged --worktree -- client/package-lock.json cloud/functions/eslint.config.cjs; git status --porcelain=v1",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "stage1: git status (experiments)",
			"type": "shell",
			"command": "git status --porcelain experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage1: git add experiments",
			"type": "shell",
			"command": "git add experiments/scing_avatar_env/src",
			"isBackground": false
		},
		{
			"label": "stage1: git commit",
			"type": "shell",
			"command": "git commit -m \"feat(experiments): stage 1 — dev options panel + camera controls + HUD lock\"",
			"isBackground": false
		},
		{
			"label": "stage1: git commit (quoted)",
			"type": "shell",
			"command": "git commit -m 'feat(experiments): stage 1 — dev options panel + camera controls + HUD lock'",
			"isBackground": false
		},
		{
			"label": "stage1: git push",
			"type": "shell",
			"command": "git push",
			"isBackground": false
		},
		{
			"label": "stage2: git status (experiments)",
			"type": "shell",
			"command": "git status --porcelain experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage2: diff stat (experiments)",
			"type": "shell",
			"command": "git diff --stat -- experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage2: status full (sanity)",
			"type": "shell",
			"command": "git status --porcelain",
			"isBackground": false
		},
		{
			"label": "stage2: list scripts",
			"type": "shell",
			"command": "node -e \"const p=require('./experiments/scing_avatar_env/package.json'); console.log(p.scripts)\"",
			"isBackground": false
		},
		{
			"label": "stage2: list scripts (ps-safe)",
			"type": "shell",
			"command": "node -p 'JSON.stringify(require(\"./experiments/scing_avatar_env/package.json\").scripts,null,2)'",
			"isBackground": false
		},
		{
			"label": "stage2: scripts via PowerShell",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Get-Content -Raw .\\experiments\\scing_avatar_env\\package.json | ConvertFrom-Json | Select-Object -ExpandProperty scripts | ConvertTo-Json -Depth 10\"",
			"isBackground": false
		},
		{
			"label": "stage2: build (experiments)",
			"type": "shell",
			"command": "npm --prefix .\\experiments\\scing_avatar_env run build",
			"isBackground": false
		},
		{
			"label": "stage2: build via cmd (experiments)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run build\"",
			"isBackground": false
		},
		{
			"label": "stage2: git add (experiments)",
			"type": "shell",
			"command": "git add experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage2: git commit",
			"type": "shell",
			"command": "git commit -m \"feat(experiments): stage 2 — avatar-only floor reflection + contour lighting\"",
			"isBackground": false
		},
		{
			"label": "stage2: git commit (ps-safe)",
			"type": "shell",
			"command": "git commit -m 'feat(experiments): stage 2 — avatar-only floor reflection + contour lighting'",
			"isBackground": false
		},
		{
			"label": "stage2: git push",
			"type": "shell",
			"command": "git push",
			"isBackground": false
		},
		{
			"label": "stage2: final status check",
			"type": "shell",
			"command": "git status --porcelain experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage3: build (experiments)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run build\"",
			"isBackground": false
		},
		{
			"label": "stage3: git status (experiments)",
			"type": "shell",
			"command": "git status --porcelain experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage3: git add (experiments)",
			"type": "shell",
			"command": "git add experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage3: git commit",
			"type": "shell",
			"command": "git commit -m \"feat(experiments): stage 3 — cinematic 4-spot light rig (gold/violet/magenta + soft white)\"",
			"isBackground": false
		},
		{
			"label": "stage3: git commit (ps-safe)",
			"type": "shell",
			"command": "git commit -m 'feat(experiments): stage 3 — cinematic 4-spot light rig (gold/violet/magenta + soft white)'",
			"isBackground": false
		},
		{
			"label": "stage3: git push",
			"type": "shell",
			"command": "git push",
			"isBackground": false
		},
		{
			"label": "stage3: final status check",
			"type": "shell",
			"command": "git status --porcelain experiments/scing_avatar_env",
			"isBackground": false
		},
		{
			"label": "stage3: ensure dev server running (strict)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run dev -- --host 127.0.0.1 --port 5173 --strictPort\"",
			"isBackground": true
		},
		{
			"label": "quick: build (experiments) after camera fix",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run build\"",
			"isBackground": false
		},
		{
			"label": "tune: build (experiments)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run build\"",
			"isBackground": false
		},
		{
			"label": "debug: is port 5173 listening",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Get-NetTCPConnection -LocalPort 5173 -State Listen -ErrorAction SilentlyContinue | Select-Object -First 1 | Format-List -Property LocalAddress,LocalPort,OwningProcess\"\"",
			"isBackground": false
		},
		{
			"label": "debug: try start dev server (5173)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run dev -- --host 127.0.0.1 --port 5173 --strictPort\"",
			"isBackground": false
		},
		{
			"label": "debug: get owning process for 5173 (fixed quoting)",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Get-NetTCPConnection -LocalPort 5173 -State Listen | Select-Object -First 1 -Property LocalAddress,LocalPort,OwningProcess | Format-List\"",
			"isBackground": false
		},
		{
			"label": "debug: netstat 5173",
			"type": "shell",
			"command": "cmd /c \"netstat -ano | findstr :5173\"",
			"isBackground": false
		},
		{
			"label": "debug: process info for 5173 pid",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Get-Process -Id 17332 | Format-List -Property Id,ProcessName,Path\"",
			"isBackground": false
		},
		{
			"label": "debug: start dev server on 5174 to capture runtime logs",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run dev -- --host 127.0.0.1 --port 5174 --strictPort\"",
			"isBackground": false
		},
		{
			"label": "hotfix: build (experiments)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\experiments\\scing_avatar_env run build\"",
			"isBackground": false
		},
		{
			"label": "Report: Repo Status (ScingOS)",
			"type": "shell",
			"command": "cmd /c \"${workspaceFolder}\\tools\\report-repo.cmd\"",
			"problemMatcher": []
		},
		{
			"label": "Report: FB App Status (apps/scingular-ai)",
			"type": "shell",
			"command": "cmd /c \"${workspaceFolder}\\tools\\report-fb-app.cmd\"",
			"problemMatcher": []
		},
		{
			"label": "Report: FULL (Repo + FB App)",
			"dependsOrder": "sequence",
			"dependsOn": [
				"Report: Repo Status (ScingOS)",
				"Report: FB App Status (apps/scingular-ai)"
			],
			"problemMatcher": []
		},
		{
			"label": "client: dev (3000)",
			"type": "shell",
			"command": "npm.cmd run dev -- -p 3000 -H 127.0.0.1",
			"options": {
				"cwd": "${workspaceFolder}\\client",
				"shell": {
					"executable": "cmd.exe",
					"args": [
						"/d",
						"/c"
					]
				}
			},
			"isBackground": true,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "debug: head dev credentials",
			"type": "shell",
			"command": "cmd /c \"curl -I http://localhost:3000/dev/credentials\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "client: dev server 3000",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "debug: head dev credentials (task)",
			"type": "shell",
			"command": "cmd /c \"curl -I http://localhost:3000/dev/credentials\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "debug: status dev credentials (task)",
			"type": "shell",
			"command": "cmd /c \"curl -i -s -o NUL -w \\\"STATUS:%{http_code}\\\\n\\\" http://localhost:3000/dev/credentials\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "client: dev server (3000)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true
		},
		{
			"label": "client: env key-name check",
			"type": "shell",
			"command": "node -e \"const fs=require('fs');const p='client/.env.local';if(!fs.existsSync(p)){console.log('MISSING_FILE');process.exit(0);}const lines=fs.readFileSync(p,'utf8').split(/\\r?\\n/);const keys=new Set(lines.map(l=>l.trim()).filter(l=>l && !l.startsWith('#') && l.includes('=')).map(l=>l.split('=',2)[0].trim()));const req=['NEXT_PUBLIC_FIREBASE_API_KEY','NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN','NEXT_PUBLIC_FIREBASE_PROJECT_ID','NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET','NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID','NEXT_PUBLIC_FIREBASE_APP_ID','ENABLE_DEV_CREDENTIALS_PAGE','NEXT_PUBLIC_APP_ENV','NEXT_PUBLIC_SCINGOS_DEV_ALLOWLIST_EMAILS','DEV_CREDENTIALS_ADMIN_EMAILS'];const missing=req.filter(k=>!keys.has(k));if(missing.length){console.log('MISSING_KEYS');missing.forEach(k=>console.log(k));} else {console.log('ENV_KEYS_OK');}\"",
			"isBackground": false
		},
		{
			"label": "client: env key-name check (cmd+node)",
			"type": "shell",
			"command": "cmd /c \"node -e \\\"const fs=require('fs');const p='client/.env.local';if(!fs.existsSync(p)){console.log('MISSING_FILE');process.exit(0);}const raw=fs.readFileSync(p,'utf8');const lines=raw.split(String.fromCharCode(10)).map(l=>l.split(String.fromCharCode(13)).join('')).map(l=>l.trim());const keys=new Set(lines.filter(l=>l && !l.startsWith('#') && l.includes('=')).map(l=>l.split('=',2)[0].trim()));const req=['NEXT_PUBLIC_FIREBASE_API_KEY','NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN','NEXT_PUBLIC_FIREBASE_PROJECT_ID','NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET','NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID','NEXT_PUBLIC_FIREBASE_APP_ID','ENABLE_DEV_CREDENTIALS_PAGE','NEXT_PUBLIC_APP_ENV','NEXT_PUBLIC_SCINGOS_DEV_ALLOWLIST_EMAILS','DEV_CREDENTIALS_ADMIN_EMAILS'];const missing=req.filter(k=>!keys.has(k));if(missing.length){console.log('MISSING_KEYS');missing.forEach(k=>console.log(k));} else {console.log('ENV_KEYS_OK');}\\\"\"",
			"isBackground": false
		},
		{
			"label": "client: set NEXT_PUBLIC_APP_ENV=dev",
			"type": "shell",
			"command": "cmd /c \"echo NEXT_PUBLIC_APP_ENV=dev>> client\\\\.env.local\"",
			"isBackground": false
		},
		{
			"label": "client: env key-name check (cmd+node) [recheck]",
			"type": "shell",
			"command": "cmd /c \"node -e \\\"const fs=require('fs');const p='client/.env.local';if(!fs.existsSync(p)){console.log('MISSING_FILE');process.exit(0);}const raw=fs.readFileSync(p,'utf8');const lines=raw.split(String.fromCharCode(10)).map(l=>l.split(String.fromCharCode(13)).join('')).map(l=>l.trim());const keys=new Set(lines.filter(l=>l && !l.startsWith('#') && l.includes('=')).map(l=>l.split('=',2)[0].trim()));const req=['NEXT_PUBLIC_FIREBASE_API_KEY','NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN','NEXT_PUBLIC_FIREBASE_PROJECT_ID','NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET','NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID','NEXT_PUBLIC_FIREBASE_APP_ID','ENABLE_DEV_CREDENTIALS_PAGE','NEXT_PUBLIC_APP_ENV','NEXT_PUBLIC_SCINGOS_DEV_ALLOWLIST_EMAILS','DEV_CREDENTIALS_ADMIN_EMAILS'];const missing=req.filter(k=>!keys.has(k));if(missing.length){console.log('MISSING_KEYS');missing.forEach(k=>console.log(k));} else {console.log('ENV_KEYS_OK');}\\\"\"",
			"isBackground": false
		},
		{
			"label": "client: restart dev server (kill 3000)",
			"type": "shell",
			"command": "cmd /c \"powershell -NoProfile -Command \\\"$c=Get-NetTCPConnection -LocalPort 3000 -State Listen -ErrorAction SilentlyContinue | Select-Object -First 1; if($null -ne $c){ Stop-Process -Id $c.OwningProcess -Force; Write-Output 'STOPPED' } else { Write-Output 'NO_LISTENER' }\\\"\"",
			"isBackground": false
		},
		{
			"label": "client: stop dev server PID 29336",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Stop-Process -Id 29336 -Force -ErrorAction SilentlyContinue; Write-Output 'STOPPED_OR_NOT_RUNNING'\"",
			"isBackground": false
		},
		{
			"label": "client: dev server (3000) [restart]",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true
		},
		{
			"label": "client: protocol check (status codes)",
			"type": "shell",
			"command": "cmd /c \"powershell -NoProfile -Command \\\"$ErrorActionPreference='Stop'; function code($u){ try{ (Invoke-WebRequest -UseBasicParsing $u).StatusCode } catch { if($_.Exception.Response){ $_.Exception.Response.StatusCode.value__ } else { throw } } }; Write-Output ('/ ' + (code 'http://localhost:3000/')); Write-Output ('/auth/signin ' + (code 'http://localhost:3000/auth/signin')); Write-Output ('/dev/credentials ' + (code 'http://localhost:3000/dev/credentials'));\\\"\"",
			"isBackground": false
		},
		{
			"label": "client: protocol check (node fetch)",
			"type": "shell",
			"command": "cmd /c \"node -e \\\"(async()=>{const base='http://localhost:3000';const paths=['/','/auth/signin','/dev/credentials'];for(const p of paths){const r=await fetch(base+p,{redirect:'manual'});console.log(p+' '+r.status);} })().catch(e=>{console.error(e&&e.stack||e);process.exit(1);});\\\"\"",
			"isBackground": false
		},
		{
			"label": "cleanup: remove stray untracked files",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Remove-Item -Recurse -Force docs/env-templates,mcp,reports -ErrorAction SilentlyContinue; Remove-Item -Force mcp.json,scripts/apply-credential-pack-envs.mjs,tools/report-fb-app.cmd,tools/report-fb-app.ps1,tools/report-repo.cmd,tools/secret-scan.mjs -ErrorAction SilentlyContinue; git status --porcelain=v1\"",
			"isBackground": false
		},
		{
			"label": "client: lint",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run lint\"",
			"isBackground": false
		},
		{
			"label": "client: lint (cd client)",
			"type": "shell",
			"command": "cmd /c \"cd client && npm run lint\"",
			"isBackground": false
		},
		{
			"label": "client: build (post-bootstrap)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run build\"",
			"isBackground": false
		},
		{
			"label": "client: build (hydration fix)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run build\"",
			"isBackground": false
		},
		{
			"label": "client: stop dev server (port 3000)",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"$c=Get-NetTCPConnection -LocalPort 3000 -State Listen -ErrorAction SilentlyContinue | Select-Object -First 1; if($null -ne $c){ Stop-Process -Id $c.OwningProcess -Force; Write-Output ('STOPPED '+$c.OwningProcess) } else { Write-Output 'NO_LISTENER' }\"",
			"isBackground": false
		},
		{
			"label": "client: start dev server (3000) [hydration fix]",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true
		},
		{
			"label": "debug: netstat 3000",
			"type": "shell",
			"command": "cmd /c \"netstat -ano | findstr :3000\"",
			"isBackground": false
		},
		{
			"label": "debug: kill pid 57708",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Stop-Process -Id 57708 -Force\"",
			"isBackground": false
		},
		{
			"label": "client: start dev server (3000) [hydration fix retry]",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true
		},
		{
			"label": "client: build (hooks fix)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run build\"",
			"isBackground": false
		},
		{
			"label": "client: start dev server (3000) [hooks fix]",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true
		},
		{
			"label": "debug: netstat 3000 (listeners)",
			"type": "shell",
			"command": "cmd /c \"netstat -ano | findstr :3000 | findstr LISTENING\"",
			"isBackground": false
		},
		{
			"label": "debug: kill pid 68300",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Stop-Process -Id 68300 -Force\"",
			"isBackground": false
		},
		{
			"label": "debug: check /dev/credentials bootstrap marker",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"$c=(Invoke-WebRequest -UseBasicParsing 'http://localhost:3000/dev/credentials').Content; if($c -match 'Bootstrap') { 'BOOTSTRAP' } else { 'NOBOOTSTRAP' }\"",
			"isBackground": false
		},
		{
			"label": "debug: node fetch bootstrap marker",
			"type": "shell",
			"command": "node -e \"fetch('http://localhost:3000/dev/credentials').then(r=>r.text()).then(t=>{console.log(t.includes('Bootstrap')?'BOOTSTRAP':'NOBOOTSTRAP')}).catch(e=>{console.error('FETCH_FAILED',e.message); process.exit(2);})\"",
			"isBackground": false
		},
		{
			"label": "debug: curl.exe bootstrap marker",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"$t = (curl.exe -s http://localhost:3000/dev/credentials); if($t -match 'Bootstrap') { 'BOOTSTRAP' } else { 'NOBOOTSTRAP' }\"",
			"isBackground": false
		},
		{
			"label": "debug: curl.exe bootstrap marker (no var expansion)",
			"type": "shell",
			"command": "powershell -NoProfile -Command '$t = (curl.exe -s http://localhost:3000/dev/credentials); if($t -match ''Bootstrap'') { ''BOOTSTRAP'' } else { ''NOBOOTSTRAP'' }'",
			"isBackground": false
		},
		{
			"label": "debug: netstat 3000",
			"type": "shell",
			"command": "cmd /c \"netstat -ano | findstr :3000 | findstr LISTENING\"",
			"isBackground": false
		},
		{
			"label": "debug: curl home headers",
			"type": "shell",
			"command": "cmd /c \"curl.exe -I http://localhost:3000/\"",
			"isBackground": false
		},
		{
			"label": "client: dev (3000)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix client run dev -- -p 3000\"",
			"isBackground": true
		},
		{
			"label": "debug: test port 3000",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Test-NetConnection -ComputerName 127.0.0.1 -Port 3000 | Select-Object -Property TcpTestSucceeded\"",
			"isBackground": false
		},
		{
			"label": "debug: curl 3000 home headers",
			"type": "shell",
			"command": "cmd /c \"curl.exe -I http://127.0.0.1:3000/\"",
			"isBackground": false
		},
		{
			"label": "debug: snippet /dev/credentials html",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"$h = (curl.exe -s http://127.0.0.1:3000/dev/credentials); $h.Substring(0, [Math]::Min(800, $h.Length))\"",
			"isBackground": false
		},
		{
			"label": "debug: headers /dev/credentials",
			"type": "shell",
			"command": "cmd /c \"curl.exe -I http://127.0.0.1:3000/dev/credentials\"",
			"isBackground": false
		},
		{
			"label": "debug: find marker in /dev/credentials html",
			"type": "shell",
			"command": "cmd /c \"curl.exe -s http://127.0.0.1:3000/dev/credentials | findstr /i Loading\"",
			"isBackground": false
		},
		{
			"label": "debug: fetch /dev/credentials after error boundary",
			"type": "shell",
			"command": "cmd /c \"curl.exe -s http://127.0.0.1:3000/dev/credentials | findstr /i \\\"Runtime error\\\"\"",
			"isBackground": false
		},
		{
			"label": "debug: fetch / HTML contains Neural Base",
			"type": "shell",
			"command": "cmd /c \"curl.exe -s http://127.0.0.1:3000/ | findstr /i Neural\"",
			"isBackground": false
		},
		{
			"label": "client: build (next)",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"npm --prefix client run build"
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Client: Next Dev (3000)",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"cd /d client & npm.cmd run dev -- --port 3000"
			],
			"isBackground": true,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "client: type-check",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\\\client run type-check\"",
			"isBackground": false,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "client: type-check (pretty=false)",
			"type": "shell",
			"command": "cmd /c \"npm --prefix .\\\\client run type-check -- --pretty false\"",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "BFI: registry health (localdev)",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"$headers=@{'x-bdk-token'='localdev'}; irm -Method Post -Uri http://localhost:3000/api/bfi/registry/health -Headers $headers -Body '{}' -ContentType 'application/json' | ConvertTo-Json -Depth 20\"",
			"isBackground": false
		},
		{
			"label": "BFI: registry health (localdev, cmd)",
			"type": "shell",
			"command": "cmd /c \"powershell -NoProfile -Command \\\"$h=@{ 'x-bdk-token'='localdev' }; irm -Method Post -Uri 'http://localhost:3000/api/bfi/registry/health' -Headers $h -Body '{}' -ContentType 'application/json' | ConvertTo-Json -Depth 20\\\"\"",
			"isBackground": false
		},
		{
			"label": "BFI: registry health (localdev, inline headers)",
			"type": "shell",
			"command": "cmd /c \"powershell -NoProfile -Command \\\"irm -Method Post -Uri 'http://localhost:3000/api/bfi/registry/health' -Headers @{ 'x-bdk-token'='localdev' } -Body '{}' -ContentType 'application/json' | ConvertTo-Json -Depth 20\\\"\"",
			"isBackground": false
		},
		{
			"label": "client: dev (BDK_TOKEN=localdev)",
			"type": "shell",
			"command": "cmd /c \"set BDK_TOKEN=localdev & npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client run dev\"",
			"isBackground": true
		},
		{
			"label": "client: dev (localdev, npm.cmd)",
			"type": "shell",
			"command": "$env:BDK_TOKEN='localdev'; npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client run dev",
			"isBackground": true
		},
		{
			"label": "Gate: client install",
			"type": "shell",
			"command": "cmd /c \"npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client install\"",
			"isBackground": false
		},
		{
			"label": "Gate: client type-check",
			"type": "shell",
			"command": "cmd /c \"npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client run type-check -- --pretty false\"",
			"isBackground": false
		},
		{
			"label": "Gate: client build",
			"type": "shell",
			"command": "cmd /c \"npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client run build\"",
			"isBackground": false
		},
		{
			"label": "Gate: port 3000 check",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"Test-NetConnection localhost -Port 3000 | Select-Object -ExpandProperty TcpTestSucceeded\"",
			"isBackground": false
		},
		{
			"label": "Gate: port 3000 check (fixed)",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"(Test-NetConnection localhost -Port 3000).TcpTestSucceeded\"",
			"isBackground": false
		},
		{
			"label": "Gate: port 3000 check (native)",
			"type": "shell",
			"command": "(Test-NetConnection localhost -Port 3000).TcpTestSucceeded",
			"isBackground": false
		},
		{
			"label": "Gate: netstat 3000",
			"type": "shell",
			"command": "cmd /c \"netstat -ano | findstr :3000\"",
			"isBackground": false
		},
		{
			"label": "Gate: HTTP ping 3000",
			"type": "shell",
			"command": "powershell -NoProfile -Command \"try { (irm -Uri 'http://127.0.0.1:3000/api/meta/build').ok } catch { 'ERROR' }\"",
			"isBackground": false
		},
		{
			"label": "Gate: HTTP ping 3000 (native)",
			"type": "shell",
			"command": "try { (Invoke-RestMethod -Uri 'http://127.0.0.1:3000/api/meta/build').ok } catch { 'ERROR' }",
			"isBackground": false
		},
		{
			"label": "Gate: start client dev server (3000)",
			"type": "shell",
			"command": "cmd /c \"set BDK_TOKEN=localdev & npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client run dev -- -p 3000 -H 127.0.0.1\"",
			"isBackground": true
		},
		{
			"label": "Gate: start client dev server (ps env)",
			"type": "shell",
			"command": "$env:BDK_TOKEN='localdev'; npm.cmd --prefix C:\\Users\\maste\\SCINGOS_WORK\\ScingOS\\client run dev -- -p 3000 -H 127.0.0.1",
			"isBackground": true
		}
	]
}